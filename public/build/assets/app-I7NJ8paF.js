var Pl=Object.defineProperty;var Vl=(i,t,e)=>t in i?Pl(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var He=(i,t,e)=>Vl(i,typeof t!="symbol"?t+"":t,e);function aa(i,t){return function(){return i.apply(t,arguments)}}const{toString:jl}=Object.prototype,{getPrototypeOf:ws}=Object,{iterator:zi,toStringTag:la}=Symbol,$i=(i=>t=>{const e=jl.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),te=i=>(i=i.toLowerCase(),t=>$i(t)===i),Ki=i=>t=>typeof t===i,{isArray:yn}=Array,Gn=Ki("undefined");function Hl(i){return i!==null&&!Gn(i)&&i.constructor!==null&&!Gn(i.constructor)&&Nt(i.constructor.isBuffer)&&i.constructor.isBuffer(i)}const ua=te("ArrayBuffer");function Ul(i){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(i):t=i&&i.buffer&&ua(i.buffer),t}const Wl=Ki("string"),Nt=Ki("function"),ca=Ki("number"),Yi=i=>i!==null&&typeof i=="object",ql=i=>i===!0||i===!1,Ei=i=>{if($i(i)!=="object")return!1;const t=ws(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(la in i)&&!(zi in i)},zl=te("Date"),$l=te("File"),Kl=te("Blob"),Yl=te("FileList"),Jl=i=>Yi(i)&&Nt(i.pipe),Gl=i=>{let t;return i&&(typeof FormData=="function"&&i instanceof FormData||Nt(i.append)&&((t=$i(i))==="formdata"||t==="object"&&Nt(i.toString)&&i.toString()==="[object FormData]"))},Xl=te("URLSearchParams"),[Ql,Zl,tu,eu]=["ReadableStream","Request","Response","Headers"].map(te),nu=i=>i.trim?i.trim():i.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ni(i,t,{allOwnKeys:e=!1}={}){if(i===null||typeof i>"u")return;let n,r;if(typeof i!="object"&&(i=[i]),yn(i))for(n=0,r=i.length;n<r;n++)t.call(null,i[n],n,i);else{const s=e?Object.getOwnPropertyNames(i):Object.keys(i),o=s.length;let a;for(n=0;n<o;n++)a=s[n],t.call(null,i[a],a,i)}}function da(i,t){t=t.toLowerCase();const e=Object.keys(i);let n=e.length,r;for(;n-- >0;)if(r=e[n],t===r.toLowerCase())return r;return null}const Ye=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ha=i=>!Gn(i)&&i!==Ye;function ns(){const{caseless:i}=ha(this)&&this||{},t={},e=(n,r)=>{const s=i&&da(t,r)||r;Ei(t[s])&&Ei(n)?t[s]=ns(t[s],n):Ei(n)?t[s]=ns({},n):yn(n)?t[s]=n.slice():t[s]=n};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&ni(arguments[n],e);return t}const iu=(i,t,e,{allOwnKeys:n}={})=>(ni(t,(r,s)=>{e&&Nt(r)?i[s]=aa(r,e):i[s]=r},{allOwnKeys:n}),i),ru=i=>(i.charCodeAt(0)===65279&&(i=i.slice(1)),i),su=(i,t,e,n)=>{i.prototype=Object.create(t.prototype,n),i.prototype.constructor=i,Object.defineProperty(i,"super",{value:t.prototype}),e&&Object.assign(i.prototype,e)},ou=(i,t,e,n)=>{let r,s,o;const a={};if(t=t||{},i==null)return t;do{for(r=Object.getOwnPropertyNames(i),s=r.length;s-- >0;)o=r[s],(!n||n(o,i,t))&&!a[o]&&(t[o]=i[o],a[o]=!0);i=e!==!1&&ws(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t},au=(i,t,e)=>{i=String(i),(e===void 0||e>i.length)&&(e=i.length),e-=t.length;const n=i.indexOf(t,e);return n!==-1&&n===e},lu=i=>{if(!i)return null;if(yn(i))return i;let t=i.length;if(!ca(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=i[t];return e},uu=(i=>t=>i&&t instanceof i)(typeof Uint8Array<"u"&&ws(Uint8Array)),cu=(i,t)=>{const n=(i&&i[zi]).call(i);let r;for(;(r=n.next())&&!r.done;){const s=r.value;t.call(i,s[0],s[1])}},du=(i,t)=>{let e;const n=[];for(;(e=i.exec(t))!==null;)n.push(e);return n},hu=te("HTMLFormElement"),fu=i=>i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,r){return n.toUpperCase()+r}),Ws=(({hasOwnProperty:i})=>(t,e)=>i.call(t,e))(Object.prototype),pu=te("RegExp"),fa=(i,t)=>{const e=Object.getOwnPropertyDescriptors(i),n={};ni(e,(r,s)=>{let o;(o=t(r,s,i))!==!1&&(n[s]=o||r)}),Object.defineProperties(i,n)},gu=i=>{fa(i,(t,e)=>{if(Nt(i)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const n=i[e];if(Nt(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},mu=(i,t)=>{const e={},n=r=>{r.forEach(s=>{e[s]=!0})};return yn(i)?n(i):n(String(i).split(t)),e},vu=()=>{},bu=(i,t)=>i!=null&&Number.isFinite(i=+i)?i:t;function Au(i){return!!(i&&Nt(i.append)&&i[la]==="FormData"&&i[zi])}const yu=i=>{const t=new Array(10),e=(n,r)=>{if(Yi(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;const s=yn(n)?[]:{};return ni(n,(o,a)=>{const l=e(o,r+1);!Gn(l)&&(s[a]=l)}),t[r]=void 0,s}}return n};return e(i,0)},Cu=te("AsyncFunction"),xu=i=>i&&(Yi(i)||Nt(i))&&Nt(i.then)&&Nt(i.catch),pa=((i,t)=>i?setImmediate:t?((e,n)=>(Ye.addEventListener("message",({source:r,data:s})=>{r===Ye&&s===e&&n.length&&n.shift()()},!1),r=>{n.push(r),Ye.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",Nt(Ye.postMessage)),Eu=typeof queueMicrotask<"u"?queueMicrotask.bind(Ye):typeof process<"u"&&process.nextTick||pa,wu=i=>i!=null&&Nt(i[zi]),b={isArray:yn,isArrayBuffer:ua,isBuffer:Hl,isFormData:Gl,isArrayBufferView:Ul,isString:Wl,isNumber:ca,isBoolean:ql,isObject:Yi,isPlainObject:Ei,isReadableStream:Ql,isRequest:Zl,isResponse:tu,isHeaders:eu,isUndefined:Gn,isDate:zl,isFile:$l,isBlob:Kl,isRegExp:pu,isFunction:Nt,isStream:Jl,isURLSearchParams:Xl,isTypedArray:uu,isFileList:Yl,forEach:ni,merge:ns,extend:iu,trim:nu,stripBOM:ru,inherits:su,toFlatObject:ou,kindOf:$i,kindOfTest:te,endsWith:au,toArray:lu,forEachEntry:cu,matchAll:du,isHTMLForm:hu,hasOwnProperty:Ws,hasOwnProp:Ws,reduceDescriptors:fa,freezeMethods:gu,toObjectSet:mu,toCamelCase:fu,noop:vu,toFiniteNumber:bu,findKey:da,global:Ye,isContextDefined:ha,isSpecCompliantForm:Au,toJSONObject:yu,isAsyncFn:Cu,isThenable:xu,setImmediate:pa,asap:Eu,isIterable:wu};function W(i,t,e,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=i,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}b.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.status}}});const ga=W.prototype,ma={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(i=>{ma[i]={value:i}});Object.defineProperties(W,ma);Object.defineProperty(ga,"isAxiosError",{value:!0});W.from=(i,t,e,n,r,s)=>{const o=Object.create(ga);return b.toFlatObject(i,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),W.call(o,i.message,t,e,n,r),o.cause=i,o.name=i.name,s&&Object.assign(o,s),o};const ku=null;function is(i){return b.isPlainObject(i)||b.isArray(i)}function va(i){return b.endsWith(i,"[]")?i.slice(0,-2):i}function qs(i,t,e){return i?i.concat(t).map(function(r,s){return r=va(r),!e&&s?"["+r+"]":r}).join(e?".":""):t}function Su(i){return b.isArray(i)&&!i.some(is)}const Du=b.toFlatObject(b,{},null,function(t){return/^is[A-Z]/.test(t)});function Ji(i,t,e){if(!b.isObject(i))throw new TypeError("target must be an object");t=t||new FormData,e=b.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,C){return!b.isUndefined(C[y])});const n=e.metaTokens,r=e.visitor||h,s=e.dots,o=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(t);if(!b.isFunction(r))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(b.isDate(v))return v.toISOString();if(b.isBoolean(v))return v.toString();if(!l&&b.isBlob(v))throw new W("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(v)||b.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,y,C){let R=v;if(v&&!C&&typeof v=="object"){if(b.endsWith(y,"{}"))y=n?y:y.slice(0,-2),v=JSON.stringify(v);else if(b.isArray(v)&&Su(v)||(b.isFileList(v)||b.endsWith(y,"[]"))&&(R=b.toArray(v)))return y=va(y),R.forEach(function(F,B){!(b.isUndefined(F)||F===null)&&t.append(o===!0?qs([y],B,s):o===null?y:y+"[]",c(F))}),!1}return is(v)?!0:(t.append(qs(C,y,s),c(v)),!1)}const p=[],m=Object.assign(Du,{defaultVisitor:h,convertValue:c,isVisitable:is});function k(v,y){if(!b.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+y.join("."));p.push(v),b.forEach(v,function(R,x){(!(b.isUndefined(R)||R===null)&&r.call(t,R,b.isString(x)?x.trim():x,y,m))===!0&&k(R,y?y.concat(x):[x])}),p.pop()}}if(!b.isObject(i))throw new TypeError("data must be an object");return k(i),t}function zs(i){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(i).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ks(i,t){this._pairs=[],i&&Ji(i,this,t)}const ba=ks.prototype;ba.append=function(t,e){this._pairs.push([t,e])};ba.toString=function(t){const e=t?function(n){return t.call(this,n,zs)}:zs;return this._pairs.map(function(r){return e(r[0])+"="+e(r[1])},"").join("&")};function _u(i){return encodeURIComponent(i).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Aa(i,t,e){if(!t)return i;const n=e&&e.encode||_u;b.isFunction(e)&&(e={serialize:e});const r=e&&e.serialize;let s;if(r?s=r(t,e):s=b.isURLSearchParams(t)?t.toString():new ks(t,e).toString(n),s){const o=i.indexOf("#");o!==-1&&(i=i.slice(0,o)),i+=(i.indexOf("?")===-1?"?":"&")+s}return i}class $s{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){b.forEach(this.handlers,function(n){n!==null&&t(n)})}}const ya={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Tu=typeof URLSearchParams<"u"?URLSearchParams:ks,Ru=typeof FormData<"u"?FormData:null,Ou=typeof Blob<"u"?Blob:null,Fu={isBrowser:!0,classes:{URLSearchParams:Tu,FormData:Ru,Blob:Ou},protocols:["http","https","file","blob","url","data"]},Ss=typeof window<"u"&&typeof document<"u",rs=typeof navigator=="object"&&navigator||void 0,Lu=Ss&&(!rs||["ReactNative","NativeScript","NS"].indexOf(rs.product)<0),Mu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Iu=Ss&&window.location.href||"http://localhost",Nu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ss,hasStandardBrowserEnv:Lu,hasStandardBrowserWebWorkerEnv:Mu,navigator:rs,origin:Iu},Symbol.toStringTag,{value:"Module"})),Ct={...Nu,...Fu};function Bu(i,t){return Ji(i,new Ct.classes.URLSearchParams,Object.assign({visitor:function(e,n,r,s){return Ct.isNode&&b.isBuffer(e)?(this.append(n,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Pu(i){return b.matchAll(/\w+|\[(\w*)]/g,i).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vu(i){const t={},e=Object.keys(i);let n;const r=e.length;let s;for(n=0;n<r;n++)s=e[n],t[s]=i[s];return t}function Ca(i){function t(e,n,r,s){let o=e[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=e.length;return o=!o&&b.isArray(r)?r.length:o,l?(b.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):((!r[o]||!b.isObject(r[o]))&&(r[o]=[]),t(e,n,r[o],s)&&b.isArray(r[o])&&(r[o]=Vu(r[o])),!a)}if(b.isFormData(i)&&b.isFunction(i.entries)){const e={};return b.forEachEntry(i,(n,r)=>{t(Pu(n),r,e,0)}),e}return null}function ju(i,t,e){if(b.isString(i))try{return(t||JSON.parse)(i),b.trim(i)}catch(n){if(n.name!=="SyntaxError")throw n}return(e||JSON.stringify)(i)}const ii={transitional:ya,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,s=b.isObject(t);if(s&&b.isHTMLForm(t)&&(t=new FormData(t)),b.isFormData(t))return r?JSON.stringify(Ca(t)):t;if(b.isArrayBuffer(t)||b.isBuffer(t)||b.isStream(t)||b.isFile(t)||b.isBlob(t)||b.isReadableStream(t))return t;if(b.isArrayBufferView(t))return t.buffer;if(b.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Bu(t,this.formSerializer).toString();if((a=b.isFileList(t))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Ji(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),ju(t)):t}],transformResponse:[function(t){const e=this.transitional||ii.transitional,n=e&&e.forcedJSONParsing,r=this.responseType==="json";if(b.isResponse(t)||b.isReadableStream(t))return t;if(t&&b.isString(t)&&(n&&!this.responseType||r)){const o=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(a){if(o)throw a.name==="SyntaxError"?W.from(a,W.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ct.classes.FormData,Blob:Ct.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],i=>{ii.headers[i]={}});const Hu=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Uu=i=>{const t={};let e,n,r;return i&&i.split(`
`).forEach(function(o){r=o.indexOf(":"),e=o.substring(0,r).trim().toLowerCase(),n=o.substring(r+1).trim(),!(!e||t[e]&&Hu[e])&&(e==="set-cookie"?t[e]?t[e].push(n):t[e]=[n]:t[e]=t[e]?t[e]+", "+n:n)}),t},Ks=Symbol("internals");function Ln(i){return i&&String(i).trim().toLowerCase()}function wi(i){return i===!1||i==null?i:b.isArray(i)?i.map(wi):String(i)}function Wu(i){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=e.exec(i);)t[n[1]]=n[2];return t}const qu=i=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(i.trim());function pr(i,t,e,n,r){if(b.isFunction(n))return n.call(this,t,e);if(r&&(t=e),!!b.isString(t)){if(b.isString(n))return t.indexOf(n)!==-1;if(b.isRegExp(n))return n.test(t)}}function zu(i){return i.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,n)=>e.toUpperCase()+n)}function $u(i,t){const e=b.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(i,n+e,{value:function(r,s,o){return this[n].call(this,t,r,s,o)},configurable:!0})})}let Bt=class{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function s(a,l,c){const h=Ln(l);if(!h)throw new Error("header name must be a non-empty string");const p=b.findKey(r,h);(!p||r[p]===void 0||c===!0||c===void 0&&r[p]!==!1)&&(r[p||l]=wi(a))}const o=(a,l)=>b.forEach(a,(c,h)=>s(c,h,l));if(b.isPlainObject(t)||t instanceof this.constructor)o(t,e);else if(b.isString(t)&&(t=t.trim())&&!qu(t))o(Uu(t),e);else if(b.isObject(t)&&b.isIterable(t)){let a={},l,c;for(const h of t){if(!b.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[c=h[0]]=(l=a[c])?b.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}o(a,e)}else t!=null&&s(e,t,n);return this}get(t,e){if(t=Ln(t),t){const n=b.findKey(this,t);if(n){const r=this[n];if(!e)return r;if(e===!0)return Wu(r);if(b.isFunction(e))return e.call(this,r,n);if(b.isRegExp(e))return e.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ln(t),t){const n=b.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||pr(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let r=!1;function s(o){if(o=Ln(o),o){const a=b.findKey(n,o);a&&(!e||pr(n,n[a],a,e))&&(delete n[a],r=!0)}}return b.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const s=e[n];(!t||pr(this,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,n={};return b.forEach(this,(r,s)=>{const o=b.findKey(n,s);if(o){e[o]=wi(r),delete e[s];return}const a=t?zu(s):String(s).trim();a!==s&&delete e[s],e[a]=wi(r),n[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return b.forEach(this,(n,r)=>{n!=null&&n!==!1&&(e[r]=t&&b.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(r=>n.set(r)),n}static accessor(t){const n=(this[Ks]=this[Ks]={accessors:{}}).accessors,r=this.prototype;function s(o){const a=Ln(o);n[a]||($u(r,o),n[a]=!0)}return b.isArray(t)?t.forEach(s):s(t),this}};Bt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Bt.prototype,({value:i},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>i,set(n){this[e]=n}}});b.freezeMethods(Bt);function gr(i,t){const e=this||ii,n=t||e,r=Bt.from(n.headers);let s=n.data;return b.forEach(i,function(a){s=a.call(e,s,r.normalize(),t?t.status:void 0)}),r.normalize(),s}function xa(i){return!!(i&&i.__CANCEL__)}function Cn(i,t,e){W.call(this,i??"canceled",W.ERR_CANCELED,t,e),this.name="CanceledError"}b.inherits(Cn,W,{__CANCEL__:!0});function Ea(i,t,e){const n=e.config.validateStatus;!e.status||!n||n(e.status)?i(e):t(new W("Request failed with status code "+e.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function Ku(i){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(i);return t&&t[1]||""}function Yu(i,t){i=i||10;const e=new Array(i),n=new Array(i);let r=0,s=0,o;return t=t!==void 0?t:1e3,function(l){const c=Date.now(),h=n[s];o||(o=c),e[r]=l,n[r]=c;let p=s,m=0;for(;p!==r;)m+=e[p++],p=p%i;if(r=(r+1)%i,r===s&&(s=(s+1)%i),c-o<t)return;const k=h&&c-h;return k?Math.round(m*1e3/k):void 0}}function Ju(i,t){let e=0,n=1e3/t,r,s;const o=(c,h=Date.now())=>{e=h,r=null,s&&(clearTimeout(s),s=null),i.apply(null,c)};return[(...c)=>{const h=Date.now(),p=h-e;p>=n?o(c,h):(r=c,s||(s=setTimeout(()=>{s=null,o(r)},n-p)))},()=>r&&o(r)]}const Oi=(i,t,e=3)=>{let n=0;const r=Yu(50,250);return Ju(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-n,c=r(l),h=o<=a;n=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[t?"download":"upload"]:!0};i(p)},e)},Ys=(i,t)=>{const e=i!=null;return[n=>t[0]({lengthComputable:e,total:i,loaded:n}),t[1]]},Js=i=>(...t)=>b.asap(()=>i(...t)),Gu=Ct.hasStandardBrowserEnv?((i,t)=>e=>(e=new URL(e,Ct.origin),i.protocol===e.protocol&&i.host===e.host&&(t||i.port===e.port)))(new URL(Ct.origin),Ct.navigator&&/(msie|trident)/i.test(Ct.navigator.userAgent)):()=>!0,Xu=Ct.hasStandardBrowserEnv?{write(i,t,e,n,r,s){const o=[i+"="+encodeURIComponent(t)];b.isNumber(e)&&o.push("expires="+new Date(e).toGMTString()),b.isString(n)&&o.push("path="+n),b.isString(r)&&o.push("domain="+r),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(i){const t=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(i){this.write(i,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Qu(i){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(i)}function Zu(i,t){return t?i.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):i}function wa(i,t,e){let n=!Qu(t);return i&&(n||e==!1)?Zu(i,t):t}const Gs=i=>i instanceof Bt?{...i}:i;function tn(i,t){t=t||{};const e={};function n(c,h,p,m){return b.isPlainObject(c)&&b.isPlainObject(h)?b.merge.call({caseless:m},c,h):b.isPlainObject(h)?b.merge({},h):b.isArray(h)?h.slice():h}function r(c,h,p,m){if(b.isUndefined(h)){if(!b.isUndefined(c))return n(void 0,c,p,m)}else return n(c,h,p,m)}function s(c,h){if(!b.isUndefined(h))return n(void 0,h)}function o(c,h){if(b.isUndefined(h)){if(!b.isUndefined(c))return n(void 0,c)}else return n(void 0,h)}function a(c,h,p){if(p in t)return n(c,h);if(p in i)return n(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,p)=>r(Gs(c),Gs(h),p,!0)};return b.forEach(Object.keys(Object.assign({},i,t)),function(h){const p=l[h]||r,m=p(i[h],t[h],h);b.isUndefined(m)&&p!==a||(e[h]=m)}),e}const ka=i=>{const t=tn({},i);let{data:e,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:s,headers:o,auth:a}=t;t.headers=o=Bt.from(o),t.url=Aa(wa(t.baseURL,t.url,t.allowAbsoluteUrls),i.params,i.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(b.isFormData(e)){if(Ct.hasStandardBrowserEnv||Ct.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(Ct.hasStandardBrowserEnv&&(n&&b.isFunction(n)&&(n=n(t)),n||n!==!1&&Gu(t.url))){const c=r&&s&&Xu.read(s);c&&o.set(r,c)}return t},tc=typeof XMLHttpRequest<"u",ec=tc&&function(i){return new Promise(function(e,n){const r=ka(i);let s=r.data;const o=Bt.from(r.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=r,h,p,m,k,v;function y(){k&&k(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let C=new XMLHttpRequest;C.open(r.method.toUpperCase(),r.url,!0),C.timeout=r.timeout;function R(){if(!C)return;const F=Bt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),N={data:!a||a==="text"||a==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:F,config:i,request:C};Ea(function(O){e(O),y()},function(O){n(O),y()},N),C=null}"onloadend"in C?C.onloadend=R:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(R)},C.onabort=function(){C&&(n(new W("Request aborted",W.ECONNABORTED,i,C)),C=null)},C.onerror=function(){n(new W("Network Error",W.ERR_NETWORK,i,C)),C=null},C.ontimeout=function(){let B=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const N=r.transitional||ya;r.timeoutErrorMessage&&(B=r.timeoutErrorMessage),n(new W(B,N.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,i,C)),C=null},s===void 0&&o.setContentType(null),"setRequestHeader"in C&&b.forEach(o.toJSON(),function(B,N){C.setRequestHeader(N,B)}),b.isUndefined(r.withCredentials)||(C.withCredentials=!!r.withCredentials),a&&a!=="json"&&(C.responseType=r.responseType),c&&([m,v]=Oi(c,!0),C.addEventListener("progress",m)),l&&C.upload&&([p,k]=Oi(l),C.upload.addEventListener("progress",p),C.upload.addEventListener("loadend",k)),(r.cancelToken||r.signal)&&(h=F=>{C&&(n(!F||F.type?new Cn(null,i,C):F),C.abort(),C=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const x=Ku(r.url);if(x&&Ct.protocols.indexOf(x)===-1){n(new W("Unsupported protocol "+x+":",W.ERR_BAD_REQUEST,i));return}C.send(s||null)})},nc=(i,t)=>{const{length:e}=i=i?i.filter(Boolean):[];if(t||e){let n=new AbortController,r;const s=function(c){if(!r){r=!0,a();const h=c instanceof Error?c:this.reason;n.abort(h instanceof W?h:new Cn(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,s(new W(`timeout ${t} of ms exceeded`,W.ETIMEDOUT))},t);const a=()=>{i&&(o&&clearTimeout(o),o=null,i.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),i=null)};i.forEach(c=>c.addEventListener("abort",s));const{signal:l}=n;return l.unsubscribe=()=>b.asap(a),l}},ic=function*(i,t){let e=i.byteLength;if(e<t){yield i;return}let n=0,r;for(;n<e;)r=n+t,yield i.slice(n,r),n=r},rc=async function*(i,t){for await(const e of sc(i))yield*ic(e,t)},sc=async function*(i){if(i[Symbol.asyncIterator]){yield*i;return}const t=i.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Xs=(i,t,e,n)=>{const r=rc(i,t);let s=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await r.next();if(c){a(),l.close();return}let p=h.byteLength;if(e){let m=s+=p;e(m)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),r.return()}},{highWaterMark:2})},Gi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Sa=Gi&&typeof ReadableStream=="function",oc=Gi&&(typeof TextEncoder=="function"?(i=>t=>i.encode(t))(new TextEncoder):async i=>new Uint8Array(await new Response(i).arrayBuffer())),Da=(i,...t)=>{try{return!!i(...t)}catch{return!1}},ac=Sa&&Da(()=>{let i=!1;const t=new Request(Ct.origin,{body:new ReadableStream,method:"POST",get duplex(){return i=!0,"half"}}).headers.has("Content-Type");return i&&!t}),Qs=64*1024,ss=Sa&&Da(()=>b.isReadableStream(new Response("").body)),Fi={stream:ss&&(i=>i.body)};Gi&&(i=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Fi[t]&&(Fi[t]=b.isFunction(i[t])?e=>e[t]():(e,n)=>{throw new W(`Response type '${t}' is not supported`,W.ERR_NOT_SUPPORT,n)})})})(new Response);const lc=async i=>{if(i==null)return 0;if(b.isBlob(i))return i.size;if(b.isSpecCompliantForm(i))return(await new Request(Ct.origin,{method:"POST",body:i}).arrayBuffer()).byteLength;if(b.isArrayBufferView(i)||b.isArrayBuffer(i))return i.byteLength;if(b.isURLSearchParams(i)&&(i=i+""),b.isString(i))return(await oc(i)).byteLength},uc=async(i,t)=>{const e=b.toFiniteNumber(i.getContentLength());return e??lc(t)},cc=Gi&&(async i=>{let{url:t,method:e,data:n,signal:r,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:p="same-origin",fetchOptions:m}=ka(i);c=c?(c+"").toLowerCase():"text";let k=nc([r,s&&s.toAbortSignal()],o),v;const y=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let C;try{if(l&&ac&&e!=="get"&&e!=="head"&&(C=await uc(h,n))!==0){let N=new Request(t,{method:"POST",body:n,duplex:"half"}),J;if(b.isFormData(n)&&(J=N.headers.get("content-type"))&&h.setContentType(J),N.body){const[O,P]=Ys(C,Oi(Js(l)));n=Xs(N.body,Qs,O,P)}}b.isString(p)||(p=p?"include":"omit");const R="credentials"in Request.prototype;v=new Request(t,{...m,signal:k,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:R?p:void 0});let x=await fetch(v,m);const F=ss&&(c==="stream"||c==="response");if(ss&&(a||F&&y)){const N={};["status","statusText","headers"].forEach(I=>{N[I]=x[I]});const J=b.toFiniteNumber(x.headers.get("content-length")),[O,P]=a&&Ys(J,Oi(Js(a),!0))||[];x=new Response(Xs(x.body,Qs,O,()=>{P&&P(),y&&y()}),N)}c=c||"text";let B=await Fi[b.findKey(Fi,c)||"text"](x,i);return!F&&y&&y(),await new Promise((N,J)=>{Ea(N,J,{data:B,headers:Bt.from(x.headers),status:x.status,statusText:x.statusText,config:i,request:v})})}catch(R){throw y&&y(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new W("Network Error",W.ERR_NETWORK,i,v),{cause:R.cause||R}):W.from(R,R&&R.code,i,v)}}),os={http:ku,xhr:ec,fetch:cc};b.forEach(os,(i,t)=>{if(i){try{Object.defineProperty(i,"name",{value:t})}catch{}Object.defineProperty(i,"adapterName",{value:t})}});const Zs=i=>`- ${i}`,dc=i=>b.isFunction(i)||i===null||i===!1,_a={getAdapter:i=>{i=b.isArray(i)?i:[i];const{length:t}=i;let e,n;const r={};for(let s=0;s<t;s++){e=i[s];let o;if(n=e,!dc(e)&&(n=os[(o=String(e)).toLowerCase()],n===void 0))throw new W(`Unknown adapter '${o}'`);if(n)break;r[o||"#"+s]=n}if(!n){const s=Object.entries(r).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=t?s.length>1?`since :
`+s.map(Zs).join(`
`):" "+Zs(s[0]):"as no adapter specified";throw new W("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:os};function mr(i){if(i.cancelToken&&i.cancelToken.throwIfRequested(),i.signal&&i.signal.aborted)throw new Cn(null,i)}function to(i){return mr(i),i.headers=Bt.from(i.headers),i.data=gr.call(i,i.transformRequest),["post","put","patch"].indexOf(i.method)!==-1&&i.headers.setContentType("application/x-www-form-urlencoded",!1),_a.getAdapter(i.adapter||ii.adapter)(i).then(function(n){return mr(i),n.data=gr.call(i,i.transformResponse,n),n.headers=Bt.from(n.headers),n},function(n){return xa(n)||(mr(i),n&&n.response&&(n.response.data=gr.call(i,i.transformResponse,n.response),n.response.headers=Bt.from(n.response.headers))),Promise.reject(n)})}const Ta="1.10.0",Xi={};["object","boolean","number","function","string","symbol"].forEach((i,t)=>{Xi[i]=function(n){return typeof n===i||"a"+(t<1?"n ":" ")+i}});const eo={};Xi.transitional=function(t,e,n){function r(s,o){return"[Axios v"+Ta+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return(s,o,a)=>{if(t===!1)throw new W(r(o," has been removed"+(e?" in "+e:"")),W.ERR_DEPRECATED);return e&&!eo[o]&&(eo[o]=!0,console.warn(r(o," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,o,a):!0}};Xi.spelling=function(t){return(e,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function hc(i,t,e){if(typeof i!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const n=Object.keys(i);let r=n.length;for(;r-- >0;){const s=n[r],o=t[s];if(o){const a=i[s],l=a===void 0||o(a,s,i);if(l!==!0)throw new W("option "+s+" must be "+l,W.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}const ki={assertOptions:hc,validators:Xi},re=ki.validators;let Xe=class{constructor(t){this.defaults=t||{},this.interceptors={request:new $s,response:new $s}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?s&&!String(n.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+s):n.stack=s}catch{}}throw n}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=tn(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:s}=e;n!==void 0&&ki.assertOptions(n,{silentJSONParsing:re.transitional(re.boolean),forcedJSONParsing:re.transitional(re.boolean),clarifyTimeoutError:re.transitional(re.boolean)},!1),r!=null&&(b.isFunction(r)?e.paramsSerializer={serialize:r}:ki.assertOptions(r,{encode:re.function,serialize:re.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),ki.assertOptions(e,{baseUrl:re.spelling("baseURL"),withXsrfToken:re.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let o=s&&b.merge(s.common,s[e.method]);s&&b.forEach(["delete","get","head","post","put","patch","common"],v=>{delete s[v]}),e.headers=Bt.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(e)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let h,p=0,m;if(!l){const v=[to.bind(this),void 0];for(v.unshift.apply(v,a),v.push.apply(v,c),m=v.length,h=Promise.resolve(e);p<m;)h=h.then(v[p++],v[p++]);return h}m=a.length;let k=e;for(p=0;p<m;){const v=a[p++],y=a[p++];try{k=v(k)}catch(C){y.call(this,C);break}}try{h=to.call(this,k)}catch(v){return Promise.reject(v)}for(p=0,m=c.length;p<m;)h=h.then(c[p++],c[p++]);return h}getUri(t){t=tn(this.defaults,t);const e=wa(t.baseURL,t.url,t.allowAbsoluteUrls);return Aa(e,t.params,t.paramsSerializer)}};b.forEach(["delete","get","head","options"],function(t){Xe.prototype[t]=function(e,n){return this.request(tn(n||{},{method:t,url:e,data:(n||{}).data}))}});b.forEach(["post","put","patch"],function(t){function e(n){return function(s,o,a){return this.request(tn(a||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Xe.prototype[t]=e(),Xe.prototype[t+"Form"]=e(!0)});let fc=class Ra{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(s){e=s});const n=this;this.promise.then(r=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](r);n._listeners=null}),this.promise.then=r=>{let s;const o=new Promise(a=>{n.subscribe(a),s=a}).then(r);return o.cancel=function(){n.unsubscribe(s)},o},t(function(s,o,a){n.reason||(n.reason=new Cn(s,o,a),e(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=n=>{t.abort(n)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new Ra(function(r){t=r}),cancel:t}}};function pc(i){return function(e){return i.apply(null,e)}}function gc(i){return b.isObject(i)&&i.isAxiosError===!0}const as={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(as).forEach(([i,t])=>{as[t]=i});function Oa(i){const t=new Xe(i),e=aa(Xe.prototype.request,t);return b.extend(e,Xe.prototype,t,{allOwnKeys:!0}),b.extend(e,t,null,{allOwnKeys:!0}),e.create=function(r){return Oa(tn(i,r))},e}const ft=Oa(ii);ft.Axios=Xe;ft.CanceledError=Cn;ft.CancelToken=fc;ft.isCancel=xa;ft.VERSION=Ta;ft.toFormData=Ji;ft.AxiosError=W;ft.Cancel=ft.CanceledError;ft.all=function(t){return Promise.all(t)};ft.spread=pc;ft.isAxiosError=gc;ft.mergeConfig=tn;ft.AxiosHeaders=Bt;ft.formToJSON=i=>Ca(b.isHTMLForm(i)?new FormData(i):i);ft.getAdapter=_a.getAdapter;ft.HttpStatusCode=as;ft.default=ft;const{Axios:xp,AxiosError:Ep,CanceledError:wp,isCancel:kp,CancelToken:Sp,VERSION:Dp,all:_p,Cancel:Tp,isAxiosError:Rp,spread:Op,toFormData:Fp,AxiosHeaders:Lp,HttpStatusCode:Mp,formToJSON:Ip,getAdapter:Np,mergeConfig:Bp}=ft;window.axios=ft;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var vr=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],gn={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(i){return typeof console<"u"&&console.warn(i)},getWeek:function(i){var t=new Date(i.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var e=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-e.getTime())/864e5-3+(e.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Xn={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(i){var t=i%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},It=function(i,t){return t===void 0&&(t=2),("000"+i).slice(t*-1)},qt=function(i){return i===!0?1:0};function no(i,t){var e;return function(){var n=this,r=arguments;clearTimeout(e),e=setTimeout(function(){return i.apply(n,r)},t)}}var br=function(i){return i instanceof Array?i:[i]};function St(i,t,e){if(e===!0)return i.classList.add(t);i.classList.remove(t)}function Z(i,t,e){var n=window.document.createElement(i);return t=t||"",e=e||"",n.className=t,e!==void 0&&(n.textContent=e),n}function hi(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Fa(i,t){if(t(i))return i;if(i.parentNode)return Fa(i.parentNode,t)}function fi(i,t){var e=Z("div","numInputWrapper"),n=Z("input","numInput "+i),r=Z("span","arrowUp"),s=Z("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),t!==void 0)for(var o in t)n.setAttribute(o,t[o]);return e.appendChild(n),e.appendChild(r),e.appendChild(s),e}function Vt(i){try{if(typeof i.composedPath=="function"){var t=i.composedPath();return t[0]}return i.target}catch{return i.target}}var Ar=function(){},Li=function(i,t,e){return e.months[t?"shorthand":"longhand"][i]},mc={D:Ar,F:function(i,t,e){i.setMonth(e.months.longhand.indexOf(t))},G:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},H:function(i,t){i.setHours(parseFloat(t))},J:function(i,t){i.setDate(parseFloat(t))},K:function(i,t,e){i.setHours(i.getHours()%12+12*qt(new RegExp(e.amPM[1],"i").test(t)))},M:function(i,t,e){i.setMonth(e.months.shorthand.indexOf(t))},S:function(i,t){i.setSeconds(parseFloat(t))},U:function(i,t){return new Date(parseFloat(t)*1e3)},W:function(i,t,e){var n=parseInt(t),r=new Date(i.getFullYear(),0,2+(n-1)*7,0,0,0,0);return r.setDate(r.getDate()-r.getDay()+e.firstDayOfWeek),r},Y:function(i,t){i.setFullYear(parseFloat(t))},Z:function(i,t){return new Date(t)},d:function(i,t){i.setDate(parseFloat(t))},h:function(i,t){i.setHours((i.getHours()>=12?12:0)+parseFloat(t))},i:function(i,t){i.setMinutes(parseFloat(t))},j:function(i,t){i.setDate(parseFloat(t))},l:Ar,m:function(i,t){i.setMonth(parseFloat(t)-1)},n:function(i,t){i.setMonth(parseFloat(t)-1)},s:function(i,t){i.setSeconds(parseFloat(t))},u:function(i,t){return new Date(parseFloat(t))},w:Ar,y:function(i,t){i.setFullYear(2e3+parseFloat(t))}},$e={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Un={Z:function(i){return i.toISOString()},D:function(i,t,e){return t.weekdays.shorthand[Un.w(i,t,e)]},F:function(i,t,e){return Li(Un.n(i,t,e)-1,!1,t)},G:function(i,t,e){return It(Un.h(i,t,e))},H:function(i){return It(i.getHours())},J:function(i,t){return t.ordinal!==void 0?i.getDate()+t.ordinal(i.getDate()):i.getDate()},K:function(i,t){return t.amPM[qt(i.getHours()>11)]},M:function(i,t){return Li(i.getMonth(),!0,t)},S:function(i){return It(i.getSeconds())},U:function(i){return i.getTime()/1e3},W:function(i,t,e){return e.getWeek(i)},Y:function(i){return It(i.getFullYear(),4)},d:function(i){return It(i.getDate())},h:function(i){return i.getHours()%12?i.getHours()%12:12},i:function(i){return It(i.getMinutes())},j:function(i){return i.getDate()},l:function(i,t){return t.weekdays.longhand[i.getDay()]},m:function(i){return It(i.getMonth()+1)},n:function(i){return i.getMonth()+1},s:function(i){return i.getSeconds()},u:function(i){return i.getTime()},w:function(i){return i.getDay()},y:function(i){return String(i.getFullYear()).substring(2)}},La=function(i){var t=i.config,e=t===void 0?gn:t,n=i.l10n,r=n===void 0?Xn:n,s=i.isMobile,o=s===void 0?!1:s;return function(a,l,c){var h=c||r;return e.formatDate!==void 0&&!o?e.formatDate(a,l,h):l.split("").map(function(p,m,k){return Un[p]&&k[m-1]!=="\\"?Un[p](a,h,e):p!=="\\"?p:""}).join("")}},ls=function(i){var t=i.config,e=t===void 0?gn:t,n=i.l10n,r=n===void 0?Xn:n;return function(s,o,a,l){if(!(s!==0&&!s)){var c=l||r,h,p=s;if(s instanceof Date)h=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)h=new Date(s);else if(typeof s=="string"){var m=o||(e||gn).dateFormat,k=String(s).trim();if(k==="today")h=new Date,a=!0;else if(e&&e.parseDate)h=e.parseDate(s,m);else if(/Z$/.test(k)||/GMT$/.test(k))h=new Date(s);else{for(var v=void 0,y=[],C=0,R=0,x="";C<m.length;C++){var F=m[C],B=F==="\\",N=m[C-1]==="\\"||B;if($e[F]&&!N){x+=$e[F];var J=new RegExp(x).exec(s);J&&(v=!0)&&y[F!=="Y"?"push":"unshift"]({fn:mc[F],val:J[++R]})}else B||(x+=".")}h=!e||!e.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),y.forEach(function(O){var P=O.fn,I=O.val;return h=P(h,I,c)||h}),h=v?h:void 0}}if(!(h instanceof Date&&!isNaN(h.getTime()))){e.errorHandler(new Error("Invalid date provided: "+p));return}return a===!0&&h.setHours(0,0,0,0),h}}};function Ht(i,t,e){return e===void 0&&(e=!0),e!==!1?new Date(i.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):i.getTime()-t.getTime()}var vc=function(i,t,e){return i>Math.min(t,e)&&i<Math.max(t,e)},yr=function(i,t,e){return i*3600+t*60+e},bc=function(i){var t=Math.floor(i/3600),e=(i-t*3600)/60;return[t,e,i-t*3600-e*60]},Ac={DAY:864e5};function Cr(i){var t=i.defaultHour,e=i.defaultMinute,n=i.defaultSeconds;if(i.minDate!==void 0){var r=i.minDate.getHours(),s=i.minDate.getMinutes(),o=i.minDate.getSeconds();t<r&&(t=r),t===r&&e<s&&(e=s),t===r&&e===s&&n<o&&(n=i.minDate.getSeconds())}if(i.maxDate!==void 0){var a=i.maxDate.getHours(),l=i.maxDate.getMinutes();t=Math.min(t,a),t===a&&(e=Math.min(l,e)),t===a&&e===l&&(n=i.maxDate.getSeconds())}return{hours:t,minutes:e,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(!i)throw TypeError("Cannot convert undefined or null to object");for(var n=function(a){a&&Object.keys(a).forEach(function(l){return i[l]=a[l]})},r=0,s=t;r<s.length;r++){var o=s[r];n(o)}return i});var yt=function(){return yt=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=t[r])}return i},yt.apply(this,arguments)},io=function(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;for(var n=Array(i),r=0,t=0;t<e;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,r++)n[r]=s[o];return n},yc=300;function Cc(i,t){var e={config:yt(yt({},gn),gt.defaultConfig),l10n:Xn};e.parseDate=ls({config:e.config,l10n:e.l10n}),e._handlers=[],e.pluginElements=[],e.loadedPlugins=[],e._bind=y,e._setHoursFromDate=m,e._positionCalendar=ue,e.changeMonth=ln,e.changeYear=ee,e.clear=pt,e.close=ai,e.onMouseOver=Ie,e._createElement=Z,e.createDay=J,e.destroy=vt,e.isEnabled=Kt,e.jumpToDate=x,e.updateValue=Gt,e.open=Dn,e.redraw=Tn,e.set=xe,e.setDate=ui,e.toggle=Jt;function n(){e.utils={getDaysInMonth:function(u,d){return u===void 0&&(u=e.currentMonth),d===void 0&&(d=e.currentYear),u===1&&(d%4===0&&d%100!==0||d%400===0)?29:e.l10n.daysInMonth[u]}}}function r(){e.element=e.input=i,e.isOpen=!1,_n(),le(),ci(),Fn(),n(),e.isMobile||N(),R(),(e.selectedDates.length||e.config.noCalendar)&&(e.config.enableTime&&m(e.config.noCalendar?e.latestSelectedDateObj:void 0),Gt(!1)),a();var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!e.isMobile&&u&&ue(),tt("onReady")}function s(){var u;return((u=e.calendarContainer)===null||u===void 0?void 0:u.getRootNode()).activeElement||document.activeElement}function o(u){return u.bind(e)}function a(){var u=e.config;u.weekNumbers===!1&&u.showMonths===1||u.noCalendar!==!0&&window.requestAnimationFrame(function(){if(e.calendarContainer!==void 0&&(e.calendarContainer.style.visibility="hidden",e.calendarContainer.style.display="block"),e.daysContainer!==void 0){var d=(e.days.offsetWidth+1)*u.showMonths;e.daysContainer.style.width=d+"px",e.calendarContainer.style.width=d+(e.weekWrapper!==void 0?e.weekWrapper.offsetWidth:0)+"px",e.calendarContainer.style.removeProperty("visibility"),e.calendarContainer.style.removeProperty("display")}})}function l(u){if(e.selectedDates.length===0){var d=e.config.minDate===void 0||Ht(new Date,e.config.minDate)>=0?new Date:new Date(e.config.minDate.getTime()),g=Cr(e.config);d.setHours(g.hours,g.minutes,g.seconds,d.getMilliseconds()),e.selectedDates=[d],e.latestSelectedDateObj=d}u!==void 0&&u.type!=="blur"&&hr(u);var A=e._input.value;p(),Gt(),e._input.value!==A&&e._debouncedChange()}function c(u,d){return u%12+12*qt(d===e.l10n.amPM[1])}function h(u){switch(u%24){case 0:case 12:return 12;default:return u%12}}function p(){if(!(e.hourElement===void 0||e.minuteElement===void 0)){var u=(parseInt(e.hourElement.value.slice(-2),10)||0)%24,d=(parseInt(e.minuteElement.value,10)||0)%60,g=e.secondElement!==void 0?(parseInt(e.secondElement.value,10)||0)%60:0;e.amPM!==void 0&&(u=c(u,e.amPM.textContent));var A=e.config.minTime!==void 0||e.config.minDate&&e.minDateHasTime&&e.latestSelectedDateObj&&Ht(e.latestSelectedDateObj,e.config.minDate,!0)===0,E=e.config.maxTime!==void 0||e.config.maxDate&&e.maxDateHasTime&&e.latestSelectedDateObj&&Ht(e.latestSelectedDateObj,e.config.maxDate,!0)===0;if(e.config.maxTime!==void 0&&e.config.minTime!==void 0&&e.config.minTime>e.config.maxTime){var S=yr(e.config.minTime.getHours(),e.config.minTime.getMinutes(),e.config.minTime.getSeconds()),V=yr(e.config.maxTime.getHours(),e.config.maxTime.getMinutes(),e.config.maxTime.getSeconds()),D=yr(u,d,g);if(D>V&&D<S){var H=bc(S);u=H[0],d=H[1],g=H[2]}}else{if(E){var _=e.config.maxTime!==void 0?e.config.maxTime:e.config.maxDate;u=Math.min(u,_.getHours()),u===_.getHours()&&(d=Math.min(d,_.getMinutes())),d===_.getMinutes()&&(g=Math.min(g,_.getSeconds()))}if(A){var M=e.config.minTime!==void 0?e.config.minTime:e.config.minDate;u=Math.max(u,M.getHours()),u===M.getHours()&&d<M.getMinutes()&&(d=M.getMinutes()),d===M.getMinutes()&&(g=Math.max(g,M.getSeconds()))}}k(u,d,g)}}function m(u){var d=u||e.latestSelectedDateObj;d&&d instanceof Date&&k(d.getHours(),d.getMinutes(),d.getSeconds())}function k(u,d,g){e.latestSelectedDateObj!==void 0&&e.latestSelectedDateObj.setHours(u%24,d,g||0,0),!(!e.hourElement||!e.minuteElement||e.isMobile)&&(e.hourElement.value=It(e.config.time_24hr?u:(12+u)%12+12*qt(u%12===0)),e.minuteElement.value=It(d),e.amPM!==void 0&&(e.amPM.textContent=e.l10n.amPM[qt(u>=12)]),e.secondElement!==void 0&&(e.secondElement.value=It(g)))}function v(u){var d=Vt(u),g=parseInt(d.value)+(u.delta||0);(g/1e3>1||u.key==="Enter"&&!/[^\d]/.test(g.toString()))&&ee(g)}function y(u,d,g,A){if(d instanceof Array)return d.forEach(function(E){return y(u,E,g,A)});if(u instanceof Array)return u.forEach(function(E){return y(E,d,g,A)});u.addEventListener(d,g,A),e._handlers.push({remove:function(){return u.removeEventListener(d,g,A)}})}function C(){tt("onChange")}function R(){if(e.config.wrap&&["open","close","toggle","clear"].forEach(function(g){Array.prototype.forEach.call(e.element.querySelectorAll("[data-"+g+"]"),function(A){return y(A,"click",e[g])})}),e.isMobile){dn();return}var u=no(ye,50);if(e._debouncedChange=no(C,yc),e.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&y(e.daysContainer,"mouseover",function(g){e.config.mode==="range"&&Ie(Vt(g))}),y(e._input,"keydown",Sn),e.calendarContainer!==void 0&&y(e.calendarContainer,"keydown",Sn),!e.config.inline&&!e.config.static&&y(window,"resize",u),window.ontouchstart!==void 0?y(window.document,"touchstart",rt):y(window.document,"mousedown",rt),y(window.document,"focus",rt,{capture:!0}),e.config.clickOpens===!0&&(y(e._input,"focus",e.open),y(e._input,"click",e.open)),e.daysContainer!==void 0&&(y(e.monthNav,"click",je),y(e.monthNav,["keyup","increment"],v),y(e.daysContainer,"click",Ce)),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0){var d=function(g){return Vt(g).select()};y(e.timeContainer,["increment"],l),y(e.timeContainer,"blur",l,{capture:!0}),y(e.timeContainer,"click",F),y([e.hourElement,e.minuteElement],["focus","click"],d),e.secondElement!==void 0&&y(e.secondElement,"focus",function(){return e.secondElement&&e.secondElement.select()}),e.amPM!==void 0&&y(e.amPM,"click",function(g){l(g)})}e.config.allowInput&&y(e._input,"blur",kn)}function x(u,d){var g=u!==void 0?e.parseDate(u):e.latestSelectedDateObj||(e.config.minDate&&e.config.minDate>e.now?e.config.minDate:e.config.maxDate&&e.config.maxDate<e.now?e.config.maxDate:e.now),A=e.currentYear,E=e.currentMonth;try{g!==void 0&&(e.currentYear=g.getFullYear(),e.currentMonth=g.getMonth())}catch(S){S.message="Invalid date supplied: "+g,e.config.errorHandler(S)}d&&e.currentYear!==A&&(tt("onYearChange"),wt()),d&&(e.currentYear!==A||e.currentMonth!==E)&&tt("onMonthChange"),e.redraw()}function F(u){var d=Vt(u);~d.className.indexOf("arrow")&&B(u,d.classList.contains("arrowUp")?1:-1)}function B(u,d,g){var A=u&&Vt(u),E=g||A&&A.parentNode&&A.parentNode.firstChild,S=Pe("increment");S.delta=d,E&&E.dispatchEvent(S)}function N(){var u=window.document.createDocumentFragment();if(e.calendarContainer=Z("div","flatpickr-calendar"),e.calendarContainer.tabIndex=-1,!e.config.noCalendar){if(u.appendChild(lr()),e.innerContainer=Z("div","flatpickr-innerContainer"),e.config.weekNumbers){var d=cr(),g=d.weekWrapper,A=d.weekNumbers;e.innerContainer.appendChild(g),e.weekNumbers=A,e.weekWrapper=g}e.rContainer=Z("div","flatpickr-rContainer"),e.rContainer.appendChild(oi()),e.daysContainer||(e.daysContainer=Z("div","flatpickr-days"),e.daysContainer.tabIndex=-1),it(),e.rContainer.appendChild(e.daysContainer),e.innerContainer.appendChild(e.rContainer),u.appendChild(e.innerContainer)}e.config.enableTime&&u.appendChild(ur()),St(e.calendarContainer,"rangeMode",e.config.mode==="range"),St(e.calendarContainer,"animate",e.config.animate===!0),St(e.calendarContainer,"multiMonth",e.config.showMonths>1),e.calendarContainer.appendChild(u);var E=e.config.appendTo!==void 0&&e.config.appendTo.nodeType!==void 0;if((e.config.inline||e.config.static)&&(e.calendarContainer.classList.add(e.config.inline?"inline":"static"),e.config.inline&&(!E&&e.element.parentNode?e.element.parentNode.insertBefore(e.calendarContainer,e._input.nextSibling):e.config.appendTo!==void 0&&e.config.appendTo.appendChild(e.calendarContainer)),e.config.static)){var S=Z("div","flatpickr-wrapper");e.element.parentNode&&e.element.parentNode.insertBefore(S,e.element),S.appendChild(e.element),e.altInput&&S.appendChild(e.altInput),S.appendChild(e.calendarContainer)}!e.config.static&&!e.config.inline&&(e.config.appendTo!==void 0?e.config.appendTo:window.document.body).appendChild(e.calendarContainer)}function J(u,d,g,A){var E=Kt(d,!0),S=Z("span",u,d.getDate().toString());return S.dateObj=d,S.$i=A,S.setAttribute("aria-label",e.formatDate(d,e.config.ariaDateFormat)),u.indexOf("hidden")===-1&&Ht(d,e.now)===0&&(e.todayDateElem=S,S.classList.add("today"),S.setAttribute("aria-current","date")),E?(S.tabIndex=-1,Ve(d)&&(S.classList.add("selected"),e.selectedDateElem=S,e.config.mode==="range"&&(St(S,"startRange",e.selectedDates[0]&&Ht(d,e.selectedDates[0],!0)===0),St(S,"endRange",e.selectedDates[1]&&Ht(d,e.selectedDates[1],!0)===0),u==="nextMonthDay"&&S.classList.add("inRange")))):S.classList.add("flatpickr-disabled"),e.config.mode==="range"&&dr(d)&&!Ve(d)&&S.classList.add("inRange"),e.weekNumbers&&e.config.showMonths===1&&u!=="prevMonthDay"&&A%7===6&&e.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+e.config.getWeek(d)+"</span>"),tt("onDayCreate",S),S}function O(u){u.focus(),e.config.mode==="range"&&Ie(u)}function P(u){for(var d=u>0?0:e.config.showMonths-1,g=u>0?e.config.showMonths:-1,A=d;A!=g;A+=u)for(var E=e.daysContainer.children[A],S=u>0?0:E.children.length-1,V=u>0?E.children.length:-1,D=S;D!=V;D+=u){var H=E.children[D];if(H.className.indexOf("hidden")===-1&&Kt(H.dateObj))return H}}function I(u,d){for(var g=u.className.indexOf("Month")===-1?u.dateObj.getMonth():e.currentMonth,A=d>0?e.config.showMonths:-1,E=d>0?1:-1,S=g-e.currentMonth;S!=A;S+=E)for(var V=e.daysContainer.children[S],D=g-e.currentMonth===S?u.$i+d:d<0?V.children.length-1:0,H=V.children.length,_=D;_>=0&&_<H&&_!=(d>0?H:-1);_+=E){var M=V.children[_];if(M.className.indexOf("hidden")===-1&&Kt(M.dateObj)&&Math.abs(u.$i-_)>=Math.abs(d))return O(M)}e.changeMonth(E),st(P(E),0)}function st(u,d){var g=s(),A=Me(g||document.body),E=u!==void 0?u:A?g:e.selectedDateElem!==void 0&&Me(e.selectedDateElem)?e.selectedDateElem:e.todayDateElem!==void 0&&Me(e.todayDateElem)?e.todayDateElem:P(d>0?1:-1);E===void 0?e._input.focus():A?I(E,d):O(E)}function G(u,d){for(var g=(new Date(u,d,1).getDay()-e.l10n.firstDayOfWeek+7)%7,A=e.utils.getDaysInMonth((d-1+12)%12,u),E=e.utils.getDaysInMonth(d,u),S=window.document.createDocumentFragment(),V=e.config.showMonths>1,D=V?"prevMonthDay hidden":"prevMonthDay",H=V?"nextMonthDay hidden":"nextMonthDay",_=A+1-g,M=0;_<=A;_++,M++)S.appendChild(J("flatpickr-day "+D,new Date(u,d-1,_),_,M));for(_=1;_<=E;_++,M++)S.appendChild(J("flatpickr-day",new Date(u,d,_),_,M));for(var Q=E+1;Q<=42-g&&(e.config.showMonths===1||M%7!==0);Q++,M++)S.appendChild(J("flatpickr-day "+H,new Date(u,d+1,Q%E),Q,M));var Pt=Z("div","dayContainer");return Pt.appendChild(S),Pt}function it(){if(e.daysContainer!==void 0){hi(e.daysContainer),e.weekNumbers&&hi(e.weekNumbers);for(var u=document.createDocumentFragment(),d=0;d<e.config.showMonths;d++){var g=new Date(e.currentYear,e.currentMonth,1);g.setMonth(e.currentMonth+d),u.appendChild(G(g.getFullYear(),g.getMonth()))}e.daysContainer.appendChild(u),e.days=e.daysContainer.firstChild,e.config.mode==="range"&&e.selectedDates.length===1&&Ie()}}function wt(){if(!(e.config.showMonths>1||e.config.monthSelectorType!=="dropdown")){var u=function(A){return e.config.minDate!==void 0&&e.currentYear===e.config.minDate.getFullYear()&&A<e.config.minDate.getMonth()?!1:!(e.config.maxDate!==void 0&&e.currentYear===e.config.maxDate.getFullYear()&&A>e.config.maxDate.getMonth())};e.monthsDropdownContainer.tabIndex=-1,e.monthsDropdownContainer.innerHTML="";for(var d=0;d<12;d++)if(u(d)){var g=Z("option","flatpickr-monthDropdown-month");g.value=new Date(e.currentYear,d).getMonth().toString(),g.textContent=Li(d,e.config.shorthandCurrentMonth,e.l10n),g.tabIndex=-1,e.currentMonth===d&&(g.selected=!0),e.monthsDropdownContainer.appendChild(g)}}}function Le(){var u=Z("div","flatpickr-month"),d=window.document.createDocumentFragment(),g;e.config.showMonths>1||e.config.monthSelectorType==="static"?g=Z("span","cur-month"):(e.monthsDropdownContainer=Z("select","flatpickr-monthDropdown-months"),e.monthsDropdownContainer.setAttribute("aria-label",e.l10n.monthAriaLabel),y(e.monthsDropdownContainer,"change",function(V){var D=Vt(V),H=parseInt(D.value,10);e.changeMonth(H-e.currentMonth),tt("onMonthChange")}),wt(),g=e.monthsDropdownContainer);var A=fi("cur-year",{tabindex:"-1"}),E=A.getElementsByTagName("input")[0];E.setAttribute("aria-label",e.l10n.yearAriaLabel),e.config.minDate&&E.setAttribute("min",e.config.minDate.getFullYear().toString()),e.config.maxDate&&(E.setAttribute("max",e.config.maxDate.getFullYear().toString()),E.disabled=!!e.config.minDate&&e.config.minDate.getFullYear()===e.config.maxDate.getFullYear());var S=Z("div","flatpickr-current-month");return S.appendChild(g),S.appendChild(A),d.appendChild(S),u.appendChild(d),{container:u,yearElement:E,monthElement:g}}function be(){hi(e.monthNav),e.monthNav.appendChild(e.prevMonthNav),e.config.showMonths&&(e.yearElements=[],e.monthElements=[]);for(var u=e.config.showMonths;u--;){var d=Le();e.yearElements.push(d.yearElement),e.monthElements.push(d.monthElement),e.monthNav.appendChild(d.container)}e.monthNav.appendChild(e.nextMonthNav)}function lr(){return e.monthNav=Z("div","flatpickr-months"),e.yearElements=[],e.monthElements=[],e.prevMonthNav=Z("span","flatpickr-prev-month"),e.prevMonthNav.innerHTML=e.config.prevArrow,e.nextMonthNav=Z("span","flatpickr-next-month"),e.nextMonthNav.innerHTML=e.config.nextArrow,be(),Object.defineProperty(e,"_hidePrevMonthArrow",{get:function(){return e.__hidePrevMonthArrow},set:function(u){e.__hidePrevMonthArrow!==u&&(St(e.prevMonthNav,"flatpickr-disabled",u),e.__hidePrevMonthArrow=u)}}),Object.defineProperty(e,"_hideNextMonthArrow",{get:function(){return e.__hideNextMonthArrow},set:function(u){e.__hideNextMonthArrow!==u&&(St(e.nextMonthNav,"flatpickr-disabled",u),e.__hideNextMonthArrow=u)}}),e.currentYearElement=e.yearElements[0],ce(),e.monthNav}function ur(){e.calendarContainer.classList.add("hasTime"),e.config.noCalendar&&e.calendarContainer.classList.add("noCalendar");var u=Cr(e.config);e.timeContainer=Z("div","flatpickr-time"),e.timeContainer.tabIndex=-1;var d=Z("span","flatpickr-time-separator",":"),g=fi("flatpickr-hour",{"aria-label":e.l10n.hourAriaLabel});e.hourElement=g.getElementsByTagName("input")[0];var A=fi("flatpickr-minute",{"aria-label":e.l10n.minuteAriaLabel});if(e.minuteElement=A.getElementsByTagName("input")[0],e.hourElement.tabIndex=e.minuteElement.tabIndex=-1,e.hourElement.value=It(e.latestSelectedDateObj?e.latestSelectedDateObj.getHours():e.config.time_24hr?u.hours:h(u.hours)),e.minuteElement.value=It(e.latestSelectedDateObj?e.latestSelectedDateObj.getMinutes():u.minutes),e.hourElement.setAttribute("step",e.config.hourIncrement.toString()),e.minuteElement.setAttribute("step",e.config.minuteIncrement.toString()),e.hourElement.setAttribute("min",e.config.time_24hr?"0":"1"),e.hourElement.setAttribute("max",e.config.time_24hr?"23":"12"),e.hourElement.setAttribute("maxlength","2"),e.minuteElement.setAttribute("min","0"),e.minuteElement.setAttribute("max","59"),e.minuteElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(g),e.timeContainer.appendChild(d),e.timeContainer.appendChild(A),e.config.time_24hr&&e.timeContainer.classList.add("time24hr"),e.config.enableSeconds){e.timeContainer.classList.add("hasSeconds");var E=fi("flatpickr-second");e.secondElement=E.getElementsByTagName("input")[0],e.secondElement.value=It(e.latestSelectedDateObj?e.latestSelectedDateObj.getSeconds():u.seconds),e.secondElement.setAttribute("step",e.minuteElement.getAttribute("step")),e.secondElement.setAttribute("min","0"),e.secondElement.setAttribute("max","59"),e.secondElement.setAttribute("maxlength","2"),e.timeContainer.appendChild(Z("span","flatpickr-time-separator",":")),e.timeContainer.appendChild(E)}return e.config.time_24hr||(e.amPM=Z("span","flatpickr-am-pm",e.l10n.amPM[qt((e.latestSelectedDateObj?e.hourElement.value:e.config.defaultHour)>11)]),e.amPM.title=e.l10n.toggleTitle,e.amPM.tabIndex=-1,e.timeContainer.appendChild(e.amPM)),e.timeContainer}function oi(){e.weekdayContainer?hi(e.weekdayContainer):e.weekdayContainer=Z("div","flatpickr-weekdays");for(var u=e.config.showMonths;u--;){var d=Z("div","flatpickr-weekdaycontainer");e.weekdayContainer.appendChild(d)}return wn(),e.weekdayContainer}function wn(){if(e.weekdayContainer){var u=e.l10n.firstDayOfWeek,d=io(e.l10n.weekdays.shorthand);u>0&&u<d.length&&(d=io(d.splice(u,d.length),d.splice(0,u)));for(var g=e.config.showMonths;g--;)e.weekdayContainer.children[g].innerHTML=`
      <span class='flatpickr-weekday'>
        `+d.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function cr(){e.calendarContainer.classList.add("hasWeeks");var u=Z("div","flatpickr-weekwrapper");u.appendChild(Z("span","flatpickr-weekday",e.l10n.weekAbbreviation));var d=Z("div","flatpickr-weeks");return u.appendChild(d),{weekWrapper:u,weekNumbers:d}}function ln(u,d){d===void 0&&(d=!0);var g=d?u:u-e.currentMonth;g<0&&e._hidePrevMonthArrow===!0||g>0&&e._hideNextMonthArrow===!0||(e.currentMonth+=g,(e.currentMonth<0||e.currentMonth>11)&&(e.currentYear+=e.currentMonth>11?1:-1,e.currentMonth=(e.currentMonth+12)%12,tt("onYearChange"),wt()),it(),tt("onMonthChange"),ce())}function pt(u,d){if(u===void 0&&(u=!0),d===void 0&&(d=!0),e.input.value="",e.altInput!==void 0&&(e.altInput.value=""),e.mobileInput!==void 0&&(e.mobileInput.value=""),e.selectedDates=[],e.latestSelectedDateObj=void 0,d===!0&&(e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth()),e.config.enableTime===!0){var g=Cr(e.config),A=g.hours,E=g.minutes,S=g.seconds;k(A,E,S)}e.redraw(),u&&tt("onChange")}function ai(){e.isOpen=!1,e.isMobile||(e.calendarContainer!==void 0&&e.calendarContainer.classList.remove("open"),e._input!==void 0&&e._input.classList.remove("active")),tt("onClose")}function vt(){e.config!==void 0&&tt("onDestroy");for(var u=e._handlers.length;u--;)e._handlers[u].remove();if(e._handlers=[],e.mobileInput)e.mobileInput.parentNode&&e.mobileInput.parentNode.removeChild(e.mobileInput),e.mobileInput=void 0;else if(e.calendarContainer&&e.calendarContainer.parentNode)if(e.config.static&&e.calendarContainer.parentNode){var d=e.calendarContainer.parentNode;if(d.lastChild&&d.removeChild(d.lastChild),d.parentNode){for(;d.firstChild;)d.parentNode.insertBefore(d.firstChild,d);d.parentNode.removeChild(d)}}else e.calendarContainer.parentNode.removeChild(e.calendarContainer);e.altInput&&(e.input.type="text",e.altInput.parentNode&&e.altInput.parentNode.removeChild(e.altInput),delete e.altInput),e.input&&(e.input.type=e.input._type,e.input.classList.remove("flatpickr-input"),e.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(g){try{delete e[g]}catch{}})}function Ae(u){return e.calendarContainer.contains(u)}function rt(u){if(e.isOpen&&!e.config.inline){var d=Vt(u),g=Ae(d),A=d===e.input||d===e.altInput||e.element.contains(d)||u.path&&u.path.indexOf&&(~u.path.indexOf(e.input)||~u.path.indexOf(e.altInput)),E=!A&&!g&&!Ae(u.relatedTarget),S=!e.config.ignoredFocusElements.some(function(V){return V.contains(d)});E&&S&&(e.config.allowInput&&e.setDate(e._input.value,!1,e.config.altInput?e.config.altFormat:e.config.dateFormat),e.timeContainer!==void 0&&e.minuteElement!==void 0&&e.hourElement!==void 0&&e.input.value!==""&&e.input.value!==void 0&&l(),e.close(),e.config&&e.config.mode==="range"&&e.selectedDates.length===1&&e.clear(!1))}}function ee(u){if(!(!u||e.config.minDate&&u<e.config.minDate.getFullYear()||e.config.maxDate&&u>e.config.maxDate.getFullYear())){var d=u,g=e.currentYear!==d;e.currentYear=d||e.currentYear,e.config.maxDate&&e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth=Math.min(e.config.maxDate.getMonth(),e.currentMonth):e.config.minDate&&e.currentYear===e.config.minDate.getFullYear()&&(e.currentMonth=Math.max(e.config.minDate.getMonth(),e.currentMonth)),g&&(e.redraw(),tt("onYearChange"),wt())}}function Kt(u,d){var g;d===void 0&&(d=!0);var A=e.parseDate(u,void 0,d);if(e.config.minDate&&A&&Ht(A,e.config.minDate,d!==void 0?d:!e.minDateHasTime)<0||e.config.maxDate&&A&&Ht(A,e.config.maxDate,d!==void 0?d:!e.maxDateHasTime)>0)return!1;if(!e.config.enable&&e.config.disable.length===0)return!0;if(A===void 0)return!1;for(var E=!!e.config.enable,S=(g=e.config.enable)!==null&&g!==void 0?g:e.config.disable,V=0,D=void 0;V<S.length;V++){if(D=S[V],typeof D=="function"&&D(A))return E;if(D instanceof Date&&A!==void 0&&D.getTime()===A.getTime())return E;if(typeof D=="string"){var H=e.parseDate(D,void 0,!0);return H&&H.getTime()===A.getTime()?E:!E}else if(typeof D=="object"&&A!==void 0&&D.from&&D.to&&A.getTime()>=D.from.getTime()&&A.getTime()<=D.to.getTime())return E}return!E}function Me(u){return e.daysContainer!==void 0?u.className.indexOf("hidden")===-1&&u.className.indexOf("flatpickr-disabled")===-1&&e.daysContainer.contains(u):!1}function kn(u){var d=u.target===e._input,g=e._input.value.trimEnd()!==Ee();d&&g&&!(u.relatedTarget&&Ae(u.relatedTarget))&&e.setDate(e._input.value,!0,u.target===e.altInput?e.config.altFormat:e.config.dateFormat)}function Sn(u){var d=Vt(u),g=e.config.wrap?i.contains(d):d===e._input,A=e.config.allowInput,E=e.isOpen&&(!A||!g),S=e.config.inline&&g&&!A;if(u.keyCode===13&&g){if(A)return e.setDate(e._input.value,!0,d===e.altInput?e.config.altFormat:e.config.dateFormat),e.close(),d.blur();e.open()}else if(Ae(d)||E||S){var V=!!e.timeContainer&&e.timeContainer.contains(d);switch(u.keyCode){case 13:V?(u.preventDefault(),l(),Ne()):Ce(u);break;case 27:u.preventDefault(),Ne();break;case 8:case 46:g&&!e.config.allowInput&&(u.preventDefault(),e.clear());break;case 37:case 39:if(!V&&!g){u.preventDefault();var D=s();if(e.daysContainer!==void 0&&(A===!1||D&&Me(D))){var H=u.keyCode===39?1:-1;u.ctrlKey?(u.stopPropagation(),ln(H),st(P(1),0)):st(void 0,H)}}else e.hourElement&&e.hourElement.focus();break;case 38:case 40:u.preventDefault();var _=u.keyCode===40?1:-1;e.daysContainer&&d.$i!==void 0||d===e.input||d===e.altInput?u.ctrlKey?(u.stopPropagation(),ee(e.currentYear-_),st(P(1),0)):V||st(void 0,_*7):d===e.currentYearElement?ee(e.currentYear-_):e.config.enableTime&&(!V&&e.hourElement&&e.hourElement.focus(),l(u),e._debouncedChange());break;case 9:if(V){var M=[e.hourElement,e.minuteElement,e.secondElement,e.amPM].concat(e.pluginElements).filter(function(at){return at}),Q=M.indexOf(d);if(Q!==-1){var Pt=M[Q+(u.shiftKey?-1:1)];u.preventDefault(),(Pt||e._input).focus()}}else!e.config.noCalendar&&e.daysContainer&&e.daysContainer.contains(d)&&u.shiftKey&&(u.preventDefault(),e._input.focus());break}}if(e.amPM!==void 0&&d===e.amPM)switch(u.key){case e.l10n.amPM[0].charAt(0):case e.l10n.amPM[0].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[0],p(),Gt();break;case e.l10n.amPM[1].charAt(0):case e.l10n.amPM[1].charAt(0).toLowerCase():e.amPM.textContent=e.l10n.amPM[1],p(),Gt();break}(g||Ae(d))&&tt("onKeyDown",u)}function Ie(u,d){if(d===void 0&&(d="flatpickr-day"),!(e.selectedDates.length!==1||u&&(!u.classList.contains(d)||u.classList.contains("flatpickr-disabled")))){for(var g=u?u.dateObj.getTime():e.days.firstElementChild.dateObj.getTime(),A=e.parseDate(e.selectedDates[0],void 0,!0).getTime(),E=Math.min(g,e.selectedDates[0].getTime()),S=Math.max(g,e.selectedDates[0].getTime()),V=!1,D=0,H=0,_=E;_<S;_+=Ac.DAY)Kt(new Date(_),!0)||(V=V||_>E&&_<S,_<A&&(!D||_>D)?D=_:_>A&&(!H||_<H)&&(H=_));var M=Array.from(e.rContainer.querySelectorAll("*:nth-child(-n+"+e.config.showMonths+") > ."+d));M.forEach(function(Q){var Pt=Q.dateObj,at=Pt.getTime(),we=D>0&&at<D||H>0&&at>H;if(we){Q.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(de){Q.classList.remove(de)});return}else if(V&&!we)return;["startRange","inRange","endRange","notAllowed"].forEach(function(de){Q.classList.remove(de)}),u!==void 0&&(u.classList.add(g<=e.selectedDates[0].getTime()?"startRange":"endRange"),A<g&&at===A?Q.classList.add("startRange"):A>g&&at===A&&Q.classList.add("endRange"),at>=D&&(H===0||at<=H)&&vc(at,A,g)&&Q.classList.add("inRange"))})}}function ye(){e.isOpen&&!e.config.static&&!e.config.inline&&ue()}function Dn(u,d){if(d===void 0&&(d=e._positionElement),e.isMobile===!0){if(u){u.preventDefault();var g=Vt(u);g&&g.blur()}e.mobileInput!==void 0&&(e.mobileInput.focus(),e.mobileInput.click()),tt("onOpen");return}else if(e._input.disabled||e.config.inline)return;var A=e.isOpen;e.isOpen=!0,A||(e.calendarContainer.classList.add("open"),e._input.classList.add("active"),tt("onOpen"),ue(d)),e.config.enableTime===!0&&e.config.noCalendar===!0&&e.config.allowInput===!1&&(u===void 0||!e.timeContainer.contains(u.relatedTarget))&&setTimeout(function(){return e.hourElement.select()},50)}function ne(u){return function(d){var g=e.config["_"+u+"Date"]=e.parseDate(d,e.config.dateFormat),A=e.config["_"+(u==="min"?"max":"min")+"Date"];g!==void 0&&(e[u==="min"?"minDateHasTime":"maxDateHasTime"]=g.getHours()>0||g.getMinutes()>0||g.getSeconds()>0),e.selectedDates&&(e.selectedDates=e.selectedDates.filter(function(E){return Kt(E)}),!e.selectedDates.length&&u==="min"&&m(g),Gt()),e.daysContainer&&(Tn(),g!==void 0?e.currentYearElement[u]=g.getFullYear().toString():e.currentYearElement.removeAttribute(u),e.currentYearElement.disabled=!!A&&g!==void 0&&A.getFullYear()===g.getFullYear())}}function _n(){var u=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],d=yt(yt({},JSON.parse(JSON.stringify(i.dataset||{}))),t),g={};e.config.parseDate=d.parseDate,e.config.formatDate=d.formatDate,Object.defineProperty(e.config,"enable",{get:function(){return e.config._enable},set:function(M){e.config._enable=On(M)}}),Object.defineProperty(e.config,"disable",{get:function(){return e.config._disable},set:function(M){e.config._disable=On(M)}});var A=d.mode==="time";if(!d.dateFormat&&(d.enableTime||A)){var E=gt.defaultConfig.dateFormat||gn.dateFormat;g.dateFormat=d.noCalendar||A?"H:i"+(d.enableSeconds?":S":""):E+" H:i"+(d.enableSeconds?":S":"")}if(d.altInput&&(d.enableTime||A)&&!d.altFormat){var S=gt.defaultConfig.altFormat||gn.altFormat;g.altFormat=d.noCalendar||A?"h:i"+(d.enableSeconds?":S K":" K"):S+(" h:i"+(d.enableSeconds?":S":"")+" K")}Object.defineProperty(e.config,"minDate",{get:function(){return e.config._minDate},set:ne("min")}),Object.defineProperty(e.config,"maxDate",{get:function(){return e.config._maxDate},set:ne("max")});var V=function(M){return function(Q){e.config[M==="min"?"_minTime":"_maxTime"]=e.parseDate(Q,"H:i:S")}};Object.defineProperty(e.config,"minTime",{get:function(){return e.config._minTime},set:V("min")}),Object.defineProperty(e.config,"maxTime",{get:function(){return e.config._maxTime},set:V("max")}),d.mode==="time"&&(e.config.noCalendar=!0,e.config.enableTime=!0),Object.assign(e.config,g,d);for(var D=0;D<u.length;D++)e.config[u[D]]=e.config[u[D]]===!0||e.config[u[D]]==="true";vr.filter(function(M){return e.config[M]!==void 0}).forEach(function(M){e.config[M]=br(e.config[M]||[]).map(o)}),e.isMobile=!e.config.disableMobile&&!e.config.inline&&e.config.mode==="single"&&!e.config.disable.length&&!e.config.enable&&!e.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var D=0;D<e.config.plugins.length;D++){var H=e.config.plugins[D](e)||{};for(var _ in H)vr.indexOf(_)>-1?e.config[_]=br(H[_]).map(o).concat(e.config[_]):typeof d[_]>"u"&&(e.config[_]=H[_])}d.altInputClass||(e.config.altInputClass=un().className+" "+e.config.altInputClass),tt("onParseConfig")}function un(){return e.config.wrap?i.querySelector("[data-input]"):i}function le(){typeof e.config.locale!="object"&&typeof gt.l10ns[e.config.locale]>"u"&&e.config.errorHandler(new Error("flatpickr: invalid locale "+e.config.locale)),e.l10n=yt(yt({},gt.l10ns.default),typeof e.config.locale=="object"?e.config.locale:e.config.locale!=="default"?gt.l10ns[e.config.locale]:void 0),$e.D="("+e.l10n.weekdays.shorthand.join("|")+")",$e.l="("+e.l10n.weekdays.longhand.join("|")+")",$e.M="("+e.l10n.months.shorthand.join("|")+")",$e.F="("+e.l10n.months.longhand.join("|")+")",$e.K="("+e.l10n.amPM[0]+"|"+e.l10n.amPM[1]+"|"+e.l10n.amPM[0].toLowerCase()+"|"+e.l10n.amPM[1].toLowerCase()+")";var u=yt(yt({},t),JSON.parse(JSON.stringify(i.dataset||{})));u.time_24hr===void 0&&gt.defaultConfig.time_24hr===void 0&&(e.config.time_24hr=e.l10n.time_24hr),e.formatDate=La(e),e.parseDate=ls({config:e.config,l10n:e.l10n})}function ue(u){if(typeof e.config.position=="function")return void e.config.position(e,u);if(e.calendarContainer!==void 0){tt("onPreCalendarPosition");var d=u||e._positionElement,g=Array.prototype.reduce.call(e.calendarContainer.children,function(z,ct){return z+ct.offsetHeight},0),A=e.calendarContainer.offsetWidth,E=e.config.position.split(" "),S=E[0],V=E.length>1?E[1]:null,D=d.getBoundingClientRect(),H=window.innerHeight-D.bottom,_=S==="above"||S!=="below"&&H<g&&D.top>g,M=window.pageYOffset+D.top+(_?-g-2:d.offsetHeight+2);if(St(e.calendarContainer,"arrowTop",!_),St(e.calendarContainer,"arrowBottom",_),!e.config.inline){var Q=window.pageXOffset+D.left,Pt=!1,at=!1;V==="center"?(Q-=(A-D.width)/2,Pt=!0):V==="right"&&(Q-=A-D.width,at=!0),St(e.calendarContainer,"arrowLeft",!Pt&&!at),St(e.calendarContainer,"arrowCenter",Pt),St(e.calendarContainer,"arrowRight",at);var we=window.document.body.offsetWidth-(window.pageXOffset+D.right),de=Q+A>window.document.body.offsetWidth,di=we+A>window.document.body.offsetWidth;if(St(e.calendarContainer,"rightMost",de),!e.config.static)if(e.calendarContainer.style.top=M+"px",!de)e.calendarContainer.style.left=Q+"px",e.calendarContainer.style.right="auto";else if(!di)e.calendarContainer.style.left="auto",e.calendarContainer.style.right=we+"px";else{var hn=cn();if(hn===void 0)return;var fr=window.document.body.offsetWidth,f=Math.max(0,fr/2-A/2),T=".flatpickr-calendar.centerMost:before",w=".flatpickr-calendar.centerMost:after",K=hn.cssRules.length,X="{left:"+D.left+"px;right:auto;}";St(e.calendarContainer,"rightMost",!1),St(e.calendarContainer,"centerMost",!0),hn.insertRule(T+","+w+X,K),e.calendarContainer.style.left=f+"px",e.calendarContainer.style.right="auto"}}}}function cn(){for(var u=null,d=0;d<document.styleSheets.length;d++){var g=document.styleSheets[d];if(g.cssRules){try{g.cssRules}catch{continue}u=g;break}}return u??li()}function li(){var u=document.createElement("style");return document.head.appendChild(u),u.sheet}function Tn(){e.config.noCalendar||e.isMobile||(wt(),ce(),it())}function Ne(){e._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(e.close,0):e.close()}function Ce(u){u.preventDefault(),u.stopPropagation();var d=function(M){return M.classList&&M.classList.contains("flatpickr-day")&&!M.classList.contains("flatpickr-disabled")&&!M.classList.contains("notAllowed")},g=Fa(Vt(u),d);if(g!==void 0){var A=g,E=e.latestSelectedDateObj=new Date(A.dateObj.getTime()),S=(E.getMonth()<e.currentMonth||E.getMonth()>e.currentMonth+e.config.showMonths-1)&&e.config.mode!=="range";if(e.selectedDateElem=A,e.config.mode==="single")e.selectedDates=[E];else if(e.config.mode==="multiple"){var V=Ve(E);V?e.selectedDates.splice(parseInt(V),1):e.selectedDates.push(E)}else e.config.mode==="range"&&(e.selectedDates.length===2&&e.clear(!1,!1),e.latestSelectedDateObj=E,e.selectedDates.push(E),Ht(E,e.selectedDates[0],!0)!==0&&e.selectedDates.sort(function(M,Q){return M.getTime()-Q.getTime()}));if(p(),S){var D=e.currentYear!==E.getFullYear();e.currentYear=E.getFullYear(),e.currentMonth=E.getMonth(),D&&(tt("onYearChange"),wt()),tt("onMonthChange")}if(ce(),it(),Gt(),!S&&e.config.mode!=="range"&&e.config.showMonths===1?O(A):e.selectedDateElem!==void 0&&e.hourElement===void 0&&e.selectedDateElem&&e.selectedDateElem.focus(),e.hourElement!==void 0&&e.hourElement!==void 0&&e.hourElement.focus(),e.config.closeOnSelect){var H=e.config.mode==="single"&&!e.config.enableTime,_=e.config.mode==="range"&&e.selectedDates.length===2&&!e.config.enableTime;(H||_)&&Ne()}C()}}var Yt={locale:[le,wn],showMonths:[be,a,oi],minDate:[x],maxDate:[x],positionElement:[Be],clickOpens:[function(){e.config.clickOpens===!0?(y(e._input,"focus",e.open),y(e._input,"click",e.open)):(e._input.removeEventListener("focus",e.open),e._input.removeEventListener("click",e.open))}]};function xe(u,d){if(u!==null&&typeof u=="object"){Object.assign(e.config,u);for(var g in u)Yt[g]!==void 0&&Yt[g].forEach(function(A){return A()})}else e.config[u]=d,Yt[u]!==void 0?Yt[u].forEach(function(A){return A()}):vr.indexOf(u)>-1&&(e.config[u]=br(d));e.redraw(),Gt(!0)}function Rn(u,d){var g=[];if(u instanceof Array)g=u.map(function(A){return e.parseDate(A,d)});else if(u instanceof Date||typeof u=="number")g=[e.parseDate(u,d)];else if(typeof u=="string")switch(e.config.mode){case"single":case"time":g=[e.parseDate(u,d)];break;case"multiple":g=u.split(e.config.conjunction).map(function(A){return e.parseDate(A,d)});break;case"range":g=u.split(e.l10n.rangeSeparator).map(function(A){return e.parseDate(A,d)});break}else e.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(u)));e.selectedDates=e.config.allowInvalidPreload?g:g.filter(function(A){return A instanceof Date&&Kt(A,!1)}),e.config.mode==="range"&&e.selectedDates.sort(function(A,E){return A.getTime()-E.getTime()})}function ui(u,d,g){if(d===void 0&&(d=!1),g===void 0&&(g=e.config.dateFormat),u!==0&&!u||u instanceof Array&&u.length===0)return e.clear(d);Rn(u,g),e.latestSelectedDateObj=e.selectedDates[e.selectedDates.length-1],e.redraw(),x(void 0,d),m(),e.selectedDates.length===0&&e.clear(!1),Gt(d),d&&tt("onChange")}function On(u){return u.slice().map(function(d){return typeof d=="string"||typeof d=="number"||d instanceof Date?e.parseDate(d,void 0,!0):d&&typeof d=="object"&&d.from&&d.to?{from:e.parseDate(d.from,void 0),to:e.parseDate(d.to,void 0)}:d}).filter(function(d){return d})}function Fn(){e.selectedDates=[],e.now=e.parseDate(e.config.now)||new Date;var u=e.config.defaultDate||((e.input.nodeName==="INPUT"||e.input.nodeName==="TEXTAREA")&&e.input.placeholder&&e.input.value===e.input.placeholder?null:e.input.value);u&&Rn(u,e.config.dateFormat),e._initialDate=e.selectedDates.length>0?e.selectedDates[0]:e.config.minDate&&e.config.minDate.getTime()>e.now.getTime()?e.config.minDate:e.config.maxDate&&e.config.maxDate.getTime()<e.now.getTime()?e.config.maxDate:e.now,e.currentYear=e._initialDate.getFullYear(),e.currentMonth=e._initialDate.getMonth(),e.selectedDates.length>0&&(e.latestSelectedDateObj=e.selectedDates[0]),e.config.minTime!==void 0&&(e.config.minTime=e.parseDate(e.config.minTime,"H:i")),e.config.maxTime!==void 0&&(e.config.maxTime=e.parseDate(e.config.maxTime,"H:i")),e.minDateHasTime=!!e.config.minDate&&(e.config.minDate.getHours()>0||e.config.minDate.getMinutes()>0||e.config.minDate.getSeconds()>0),e.maxDateHasTime=!!e.config.maxDate&&(e.config.maxDate.getHours()>0||e.config.maxDate.getMinutes()>0||e.config.maxDate.getSeconds()>0)}function ci(){if(e.input=un(),!e.input){e.config.errorHandler(new Error("Invalid input element specified"));return}e.input._type=e.input.type,e.input.type="text",e.input.classList.add("flatpickr-input"),e._input=e.input,e.config.altInput&&(e.altInput=Z(e.input.nodeName,e.config.altInputClass),e._input=e.altInput,e.altInput.placeholder=e.input.placeholder,e.altInput.disabled=e.input.disabled,e.altInput.required=e.input.required,e.altInput.tabIndex=e.input.tabIndex,e.altInput.type="text",e.input.setAttribute("type","hidden"),!e.config.static&&e.input.parentNode&&e.input.parentNode.insertBefore(e.altInput,e.input.nextSibling)),e.config.allowInput||e._input.setAttribute("readonly","readonly"),Be()}function Be(){e._positionElement=e.config.positionElement||e._input}function dn(){var u=e.config.enableTime?e.config.noCalendar?"time":"datetime-local":"date";e.mobileInput=Z("input",e.input.className+" flatpickr-mobile"),e.mobileInput.tabIndex=1,e.mobileInput.type=u,e.mobileInput.disabled=e.input.disabled,e.mobileInput.required=e.input.required,e.mobileInput.placeholder=e.input.placeholder,e.mobileFormatStr=u==="datetime-local"?"Y-m-d\\TH:i:S":u==="date"?"Y-m-d":"H:i:S",e.selectedDates.length>0&&(e.mobileInput.defaultValue=e.mobileInput.value=e.formatDate(e.selectedDates[0],e.mobileFormatStr)),e.config.minDate&&(e.mobileInput.min=e.formatDate(e.config.minDate,"Y-m-d")),e.config.maxDate&&(e.mobileInput.max=e.formatDate(e.config.maxDate,"Y-m-d")),e.input.getAttribute("step")&&(e.mobileInput.step=String(e.input.getAttribute("step"))),e.input.type="hidden",e.altInput!==void 0&&(e.altInput.type="hidden");try{e.input.parentNode&&e.input.parentNode.insertBefore(e.mobileInput,e.input.nextSibling)}catch{}y(e.mobileInput,"change",function(d){e.setDate(Vt(d).value,!1,e.mobileFormatStr),tt("onChange"),tt("onClose")})}function Jt(u){if(e.isOpen===!0)return e.close();e.open(u)}function tt(u,d){if(e.config!==void 0){var g=e.config[u];if(g!==void 0&&g.length>0)for(var A=0;g[A]&&A<g.length;A++)g[A](e.selectedDates,e.input.value,e,d);u==="onChange"&&(e.input.dispatchEvent(Pe("change")),e.input.dispatchEvent(Pe("input")))}}function Pe(u){var d=document.createEvent("Event");return d.initEvent(u,!0,!0),d}function Ve(u){for(var d=0;d<e.selectedDates.length;d++){var g=e.selectedDates[d];if(g instanceof Date&&Ht(g,u)===0)return""+d}return!1}function dr(u){return e.config.mode!=="range"||e.selectedDates.length<2?!1:Ht(u,e.selectedDates[0])>=0&&Ht(u,e.selectedDates[1])<=0}function ce(){e.config.noCalendar||e.isMobile||!e.monthNav||(e.yearElements.forEach(function(u,d){var g=new Date(e.currentYear,e.currentMonth,1);g.setMonth(e.currentMonth+d),e.config.showMonths>1||e.config.monthSelectorType==="static"?e.monthElements[d].textContent=Li(g.getMonth(),e.config.shorthandCurrentMonth,e.l10n)+" ":e.monthsDropdownContainer.value=g.getMonth().toString(),u.value=g.getFullYear().toString()}),e._hidePrevMonthArrow=e.config.minDate!==void 0&&(e.currentYear===e.config.minDate.getFullYear()?e.currentMonth<=e.config.minDate.getMonth():e.currentYear<e.config.minDate.getFullYear()),e._hideNextMonthArrow=e.config.maxDate!==void 0&&(e.currentYear===e.config.maxDate.getFullYear()?e.currentMonth+1>e.config.maxDate.getMonth():e.currentYear>e.config.maxDate.getFullYear()))}function Ee(u){var d=u||(e.config.altInput?e.config.altFormat:e.config.dateFormat);return e.selectedDates.map(function(g){return e.formatDate(g,d)}).filter(function(g,A,E){return e.config.mode!=="range"||e.config.enableTime||E.indexOf(g)===A}).join(e.config.mode!=="range"?e.config.conjunction:e.l10n.rangeSeparator)}function Gt(u){u===void 0&&(u=!0),e.mobileInput!==void 0&&e.mobileFormatStr&&(e.mobileInput.value=e.latestSelectedDateObj!==void 0?e.formatDate(e.latestSelectedDateObj,e.mobileFormatStr):""),e.input.value=Ee(e.config.dateFormat),e.altInput!==void 0&&(e.altInput.value=Ee(e.config.altFormat)),u!==!1&&tt("onValueUpdate")}function je(u){var d=Vt(u),g=e.prevMonthNav.contains(d),A=e.nextMonthNav.contains(d);g||A?ln(g?-1:1):e.yearElements.indexOf(d)>=0?d.select():d.classList.contains("arrowUp")?e.changeYear(e.currentYear+1):d.classList.contains("arrowDown")&&e.changeYear(e.currentYear-1)}function hr(u){u.preventDefault();var d=u.type==="keydown",g=Vt(u),A=g;e.amPM!==void 0&&g===e.amPM&&(e.amPM.textContent=e.l10n.amPM[qt(e.amPM.textContent===e.l10n.amPM[0])]);var E=parseFloat(A.getAttribute("min")),S=parseFloat(A.getAttribute("max")),V=parseFloat(A.getAttribute("step")),D=parseInt(A.value,10),H=u.delta||(d?u.which===38?1:-1:0),_=D+V*H;if(typeof A.value<"u"&&A.value.length===2){var M=A===e.hourElement,Q=A===e.minuteElement;_<E?(_=S+_+qt(!M)+(qt(M)&&qt(!e.amPM)),Q&&B(void 0,-1,e.hourElement)):_>S&&(_=A===e.hourElement?_-S-qt(!e.amPM):E,Q&&B(void 0,1,e.hourElement)),e.amPM&&M&&(V===1?_+D===23:Math.abs(_-D)>V)&&(e.amPM.textContent=e.l10n.amPM[qt(e.amPM.textContent===e.l10n.amPM[0])]),A.value=It(_)}}return r(),e}function mn(i,t){for(var e=Array.prototype.slice.call(i).filter(function(o){return o instanceof HTMLElement}),n=[],r=0;r<e.length;r++){var s=e[r];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=Cc(s,t||{}),n.push(s._flatpickr)}catch(o){console.error(o)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(i){return mn(this,i)},HTMLElement.prototype.flatpickr=function(i){return mn([this],i)});var gt=function(i,t){return typeof i=="string"?mn(window.document.querySelectorAll(i),t):i instanceof Node?mn([i],t):mn(i,t)};gt.defaultConfig={};gt.l10ns={en:yt({},Xn),default:yt({},Xn)};gt.localize=function(i){gt.l10ns.default=yt(yt({},gt.l10ns.default),i)};gt.setDefaults=function(i){gt.defaultConfig=yt(yt({},gt.defaultConfig),i)};gt.parseDate=ls({});gt.formatDate=La({});gt.compareDates=Ht;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(i){return mn(this,i)});Date.prototype.fp_incr=function(i){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof i=="string"?parseInt(i,10):i))};typeof window<"u"&&(window.flatpickr=gt);var xc="2.1.15";const Qe="[data-trix-attachment]",Ds={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},Rt={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(i){return ro(i.parentNode)===Rt[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(i){return ro(i.parentNode)===Rt[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},ro=i=>{var t;return i==null||(t=i.tagName)===null||t===void 0?void 0:t.toLowerCase()},so=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),xr=so&&parseInt(so[1]);var ri={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:xr&&xr>12,samsungAndroid:xr&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(i=>i in InputEvent.prototype)},Ma={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},U={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption…",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL…",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"};const Ec=[U.bytes,U.KB,U.MB,U.GB,U.TB,U.PB];var Ia={prefix:"IEC",precision:2,formatter(i){switch(i){case 0:return"0 ".concat(U.bytes);case 1:return"1 ".concat(U.byte);default:let t;this.prefix==="SI"?t=1e3:this.prefix==="IEC"&&(t=1024);const e=Math.floor(Math.log(i)/Math.log(t)),n=(i/Math.pow(t,e)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(n," ").concat(Ec[e])}}};const Qi="\uFEFF",Te=" ",Na=function(i){for(const t in i){const e=i[t];this[t]=e}return this},_s=document.documentElement,wc=_s.matches,lt=function(i){let{onElement:t,matchingSelector:e,withCallback:n,inPhase:r,preventDefault:s,times:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=t||_s,l=e,c=r==="capturing",h=function(p){o!=null&&--o==0&&h.destroy();const m=Oe(p.target,{matchingSelector:l});m!=null&&(n==null||n.call(m,p,m),s&&p.preventDefault())};return h.destroy=()=>a.removeEventListener(i,h,c),a.addEventListener(i,h,c),h},Wn=function(i){let{onElement:t,bubbles:e,cancelable:n,attributes:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=t??_s;e=e!==!1,n=n!==!1;const o=document.createEvent("Events");return o.initEvent(i,e,n),r!=null&&Na.call(o,r),s.dispatchEvent(o)},Ba=function(i,t){if((i==null?void 0:i.nodeType)===1)return wc.call(i,t)},Oe=function(i){let{matchingSelector:t,untilNode:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;i&&i.nodeType!==Node.ELEMENT_NODE;)i=i.parentNode;if(i!=null){if(t==null)return i;if(i.closest&&e==null)return i.closest(t);for(;i&&i!==e;){if(Ba(i,t))return i;i=i.parentNode}}},Ts=i=>document.activeElement!==i&&Je(i,document.activeElement),Je=function(i,t){if(i&&t)for(;t;){if(t===i)return!0;t=t.parentNode}},Er=function(i){var t;if((t=i)===null||t===void 0||!t.parentNode)return;let e=0;for(i=i.previousSibling;i;)e++,i=i.previousSibling;return e},Fe=i=>{var t;return i==null||(t=i.parentNode)===null||t===void 0?void 0:t.removeChild(i)},Mi=function(i){let{onlyNodesOfType:t,usingFilter:e,expandEntityReferences:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=(()=>{switch(t){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(i,r,e??null,n===!0)},Tt=i=>{var t;return i==null||(t=i.tagName)===null||t===void 0?void 0:t.toLowerCase()},$=function(i){let t,e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof i=="object"?(n=i,i=n.tagName):n={attributes:n};const r=document.createElement(i);if(n.editable!=null&&(n.attributes==null&&(n.attributes={}),n.attributes.contenteditable=n.editable),n.attributes)for(t in n.attributes)e=n.attributes[t],r.setAttribute(t,e);if(n.style)for(t in n.style)e=n.style[t],r.style[t]=e;if(n.data)for(t in n.data)e=n.data[t],r.dataset[t]=e;return n.className&&n.className.split(" ").forEach(s=>{r.classList.add(s)}),n.textContent&&(r.textContent=n.textContent),n.childNodes&&[].concat(n.childNodes).forEach(s=>{r.appendChild(s)}),r};let Mn;const qn=function(){if(Mn!=null)return Mn;Mn=[];for(const i in Rt){const t=Rt[i];t.tagName&&Mn.push(t.tagName)}return Mn},wr=i=>vn(i==null?void 0:i.firstChild),oo=function(i){let{strict:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return t?vn(i):vn(i)||!vn(i.firstChild)&&function(e){return qn().includes(Tt(e))&&!qn().includes(Tt(e.firstChild))}(i)},vn=i=>kc(i)&&(i==null?void 0:i.data)==="block",kc=i=>(i==null?void 0:i.nodeType)===Node.COMMENT_NODE,bn=function(i){let{name:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i)return zn(i)?i.data===Qi?!t||i.parentNode.dataset.trixCursorTarget===t:void 0:bn(i.firstChild)},Ze=i=>Ba(i,Qe),Pa=i=>zn(i)&&(i==null?void 0:i.data)==="",zn=i=>(i==null?void 0:i.nodeType)===Node.TEXT_NODE,Rs={level2Enabled:!0,getLevel(){return this.level2Enabled&&ri.supportsInputEvents?2:0},pickFiles(i){const t=$("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});t.addEventListener("change",()=>{i(t.files),Fe(t)}),Fe(document.getElementById(this.fileInputId)),document.body.appendChild(t),t.click()}};var Si={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},en={bold:{tagName:"strong",inheritable:!0,parser(i){const t=window.getComputedStyle(i);return t.fontWeight==="bold"||t.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:i=>window.getComputedStyle(i).fontStyle==="italic"},href:{groupTagName:"a",parser(i){const t="a:not(".concat(Qe,")"),e=i.closest(t);if(e)return e.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},Va={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(U.bold,'" tabindex="-1">').concat(U.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(U.italic,'" tabindex="-1">').concat(U.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(U.strike,'" tabindex="-1">').concat(U.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(U.link,'" tabindex="-1">').concat(U.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(U.heading1,'" tabindex="-1">').concat(U.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(U.quote,'" tabindex="-1">').concat(U.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(U.code,'" tabindex="-1">').concat(U.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(U.bullets,'" tabindex="-1">').concat(U.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(U.numbers,'" tabindex="-1">').concat(U.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(U.outdent,'" tabindex="-1">').concat(U.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(U.indent,'" tabindex="-1">').concat(U.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(U.attachFiles,'" tabindex="-1">').concat(U.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(U.undo,'" tabindex="-1">').concat(U.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(U.redo,'" tabindex="-1">').concat(U.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(U.urlPlaceholder,'" aria-label="').concat(U.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(U.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(U.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)};const us={interval:5e3};var si=Object.freeze({__proto__:null,attachments:Ds,blockAttributes:Rt,browser:ri,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:Ma,fileSize:Ia,input:Rs,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:U,parser:Si,textAttributes:en,toolbar:Va,undo:us});class mt{static proxyMethod(t){const{name:e,toMethod:n,toProperty:r,optional:s}=Sc(t);this.prototype[e]=function(){let o,a;var l,c;return n?a=s?(l=this[n])===null||l===void 0?void 0:l.call(this):this[n]():r&&(a=this[r]),s?(o=(c=a)===null||c===void 0?void 0:c[e],o?ao.call(o,a,arguments):void 0):(o=a[e],ao.call(o,a,arguments))}}}const Sc=function(i){const t=i.match(Dc);if(!t)throw new Error("can't parse @proxyMethod expression: ".concat(i));const e={name:t[4]};return t[2]!=null?e.toMethod=t[1]:e.toProperty=t[1],t[3]!=null&&(e.optional=!0),e},{apply:ao}=Function.prototype,Dc=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$");var kr,Sr,Dr;class Qn extends mt{static box(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return t instanceof this?t:this.fromUCS2String(t==null?void 0:t.toString())}static fromUCS2String(t){return new this(t,cs(t))}static fromCodepoints(t){return new this(ds(t),t)}constructor(t,e){super(...arguments),this.ucs2String=t,this.codepoints=e,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(t){return ds(this.codepoints.slice(0,Math.max(0,t))).length}offsetFromUCS2Offset(t){return cs(this.ucs2String.slice(0,Math.max(0,t))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(t){return this.slice(t,t+1)}isEqualTo(t){return this.constructor.box(t).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}}const _c=((kr=Array.from)===null||kr===void 0?void 0:kr.call(Array,"👼").length)===1,Tc=((Sr=" ".codePointAt)===null||Sr===void 0?void 0:Sr.call(" ",0))!=null,Rc=((Dr=String.fromCodePoint)===null||Dr===void 0?void 0:Dr.call(String,32,128124))===" 👼";let cs,ds;cs=_c&&Tc?i=>Array.from(i).map(t=>t.codePointAt(0)):function(i){const t=[];let e=0;const{length:n}=i;for(;e<n;){let r=i.charCodeAt(e++);if(55296<=r&&r<=56319&&e<n){const s=i.charCodeAt(e++);(64512&s)==56320?r=((1023&r)<<10)+(1023&s)+65536:e--}t.push(r)}return t},ds=Rc?i=>String.fromCodePoint(...Array.from(i||[])):function(i){return(()=>{const t=[];return Array.from(i).forEach(e=>{let n="";e>65535&&(e-=65536,n+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t.push(n+String.fromCharCode(e))}),t})().join("")};let Oc=0;class sn extends mt{static fromJSONString(t){return this.fromJSON(JSON.parse(t))}constructor(){super(...arguments),this.id=++Oc}hasSameConstructorAs(t){return this.constructor===(t==null?void 0:t.constructor)}isEqualTo(t){return this===t}inspect(){const t=[],e=this.contentsForInspection()||{};for(const n in e){const r=e[n];t.push("".concat(n,"=").concat(r))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(t.length?" ".concat(t.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return Qn.box(this)}getCacheKey(){return this.id.toString()}}const nn=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0},Os=function(i){const t=i.slice(0);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.splice(...n),t},Fc=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,Lc=function(){const i=$("input",{dir:"auto",name:"x",dirName:"x.dir"}),t=$("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),e=$("form");e.appendChild(i),e.appendChild(t);const n=function(){try{return new FormData(e).has(t.dirName)}catch{return!1}}(),r=function(){try{return i.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return n?function(s){return t.value=s,new FormData(e).get(t.dirName)}:r?function(s){return i.value=s,i.matches(":dir(rtl)")?"rtl":"ltr"}:function(s){const o=s.trim().charAt(0);return Fc.test(o)?"rtl":"ltr"}}();let _r=null,Tr=null,Rr=null,pi=null;const hs=()=>(_r||(_r=Ic().concat(Mc())),_r),ht=i=>Rt[i],Mc=()=>(Tr||(Tr=Object.keys(Rt)),Tr),fs=i=>en[i],Ic=()=>(Rr||(Rr=Object.keys(en)),Rr),ja=function(i,t){Nc(i).textContent=t.replace(/%t/g,i)},Nc=function(i){const t=document.createElement("style");t.setAttribute("type","text/css"),t.setAttribute("data-tag-name",i.toLowerCase());const e=Bc();return e&&t.setAttribute("nonce",e),document.head.insertBefore(t,document.head.firstChild),t},Bc=function(){const i=lo("trix-csp-nonce")||lo("csp-nonce");if(i){const{nonce:t,content:e}=i;return t==""?e:t}},lo=i=>document.head.querySelector("meta[name=".concat(i,"]")),uo={"application/x-trix-feature-detection":"test"},Ha=function(i){const t=i.getData("text/plain"),e=i.getData("text/html");if(!t||!e)return t==null?void 0:t.length;{const{body:n}=new DOMParser().parseFromString(e,"text/html");if(n.textContent===t)return!n.querySelector("*")}},Ua=/Mac|^iP/.test(navigator.platform)?i=>i.metaKey:i=>i.ctrlKey,Fs=i=>setTimeout(i,1),Wa=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t={};for(const e in i){const n=i[e];t[e]=n}return t},xn=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(i[e]!==t[e])return!1;return!0},et=function(i){if(i!=null)return Array.isArray(i)||(i=[i,i]),[co(i[0]),co(i[1]!=null?i[1]:i[0])]},me=function(i){if(i==null)return;const[t,e]=et(i);return ps(t,e)},Ii=function(i,t){if(i==null||t==null)return;const[e,n]=et(i),[r,s]=et(t);return ps(e,r)&&ps(n,s)},co=function(i){return typeof i=="number"?i:Wa(i)},ps=function(i,t){return typeof i=="number"?i===t:xn(i,t)};class qa extends mt{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(t){if(!this.selectionManagers.includes(t))return this.selectionManagers.push(t),this.start()}unregisterSelectionManager(t){if(this.selectionManagers=this.selectionManagers.filter(e=>e!==t),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(t=>t.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}}const rn=new qa,za=function(){const i=window.getSelection();if(i.rangeCount>0)return i},$n=function(){var i;const t=(i=za())===null||i===void 0?void 0:i.getRangeAt(0);if(t&&!Pc(t))return t},$a=function(i){const t=window.getSelection();return t.removeAllRanges(),t.addRange(i),rn.update()},Pc=i=>ho(i.startContainer)||ho(i.endContainer),ho=i=>!Object.getPrototypeOf(i),Hn=i=>i.replace(new RegExp("".concat(Qi),"g"),"").replace(new RegExp("".concat(Te),"g")," "),Ls=new RegExp("[^\\S".concat(Te,"]")),Ms=i=>i.replace(new RegExp("".concat(Ls.source),"g")," ").replace(/\ {2,}/g," "),fo=function(i,t){if(i.isEqualTo(t))return["",""];const e=Or(i,t),{length:n}=e.utf16String;let r;if(n){const{offset:s}=e,o=i.codepoints.slice(0,s).concat(i.codepoints.slice(s+n));r=Or(t,Qn.fromCodepoints(o))}else r=Or(t,i);return[e.utf16String.toString(),r.utf16String.toString()]},Or=function(i,t){let e=0,n=i.length,r=t.length;for(;e<n&&i.charAt(e).isEqualTo(t.charAt(e));)e++;for(;n>e+1&&i.charAt(n-1).isEqualTo(t.charAt(r-1));)n--,r--;return{utf16String:i.slice(e,n),offset:e}};class Wt extends sn{static fromCommonAttributesOfObjects(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!t.length)return new this;let e=In(t[0]),n=e.getKeys();return t.slice(1).forEach(r=>{n=e.getKeysCommonToHash(In(r)),e=e.slice(n)}),e}static box(t){return In(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=Di(t)}add(t,e){return this.merge(Vc(t,e))}remove(t){return new Wt(Di(this.values,t))}get(t){return this.values[t]}has(t){return t in this.values}merge(t){return new Wt(jc(this.values,Hc(t)))}slice(t){const e={};return Array.from(t).forEach(n=>{this.has(n)&&(e[n]=this.values[n])}),new Wt(e)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(t){return t=In(t),this.getKeys().filter(e=>this.values[e]===t.values[e])}isEqualTo(t){return nn(this.toArray(),In(t).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){const t=[];for(const e in this.values){const n=this.values[e];t.push(t.push(e,n))}this.array=t.slice(0)}return this.array}toObject(){return Di(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}}const Vc=function(i,t){const e={};return e[i]=t,e},jc=function(i,t){const e=Di(i);for(const n in t){const r=t[n];e[n]=r}return e},Di=function(i,t){const e={};return Object.keys(i).sort().forEach(n=>{n!==t&&(e[n]=i[n])}),e},In=function(i){return i instanceof Wt?i:new Wt(i)},Hc=function(i){return i instanceof Wt?i.values:i};class Is{static groupObjects(){let t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:n,asTree:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r&&n==null&&(n=0);const s=[];return Array.from(e).forEach(o=>{var a;if(t){var l,c,h;if((l=o.canBeGrouped)!==null&&l!==void 0&&l.call(o,n)&&(c=(h=t[t.length-1]).canBeGroupedWith)!==null&&c!==void 0&&c.call(h,o,n))return void t.push(o);s.push(new this(t,{depth:n,asTree:r})),t=null}(a=o.canBeGrouped)!==null&&a!==void 0&&a.call(o,n)?t=[o]:s.push(o)}),t&&s.push(new this(t,{depth:n,asTree:r})),s}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:e,asTree:n}=arguments.length>1?arguments[1]:void 0;this.objects=t,n&&(this.depth=e,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){const t=["objectGroup"];return Array.from(this.getObjects()).forEach(e=>{t.push(e.getCacheKey())}),t.join("/")}}class Uc extends mt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(t).forEach(e=>{const n=JSON.stringify(e);this.objects[n]==null&&(this.objects[n]=e)})}find(t){const e=JSON.stringify(t);return this.objects[e]}}class Wc{constructor(t){this.reset(t)}add(t){const e=po(t);this.elements[e]=t}remove(t){const e=po(t),n=this.elements[e];if(n)return delete this.elements[e],n}reset(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(t).forEach(e=>{this.add(e)}),t}}const po=i=>i.dataset.trixStoreKey;class Ni extends mt{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((t,e)=>(this.performing=!0,this.perform((n,r)=>{this.succeeded=n,this.performing=!1,this.performed=!0,this.succeeded?t(r):e(r)})))),this.promise}perform(t){return t(!1)}release(){var t,e;(t=this.promise)===null||t===void 0||(e=t.cancel)===null||e===void 0||e.call(t),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}}Ni.proxyMethod("getPromise().then"),Ni.proxyMethod("getPromise().catch");class on extends mt{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=t,this.options=e,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(t=>t.cloneNode(!0))}invalidate(){var t;return this.nodes=null,this.childViews=[],(t=this.parentView)===null||t===void 0?void 0:t.invalidate()}invalidateViewForObject(t){var e;return(e=this.findViewForObject(t))===null||e===void 0?void 0:e.invalidate()}findOrCreateCachedChildView(t,e,n){let r=this.getCachedViewForObject(e);return r?this.recordChildView(r):(r=this.createChildView(...arguments),this.cacheViewForObject(r,e)),r}createChildView(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};e instanceof Is&&(n.viewClass=t,t=qc);const r=new t(e,n);return this.recordChildView(r)}recordChildView(t){return t.parentView=this,t.rootView=this.rootView,this.childViews.push(t),t}getAllChildViews(){let t=[];return this.childViews.forEach(e=>{t.push(e),t=t.concat(e.getAllChildViews())}),t}findElement(){return this.findElementForObject(this.object)}findElementForObject(t){const e=t==null?void 0:t.id;if(e)return this.rootView.element.querySelector("[data-trix-id='".concat(e,"']"))}findViewForObject(t){for(const e of this.getAllChildViews())if(e.object===t)return e}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(t){var e;return(e=this.getViewCache())===null||e===void 0?void 0:e[t.getCacheKey()]}cacheViewForObject(t,e){const n=this.getViewCache();n&&(n[e.getCacheKey()]=t)}garbageCollectCachedViews(){const t=this.getViewCache();if(t){const e=this.getAllChildViews().concat(this).map(n=>n.object.getCacheKey());for(const n in t)e.includes(n)||delete t[n]}}}class qc extends on{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(t=>{this.findOrCreateCachedChildView(this.viewClass,t,this.options)}),this.childViews}createNodes(){const t=this.createContainerElement();return this.getChildViews().forEach(e=>{Array.from(e.getNodes()).forEach(n=>{t.appendChild(n)})}),[t]}createContainerElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(t)}}/*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE */const{entries:Ka,setPrototypeOf:go,isFrozen:zc,getPrototypeOf:$c,getOwnPropertyDescriptor:Kc}=Object;let{freeze:Ft,seal:$t,create:Ya}=Object,{apply:gs,construct:ms}=typeof Reflect<"u"&&Reflect;Ft||(Ft=function(i){return i}),$t||($t=function(i){return i}),gs||(gs=function(i,t,e){return i.apply(t,e)}),ms||(ms=function(i,t){return new i(...t)});const gi=Lt(Array.prototype.forEach),Yc=Lt(Array.prototype.lastIndexOf),mo=Lt(Array.prototype.pop),Nn=Lt(Array.prototype.push),Jc=Lt(Array.prototype.splice),_i=Lt(String.prototype.toLowerCase),Fr=Lt(String.prototype.toString),vo=Lt(String.prototype.match),Bn=Lt(String.prototype.replace),Gc=Lt(String.prototype.indexOf),Xc=Lt(String.prototype.trim),Qt=Lt(Object.prototype.hasOwnProperty),Dt=Lt(RegExp.prototype.test),Pn=(bo=TypeError,function(){for(var i=arguments.length,t=new Array(i),e=0;e<i;e++)t[e]=arguments[e];return ms(bo,t)});var bo;function Lt(i){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return gs(i,t,n)}}function Y(i,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_i;go&&go(i,null);let n=t.length;for(;n--;){let r=t[n];if(typeof r=="string"){const s=e(r);s!==r&&(zc(t)||(t[n]=s),r=s)}i[r]=!0}return i}function Qc(i){for(let t=0;t<i.length;t++)Qt(i,t)||(i[t]=null);return i}function ze(i){const t=Ya(null);for(const[e,n]of Ka(i))Qt(i,e)&&(Array.isArray(n)?t[e]=Qc(n):n&&typeof n=="object"&&n.constructor===Object?t[e]=ze(n):t[e]=n);return t}function Vn(i,t){for(;i!==null;){const e=Kc(i,t);if(e){if(e.get)return Lt(e.get);if(typeof e.value=="function")return Lt(e.value)}i=$c(i)}return function(){return null}}const Ao=Ft(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lr=Ft(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Mr=Ft(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Zc=Ft(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Ir=Ft(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),td=Ft(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),yo=Ft(["#text"]),Co=Ft(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Nr=Ft(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),xo=Ft(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mi=Ft(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ed=$t(/\{\{[\w\W]*|[\w\W]*\}\}/gm),nd=$t(/<%[\w\W]*|[\w\W]*%>/gm),id=$t(/\$\{[\w\W]*/gm),rd=$t(/^data-[\-\w.\u00B7-\uFFFF]+$/),sd=$t(/^aria-[\-\w]+$/),Ja=$t(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),od=$t(/^(?:\w+script|data):/i),ad=$t(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ga=$t(/^html$/i),ld=$t(/^[a-z][.\w]*(-[.\w]+)+$/i);var Eo=Object.freeze({__proto__:null,ARIA_ATTR:sd,ATTR_WHITESPACE:ad,CUSTOM_ELEMENT:ld,DATA_ATTR:rd,DOCTYPE_NAME:Ga,ERB_EXPR:nd,IS_ALLOWED_URI:Ja,IS_SCRIPT_OR_DATA:od,MUSTACHE_EXPR:ed,TMPLIT_EXPR:id});const ud=1,cd=3,dd=7,hd=8,fd=9,pd=function(){return typeof window>"u"?null:window};var Bi=function i(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pd();const e=f=>i(f);if(e.version="3.2.5",e.removed=[],!t||!t.document||t.document.nodeType!==fd||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,s=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:c,NodeFilter:h,NamedNodeMap:p=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:m,DOMParser:k,trustedTypes:v}=t,y=c.prototype,C=Vn(y,"cloneNode"),R=Vn(y,"remove"),x=Vn(y,"nextSibling"),F=Vn(y,"childNodes"),B=Vn(y,"parentNode");if(typeof a=="function"){const f=n.createElement("template");f.content&&f.content.ownerDocument&&(n=f.content.ownerDocument)}let N,J="";const{implementation:O,createNodeIterator:P,createDocumentFragment:I,getElementsByTagName:st}=n,{importNode:G}=r;let it={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};e.isSupported=typeof Ka=="function"&&typeof B=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:wt,ERB_EXPR:Le,TMPLIT_EXPR:be,DATA_ATTR:lr,ARIA_ATTR:ur,IS_SCRIPT_OR_DATA:oi,ATTR_WHITESPACE:wn,CUSTOM_ELEMENT:cr}=Eo;let{IS_ALLOWED_URI:ln}=Eo,pt=null;const ai=Y({},[...Ao,...Lr,...Mr,...Ir,...yo]);let vt=null;const Ae=Y({},[...Co,...Nr,...xo,...mi]);let rt=Object.seal(Ya(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,Kt=null,Me=!0,kn=!0,Sn=!1,Ie=!0,ye=!1,Dn=!0,ne=!1,_n=!1,un=!1,le=!1,ue=!1,cn=!1,li=!0,Tn=!1,Ne=!0,Ce=!1,Yt={},xe=null;const Rn=Y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ui=null;const On=Y({},["audio","video","img","source","image","track"]);let Fn=null;const ci=Y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Be="http://www.w3.org/1998/Math/MathML",dn="http://www.w3.org/2000/svg",Jt="http://www.w3.org/1999/xhtml";let tt=Jt,Pe=!1,Ve=null;const dr=Y({},[Be,dn,Jt],Fr);let ce=Y({},["mi","mo","mn","ms","mtext"]),Ee=Y({},["annotation-xml"]);const Gt=Y({},["title","style","font","a","script"]);let je=null;const hr=["application/xhtml+xml","text/html"];let u=null,d=null;const g=n.createElement("form"),A=function(f){return f instanceof RegExp||f instanceof Function},E=function(){let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!d||d!==f){if(f&&typeof f=="object"||(f={}),f=ze(f),je=hr.indexOf(f.PARSER_MEDIA_TYPE)===-1?"text/html":f.PARSER_MEDIA_TYPE,u=je==="application/xhtml+xml"?Fr:_i,pt=Qt(f,"ALLOWED_TAGS")?Y({},f.ALLOWED_TAGS,u):ai,vt=Qt(f,"ALLOWED_ATTR")?Y({},f.ALLOWED_ATTR,u):Ae,Ve=Qt(f,"ALLOWED_NAMESPACES")?Y({},f.ALLOWED_NAMESPACES,Fr):dr,Fn=Qt(f,"ADD_URI_SAFE_ATTR")?Y(ze(ci),f.ADD_URI_SAFE_ATTR,u):ci,ui=Qt(f,"ADD_DATA_URI_TAGS")?Y(ze(On),f.ADD_DATA_URI_TAGS,u):On,xe=Qt(f,"FORBID_CONTENTS")?Y({},f.FORBID_CONTENTS,u):Rn,ee=Qt(f,"FORBID_TAGS")?Y({},f.FORBID_TAGS,u):{},Kt=Qt(f,"FORBID_ATTR")?Y({},f.FORBID_ATTR,u):{},Yt=!!Qt(f,"USE_PROFILES")&&f.USE_PROFILES,Me=f.ALLOW_ARIA_ATTR!==!1,kn=f.ALLOW_DATA_ATTR!==!1,Sn=f.ALLOW_UNKNOWN_PROTOCOLS||!1,Ie=f.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ye=f.SAFE_FOR_TEMPLATES||!1,Dn=f.SAFE_FOR_XML!==!1,ne=f.WHOLE_DOCUMENT||!1,le=f.RETURN_DOM||!1,ue=f.RETURN_DOM_FRAGMENT||!1,cn=f.RETURN_TRUSTED_TYPE||!1,un=f.FORCE_BODY||!1,li=f.SANITIZE_DOM!==!1,Tn=f.SANITIZE_NAMED_PROPS||!1,Ne=f.KEEP_CONTENT!==!1,Ce=f.IN_PLACE||!1,ln=f.ALLOWED_URI_REGEXP||Ja,tt=f.NAMESPACE||Jt,ce=f.MATHML_TEXT_INTEGRATION_POINTS||ce,Ee=f.HTML_INTEGRATION_POINTS||Ee,rt=f.CUSTOM_ELEMENT_HANDLING||{},f.CUSTOM_ELEMENT_HANDLING&&A(f.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rt.tagNameCheck=f.CUSTOM_ELEMENT_HANDLING.tagNameCheck),f.CUSTOM_ELEMENT_HANDLING&&A(f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rt.attributeNameCheck=f.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),f.CUSTOM_ELEMENT_HANDLING&&typeof f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rt.allowCustomizedBuiltInElements=f.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ye&&(kn=!1),ue&&(le=!0),Yt&&(pt=Y({},yo),vt=[],Yt.html===!0&&(Y(pt,Ao),Y(vt,Co)),Yt.svg===!0&&(Y(pt,Lr),Y(vt,Nr),Y(vt,mi)),Yt.svgFilters===!0&&(Y(pt,Mr),Y(vt,Nr),Y(vt,mi)),Yt.mathMl===!0&&(Y(pt,Ir),Y(vt,xo),Y(vt,mi))),f.ADD_TAGS&&(pt===ai&&(pt=ze(pt)),Y(pt,f.ADD_TAGS,u)),f.ADD_ATTR&&(vt===Ae&&(vt=ze(vt)),Y(vt,f.ADD_ATTR,u)),f.ADD_URI_SAFE_ATTR&&Y(Fn,f.ADD_URI_SAFE_ATTR,u),f.FORBID_CONTENTS&&(xe===Rn&&(xe=ze(xe)),Y(xe,f.FORBID_CONTENTS,u)),Ne&&(pt["#text"]=!0),ne&&Y(pt,["html","head","body"]),pt.table&&(Y(pt,["tbody"]),delete ee.tbody),f.TRUSTED_TYPES_POLICY){if(typeof f.TRUSTED_TYPES_POLICY.createHTML!="function")throw Pn('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof f.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Pn('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=f.TRUSTED_TYPES_POLICY,J=N.createHTML("")}else N===void 0&&(N=function(T,w){if(typeof T!="object"||typeof T.createPolicy!="function")return null;let K=null;const X="data-tt-policy-suffix";w&&w.hasAttribute(X)&&(K=w.getAttribute(X));const z="dompurify"+(K?"#"+K:"");try{return T.createPolicy(z,{createHTML:ct=>ct,createScriptURL:ct=>ct})}catch{return console.warn("TrustedTypes policy "+z+" could not be created."),null}}(v,s)),N!==null&&typeof J=="string"&&(J=N.createHTML(""));Ft&&Ft(f),d=f}},S=Y({},[...Lr,...Mr,...Zc]),V=Y({},[...Ir,...td]),D=function(f){Nn(e.removed,{element:f});try{B(f).removeChild(f)}catch{R(f)}},H=function(f,T){try{Nn(e.removed,{attribute:T.getAttributeNode(f),from:T})}catch{Nn(e.removed,{attribute:null,from:T})}if(T.removeAttribute(f),f==="is")if(le||ue)try{D(T)}catch{}else try{T.setAttribute(f,"")}catch{}},_=function(f){let T=null,w=null;if(un)f="<remove></remove>"+f;else{const z=vo(f,/^[\r\n\t ]+/);w=z&&z[0]}je==="application/xhtml+xml"&&tt===Jt&&(f='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+f+"</body></html>");const K=N?N.createHTML(f):f;if(tt===Jt)try{T=new k().parseFromString(K,je)}catch{}if(!T||!T.documentElement){T=O.createDocument(tt,"template",null);try{T.documentElement.innerHTML=Pe?J:K}catch{}}const X=T.body||T.documentElement;return f&&w&&X.insertBefore(n.createTextNode(w),X.childNodes[0]||null),tt===Jt?st.call(T,ne?"html":"body")[0]:ne?T.documentElement:X},M=function(f){return P.call(f.ownerDocument||f,f,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},Q=function(f){return f instanceof m&&(typeof f.nodeName!="string"||typeof f.textContent!="string"||typeof f.removeChild!="function"||!(f.attributes instanceof p)||typeof f.removeAttribute!="function"||typeof f.setAttribute!="function"||typeof f.namespaceURI!="string"||typeof f.insertBefore!="function"||typeof f.hasChildNodes!="function")},Pt=function(f){return typeof l=="function"&&f instanceof l};function at(f,T,w){gi(f,K=>{K.call(e,T,w,d)})}const we=function(f){let T=null;if(at(it.beforeSanitizeElements,f,null),Q(f))return D(f),!0;const w=u(f.nodeName);if(at(it.uponSanitizeElement,f,{tagName:w,allowedTags:pt}),f.hasChildNodes()&&!Pt(f.firstElementChild)&&Dt(/<[/\w!]/g,f.innerHTML)&&Dt(/<[/\w!]/g,f.textContent)||f.nodeType===dd||Dn&&f.nodeType===hd&&Dt(/<[/\w]/g,f.data))return D(f),!0;if(!pt[w]||ee[w]){if(!ee[w]&&di(w)&&(rt.tagNameCheck instanceof RegExp&&Dt(rt.tagNameCheck,w)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(w)))return!1;if(Ne&&!xe[w]){const K=B(f)||f.parentNode,X=F(f)||f.childNodes;if(X&&K)for(let z=X.length-1;z>=0;--z){const ct=C(X[z],!0);ct.__removalCount=(f.__removalCount||0)+1,K.insertBefore(ct,x(f))}}return D(f),!0}return f instanceof c&&!function(K){let X=B(K);X&&X.tagName||(X={namespaceURI:tt,tagName:"template"});const z=_i(K.tagName),ct=_i(X.tagName);return!!Ve[K.namespaceURI]&&(K.namespaceURI===dn?X.namespaceURI===Jt?z==="svg":X.namespaceURI===Be?z==="svg"&&(ct==="annotation-xml"||ce[ct]):!!S[z]:K.namespaceURI===Be?X.namespaceURI===Jt?z==="math":X.namespaceURI===dn?z==="math"&&Ee[ct]:!!V[z]:K.namespaceURI===Jt?!(X.namespaceURI===dn&&!Ee[ct])&&!(X.namespaceURI===Be&&!ce[ct])&&!V[z]&&(Gt[z]||!S[z]):!(je!=="application/xhtml+xml"||!Ve[K.namespaceURI]))}(f)?(D(f),!0):w!=="noscript"&&w!=="noembed"&&w!=="noframes"||!Dt(/<\/no(script|embed|frames)/i,f.innerHTML)?(ye&&f.nodeType===cd&&(T=f.textContent,gi([wt,Le,be],K=>{T=Bn(T,K," ")}),f.textContent!==T&&(Nn(e.removed,{element:f.cloneNode()}),f.textContent=T)),at(it.afterSanitizeElements,f,null),!1):(D(f),!0)},de=function(f,T,w){if(li&&(T==="id"||T==="name")&&(w in n||w in g))return!1;if(!(kn&&!Kt[T]&&Dt(lr,T))){if(!(Me&&Dt(ur,T))){if(!vt[T]||Kt[T]){if(!(di(f)&&(rt.tagNameCheck instanceof RegExp&&Dt(rt.tagNameCheck,f)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(f))&&(rt.attributeNameCheck instanceof RegExp&&Dt(rt.attributeNameCheck,T)||rt.attributeNameCheck instanceof Function&&rt.attributeNameCheck(T))||T==="is"&&rt.allowCustomizedBuiltInElements&&(rt.tagNameCheck instanceof RegExp&&Dt(rt.tagNameCheck,w)||rt.tagNameCheck instanceof Function&&rt.tagNameCheck(w))))return!1}else if(!Fn[T]){if(!Dt(ln,Bn(w,wn,""))){if((T!=="src"&&T!=="xlink:href"&&T!=="href"||f==="script"||Gc(w,"data:")!==0||!ui[f])&&!(Sn&&!Dt(oi,Bn(w,wn,"")))){if(w)return!1}}}}}return!0},di=function(f){return f!=="annotation-xml"&&vo(f,cr)},hn=function(f){at(it.beforeSanitizeAttributes,f,null);const{attributes:T}=f;if(!T||Q(f))return;const w={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt,forceKeepAttr:void 0};let K=T.length;for(;K--;){const X=T[K],{name:z,namespaceURI:ct,value:he}=X,ie=u(z);let kt=z==="value"?he:Xc(he);if(w.attrName=ie,w.attrValue=kt,w.keepAttr=!0,w.forceKeepAttr=void 0,at(it.uponSanitizeAttribute,f,w),kt=w.attrValue,!Tn||ie!=="id"&&ie!=="name"||(H(z,f),kt="user-content-"+kt),Dn&&Dt(/((--!?|])>)|<\/(style|title)/i,kt)){H(z,f);continue}if(w.forceKeepAttr||(H(z,f),!w.keepAttr))continue;if(!Ie&&Dt(/\/>/i,kt)){H(z,f);continue}ye&&gi([wt,Le,be],Us=>{kt=Bn(kt,Us," ")});const Hs=u(f.nodeName);if(de(Hs,ie,kt)){if(N&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!ct)switch(v.getAttributeType(Hs,ie)){case"TrustedHTML":kt=N.createHTML(kt);break;case"TrustedScriptURL":kt=N.createScriptURL(kt)}try{ct?f.setAttributeNS(ct,z,kt):f.setAttribute(z,kt),Q(f)?D(f):mo(e.removed)}catch{}}}at(it.afterSanitizeAttributes,f,null)},fr=function f(T){let w=null;const K=M(T);for(at(it.beforeSanitizeShadowDOM,T,null);w=K.nextNode();)at(it.uponSanitizeShadowNode,w,null),we(w),hn(w),w.content instanceof o&&f(w.content);at(it.afterSanitizeShadowDOM,T,null)};return e.sanitize=function(f){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},w=null,K=null,X=null,z=null;if(Pe=!f,Pe&&(f="<!-->"),typeof f!="string"&&!Pt(f)){if(typeof f.toString!="function")throw Pn("toString is not a function");if(typeof(f=f.toString())!="string")throw Pn("dirty is not a string, aborting")}if(!e.isSupported)return f;if(_n||E(T),e.removed=[],typeof f=="string"&&(Ce=!1),Ce){if(f.nodeName){const ie=u(f.nodeName);if(!pt[ie]||ee[ie])throw Pn("root node is forbidden and cannot be sanitized in-place")}}else if(f instanceof l)w=_("<!---->"),K=w.ownerDocument.importNode(f,!0),K.nodeType===ud&&K.nodeName==="BODY"||K.nodeName==="HTML"?w=K:w.appendChild(K);else{if(!le&&!ye&&!ne&&f.indexOf("<")===-1)return N&&cn?N.createHTML(f):f;if(w=_(f),!w)return le?null:cn?J:""}w&&un&&D(w.firstChild);const ct=M(Ce?f:w);for(;X=ct.nextNode();)we(X),hn(X),X.content instanceof o&&fr(X.content);if(Ce)return f;if(le){if(ue)for(z=I.call(w.ownerDocument);w.firstChild;)z.appendChild(w.firstChild);else z=w;return(vt.shadowroot||vt.shadowrootmode)&&(z=G.call(r,z,!0)),z}let he=ne?w.outerHTML:w.innerHTML;return ne&&pt["!doctype"]&&w.ownerDocument&&w.ownerDocument.doctype&&w.ownerDocument.doctype.name&&Dt(Ga,w.ownerDocument.doctype.name)&&(he="<!DOCTYPE "+w.ownerDocument.doctype.name+`>
`+he),ye&&gi([wt,Le,be],ie=>{he=Bn(he,ie," ")}),N&&cn?N.createHTML(he):he},e.setConfig=function(){E(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),_n=!0},e.clearConfig=function(){d=null,_n=!1},e.isValidAttribute=function(f,T,w){d||E({});const K=u(f),X=u(T);return de(K,X,w)},e.addHook=function(f,T){typeof T=="function"&&Nn(it[f],T)},e.removeHook=function(f,T){if(T!==void 0){const w=Yc(it[f],T);return w===-1?void 0:Jc(it[f],w,1)[0]}return mo(it[f])},e.removeHooks=function(f){it[f]=[]},e.removeAllHooks=function(){it={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},e}();Bi.addHook("uponSanitizeAttribute",function(i,t){/^data-trix-/.test(t.attrName)&&(t.forceKeepAttr=!0)});const gd="style href src width height language class".split(" "),md="javascript:".split(" "),vd="script iframe form noscript".split(" ");class Zi extends mt{static setHTML(t,e,n){const r=new this(e,n).sanitize(),s=r.getHTML?r.getHTML():r.outerHTML;t.innerHTML=s}static sanitize(t,e){const n=new this(t,e);return n.sanitize(),n}constructor(t){let{allowedAttributes:e,forbiddenProtocols:n,forbiddenElements:r,purifyOptions:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=e||gd,this.forbiddenProtocols=n||md,this.forbiddenElements=r||vd,this.purifyOptions=s||{},this.body=bd(t)}sanitize(){this.sanitizeElements(),this.normalizeListElementNesting();const t=Object.assign({},Ma,this.purifyOptions);return Bi.setConfig(t),this.body=Bi.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){const t=Mi(this.body),e=[];for(;t.nextNode();){const n=t.currentNode;switch(n.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(n)?e.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:e.push(n)}}return e.forEach(n=>Fe(n)),this.body}sanitizeElement(t){return t.hasAttribute("href")&&this.forbiddenProtocols.includes(t.protocol)&&t.removeAttribute("href"),Array.from(t.attributes).forEach(e=>{let{name:n}=e;this.allowedAttributes.includes(n)||n.indexOf("data-trix")===0||t.removeAttribute(n)}),t}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(t=>{const e=t.previousElementSibling;e&&Tt(e)==="li"&&e.appendChild(t)}),this.body}elementIsRemovable(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE)return this.elementIsForbidden(t)||this.elementIsntSerializable(t)}elementIsForbidden(t){return this.forbiddenElements.includes(Tt(t))}elementIsntSerializable(t){return t.getAttribute("data-trix-serialize")==="false"&&!Ze(t)}}const bd=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";i=i.replace(/<\/html[^>]*>[^]*$/i,"</html>");const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=i,Array.from(t.head.querySelectorAll("style")).forEach(e=>{t.body.appendChild(e)}),t.body},{css:ke}=si;class Ns extends on{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let t;const e=t=$({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),n=this.getHref();return n&&(t=$({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),e.appendChild(t)),this.attachment.hasContent()?Zi.setHTML(t,this.attachment.getContent()):this.createContentNodes().forEach(r=>{t.appendChild(r)}),t.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=$({tagName:"progress",attributes:{class:ke.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),e.appendChild(this.progressElement)),[wo("left"),e,wo("right")]}createCaptionElement(){const t=$({tagName:"figcaption",className:ke.attachmentCaption}),e=this.attachmentPiece.getCaption();if(e)t.classList.add("".concat(ke.attachmentCaption,"--edited")),t.textContent=e;else{let n,r;const s=this.getCaptionConfig();if(s.name&&(n=this.attachment.getFilename()),s.size&&(r=this.attachment.getFormattedFilesize()),n){const o=$({tagName:"span",className:ke.attachmentName,textContent:n});t.appendChild(o)}if(r){n&&t.appendChild(document.createTextNode(" "));const o=$({tagName:"span",className:ke.attachmentSize,textContent:r});t.appendChild(o)}}return t}getClassName(){const t=[ke.attachment,"".concat(ke.attachment,"--").concat(this.attachment.getType())],e=this.attachment.getExtension();return e&&t.push("".concat(ke.attachment,"--").concat(e)),t.join(" ")}getData(){const t={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:e}=this.attachmentPiece;return e.isEmpty()||(t.trixAttributes=JSON.stringify(e)),this.attachment.isPending()&&(t.trixSerialize=!1),t}getHref(){if(!Ad(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var t;const e=this.attachment.getType(),n=Wa((t=Ds[e])===null||t===void 0?void 0:t.caption);return e==="file"&&(n.name=!0),n}findProgressElement(){var t;return(t=this.findElement())===null||t===void 0?void 0:t.querySelector("progress")}attachmentDidChangeUploadProgress(){const t=this.attachment.getUploadProgress(),e=this.findProgressElement();e&&(e.value=t)}}const wo=i=>$({tagName:"span",textContent:Qi,data:{trixCursorTarget:i,trixSerialize:!1}}),Ad=function(i,t){const e=$("div");return Zi.setHTML(e,i||""),e.querySelector(t)};class Xa extends Ns{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=$({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){const t=super.createCaptionElement(...arguments);return t.textContent||t.setAttribute("data-trix-placeholder",U.captionPlaceholder),t}refresh(t){var e;if(t||(t=(e=this.findElement())===null||e===void 0?void 0:e.querySelector("img")),t)return this.updateAttributesForImage(t)}updateAttributesForImage(t){const e=this.attachment.getURL(),n=this.attachment.getPreviewURL();if(t.src=n||e,n===e)t.removeAttribute("data-trix-serialized-attributes");else{const a=JSON.stringify({src:e});t.setAttribute("data-trix-serialized-attributes",a)}const r=this.attachment.getWidth(),s=this.attachment.getHeight();r!=null&&(t.width=r),s!=null&&(t.height=s);const o=["imageElement",this.attachment.id,t.src,t.width,t.height].join("/");t.dataset.trixStoreKey=o}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}}class Qa extends on{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let t=this.attachment?this.createAttachmentNodes():this.createStringNodes();const e=this.createElement();if(e){const n=function(r){for(;(s=r)!==null&&s!==void 0&&s.firstElementChild;){var s;r=r.firstElementChild}return r}(e);Array.from(t).forEach(r=>{n.appendChild(r)}),t=[e]}return t}createAttachmentNodes(){const t=this.attachment.isPreviewable()?Xa:Ns;return this.createChildView(t,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var t;if((t=this.textConfig)!==null&&t!==void 0&&t.plaintext)return[document.createTextNode(this.string)];{const e=[],n=this.string.split(`
`);for(let r=0;r<n.length;r++){const s=n[r];if(r>0){const o=$("br");e.push(o)}if(s.length){const o=document.createTextNode(this.preserveSpaces(s));e.push(o)}}return e}}createElement(){let t,e,n;const r={};for(e in this.attributes){n=this.attributes[e];const o=fs(e);if(o){if(o.tagName){var s;const a=$(o.tagName);s?(s.appendChild(a),s=a):t=s=a}if(o.styleProperty&&(r[o.styleProperty]=n),o.style)for(e in o.style)n=o.style[e],r[e]=n}}if(Object.keys(r).length)for(e in t||(t=$("span")),r)n=r[e],t.style[e]=n;return t}createContainerElement(){for(const t in this.attributes){const e=this.attributes[t],n=fs(t);if(n&&n.groupTagName){const r={};return r[t]=e,$(n.groupTagName,r)}}}preserveSpaces(t){return this.context.isLast&&(t=t.replace(/\ $/,Te)),t=t.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(Te," $2")).replace(/\ {2}/g,"".concat(Te," ")).replace(/\ {2}/g," ".concat(Te)),(this.context.isFirst||this.context.followsWhitespace)&&(t=t.replace(/^\ /,Te)),t}}class Za extends on{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){const t=[],e=Is.groupObjects(this.getPieces()),n=e.length-1;for(let s=0;s<e.length;s++){const o=e[s],a={};s===0&&(a.isFirst=!0),s===n&&(a.isLast=!0),yd(r)&&(a.followsWhitespace=!0);const l=this.findOrCreateCachedChildView(Qa,o,{textConfig:this.textConfig,context:a});t.push(...Array.from(l.getNodes()||[]));var r=o}return t}getPieces(){return Array.from(this.text.getPieces()).filter(t=>!t.hasAttribute("blockBreak"))}}const yd=i=>/\s$/.test(i==null?void 0:i.toString()),{css:ko}=si;class tl extends on{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){const t=[document.createComment("block")];if(this.block.isEmpty())t.push($("br"));else{var e;const n=(e=ht(this.block.getLastAttribute()))===null||e===void 0?void 0:e.text,r=this.findOrCreateCachedChildView(Za,this.block.text,{textConfig:n});t.push(...Array.from(r.getNodes()||[])),this.shouldAddExtraNewlineElement()&&t.push($("br"))}if(this.attributes.length)return t;{let n;const{tagName:r}=Rt.default;this.block.isRTL()&&(n={dir:"rtl"});const s=$({tagName:r,attributes:n});return t.forEach(o=>s.appendChild(o)),[s]}}createContainerElement(t){const e={};let n;const r=this.attributes[t],{tagName:s,htmlAttributes:o=[]}=ht(r);if(t===0&&this.block.isRTL()&&Object.assign(e,{dir:"rtl"}),r==="attachmentGallery"){const a=this.block.getBlockBreakPosition();n="".concat(ko.attachmentGallery," ").concat(ko.attachmentGallery,"--").concat(a)}return Object.entries(this.block.htmlAttributes).forEach(a=>{let[l,c]=a;o.includes(l)&&(e[l]=c)}),$({tagName:s,className:n,attributes:e})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}}class tr extends on{static render(t){const e=$("div"),n=new this(t,{element:e});return n.render(),n.sync(),e}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new Wc,this.setDocument(this.object)}setDocument(t){t.isEqualTo(this.document)||(this.document=this.object=t)}render(){if(this.childViews=[],this.shadowElement=$("div"),!this.document.isEmpty()){const t=Is.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(t).forEach(e=>{const n=this.findOrCreateCachedChildView(tl,e);Array.from(n.getNodes()).map(r=>this.shadowElement.appendChild(r))})}}isSynced(){return Cd(this.shadowElement,this.element)}sync(){const t=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(t),this.didSync()}didSync(){return this.elementStore.reset(So(this.element)),Fs(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){const t=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(e=>{t.appendChild(e.cloneNode(!0))}),Array.from(So(t)).forEach(e=>{const n=this.elementStore.remove(e);n&&e.parentNode.replaceChild(n,e)}),t}}const So=i=>i.querySelectorAll("[data-trix-store-key]"),Cd=(i,t)=>Do(i.innerHTML)===Do(t.innerHTML),Do=i=>i.replace(/&nbsp;/g," ");function Ot(i,t,e){return(t=xd(t))in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function xd(i){var t=function(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,n);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}(i,"string");return typeof t=="symbol"?t:String(t)}function nt(i,t){return Ed(i,el(i,t,"get"))}function Bs(i,t,e){return wd(i,el(i,t,"set"),e),e}function el(i,t,e){if(!t.has(i))throw new TypeError("attempted to "+e+" private field on non-instance");return t.get(i)}function Ed(i,t){return t.get?t.get.call(i):t.value}function wd(i,t,e){if(t.set)t.set.call(i,e);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=e}}function vi(i,t,e){if(!t.has(i))throw new TypeError("attempted to get private field on non-instance");return e}function nl(i,t){if(t.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kn(i,t,e){nl(i,t),t.set(i,e)}class an extends sn{static registerType(t,e){e.type=t,this.types[t]=e}static fromJSON(t){const e=this.types[t.type];if(e)return e.fromJSON(t)}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Wt.box(e)}copyWithAttributes(t){return new this.constructor(this.getValue(),t)}copyWithAdditionalAttributes(t){return this.copyWithAttributes(this.attributes.merge(t))}copyWithoutAttribute(t){return this.copyWithAttributes(this.attributes.remove(t))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(t){return this.attributes.get(t)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(t){return this.attributes.has(t)}hasSameStringValueAsPiece(t){return t&&this.toString()===t.toString()}hasSameAttributesAsPiece(t){return t&&(this.attributes===t.attributes||this.attributes.isEqualTo(t.attributes))}isBlockBreak(){return!1}isEqualTo(t){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(t)&&this.hasSameStringValueAsPiece(t)&&this.hasSameAttributesAsPiece(t)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(t){return this.getAttribute("href")===t.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(t){return!1}}Ot(an,"types",{});class il extends Ni{constructor(t){super(...arguments),this.url=t}perform(t){const e=new Image;e.onload=()=>(e.width=this.width=e.naturalWidth,e.height=this.height=e.naturalHeight,t(!0,e)),e.onerror=()=>t(!1),e.src=this.url}}class En extends sn{static attachmentForFile(t){const e=new this(this.attributesForFile(t));return e.setFile(t),e}static attributesForFile(t){return new Wt({filename:t.name,filesize:t.size,contentType:t.type})}static fromJSON(t){return new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.releaseFile=this.releaseFile.bind(this),this.attributes=Wt.box(t),this.didChangeAttributes()}getAttribute(t){return this.attributes.get(t)}hasAttribute(t){return this.attributes.has(t)}getAttributes(){return this.attributes.toObject()}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=this.attributes.merge(t);var n,r,s,o;if(!this.attributes.isEqualTo(e))return this.attributes=e,this.didChangeAttributes(),(n=this.previewDelegate)===null||n===void 0||(r=n.attachmentDidChangeAttributes)===null||r===void 0||r.call(n,this),(s=this.delegate)===null||s===void 0||(o=s.attachmentDidChangeAttributes)===null||o===void 0?void 0:o.call(s,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):En.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){const t=this.attributes.get("filesize");return typeof t=="number"?Ia.formatter(t):""}getExtension(){var t;return(t=this.getFilename().match(/\.(\w+)$/))===null||t===void 0?void 0:t[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(t){if(this.file=t,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(t){var e,n;if(this.uploadProgress!==t)return this.uploadProgress=t,(e=this.uploadProgressDelegate)===null||e===void 0||(n=e.attachmentDidChangeUploadProgress)===null||n===void 0?void 0:n.call(e,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(t){var e,n,r,s;if(t!==this.getPreviewURL())return this.previewURL=t,(e=this.previewDelegate)===null||e===void 0||(n=e.attachmentDidChangeAttributes)===null||n===void 0||n.call(e,this),(r=this.delegate)===null||r===void 0||(s=r.attachmentDidChangePreviewURL)===null||s===void 0?void 0:s.call(r,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(t,e){if(t&&t!==this.getPreviewURL())return this.preloadingURL=t,new il(t).then(n=>{let{width:r,height:s}=n;return this.getWidth()&&this.getHeight()||this.setAttributes({width:r,height:s}),this.preloadingURL=null,this.setPreviewURL(t),e==null?void 0:e()}).catch(()=>(this.preloadingURL=null,e==null?void 0:e()))}}Ot(En,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);class An extends an{static fromJSON(t){return new this(En.fromJSON(t.attachment),t.attributes)}constructor(t){super(...arguments),this.attachment=t,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(t){this.hasAttribute(t)&&(this.attachment.hasAttribute(t)||this.attachment.setAttributes(this.attributes.slice([t])),this.attributes=this.attributes.remove(t))}removeProhibitedAttributes(){const t=this.attributes.slice(An.permittedAttributes);t.isEqualTo(this.attributes)||(this.attributes=t)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(t){var e;return super.isEqualTo(t)&&this.attachment.id===(t==null||(e=t.attachment)===null||e===void 0?void 0:e.id)}toString(){return"￼"}toJSON(){const t=super.toJSON(...arguments);return t.attachment=this.attachment,t}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}}Ot(An,"permittedAttributes",["caption","presentation"]),an.registerType("attachment",An);class Ps extends an{static fromJSON(t){return new this(t.string,t.attributes)}constructor(t){super(...arguments),this.string=(e=>e.replace(/\r\n?/g,`
`))(t),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){const t=super.toJSON(...arguments);return t.string=this.string,t}canBeConsolidatedWith(t){return t&&this.hasSameConstructorAs(t)&&this.hasSameAttributesAsPiece(t)}consolidateWith(t){return new this.constructor(this.toString()+t.toString(),this.attributes)}splitAtOffset(t){let e,n;return t===0?(e=null,n=this):t===this.length?(e=this,n=null):(e=new this.constructor(this.string.slice(0,t),this.attributes),n=new this.constructor(this.string.slice(t),this.attributes)),[e,n]}toConsole(){let{string:t}=this;return t.length>15&&(t=t.slice(0,14)+"…"),JSON.stringify(t.toString())}}an.registerType("string",Ps);class Pi extends sn{static box(t){return t instanceof this?t:new this(t)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=t.slice(0),this.length=this.objects.length}indexOf(t){return this.objects.indexOf(t)}splice(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new this.constructor(Os(this.objects,...e))}eachObject(t){return this.objects.map((e,n)=>t(e,n))}insertObjectAtIndex(t,e){return this.splice(e,0,t)}insertSplittableListAtIndex(t,e){return this.splice(e,0,...t.objects)}insertSplittableListAtPosition(t,e){const[n,r]=this.splitObjectAtPosition(e);return new this.constructor(n).insertSplittableListAtIndex(t,r)}editObjectAtIndex(t,e){return this.replaceObjectAtIndex(e(this.objects[t]),t)}replaceObjectAtIndex(t,e){return this.splice(e,1,t)}removeObjectAtIndex(t){return this.splice(t,1)}getObjectAtIndex(t){return this.objects[t]}getSplittableListInRange(t){const[e,n,r]=this.splitObjectsAtRange(t);return new this.constructor(e.slice(n,r+1))}selectSplittableList(t){const e=this.objects.filter(n=>t(n));return new this.constructor(e)}removeObjectsInRange(t){const[e,n,r]=this.splitObjectsAtRange(t);return new this.constructor(e).splice(n,r-n+1)}transformObjectsInRange(t,e){const[n,r,s]=this.splitObjectsAtRange(t),o=n.map((a,l)=>r<=l&&l<=s?e(a):a);return new this.constructor(o)}splitObjectsAtRange(t){let e,[n,r,s]=this.splitObjectAtPosition(Sd(t));return[n,e]=new this.constructor(n).splitObjectAtPosition(Dd(t)+s),[n,r,e-1]}getObjectAtPosition(t){const{index:e}=this.findIndexAndOffsetAtPosition(t);return this.objects[e]}splitObjectAtPosition(t){let e,n;const{index:r,offset:s}=this.findIndexAndOffsetAtPosition(t),o=this.objects.slice(0);if(r!=null)if(s===0)e=r,n=0;else{const a=this.getObjectAtIndex(r),[l,c]=a.splitAtOffset(s);o.splice(r,1,l,c),e=r+1,n=l.getLength()-s}else e=o.length,n=0;return[o,e,n]}consolidate(){const t=[];let e=this.objects[0];return this.objects.slice(1).forEach(n=>{var r,s;(r=(s=e).canBeConsolidatedWith)!==null&&r!==void 0&&r.call(s,n)?e=e.consolidateWith(n):(t.push(e),e=n)}),e&&t.push(e),new this.constructor(t)}consolidateFromIndexToIndex(t,e){const n=this.objects.slice(0).slice(t,e+1),r=new this.constructor(n).consolidate().toArray();return this.splice(t,n.length,...r)}findIndexAndOffsetAtPosition(t){let e,n=0;for(e=0;e<this.objects.length;e++){const r=n+this.objects[e].getLength();if(n<=t&&t<r)return{index:e,offset:t-n};n=r}return{index:null,offset:null}}findPositionAtIndexAndOffset(t,e){let n=0;for(let r=0;r<this.objects.length;r++){const s=this.objects[r];if(r<t)n+=s.getLength();else if(r===t){n+=e;break}}return n}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(t=>this.endPosition+=t.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(t){return super.isEqualTo(...arguments)||kd(this.objects,t==null?void 0:t.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(t=>t.inspect()).join(", "),"]")}}}const kd=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(i.length!==t.length)return!1;let e=!0;for(let n=0;n<i.length;n++){const r=i[n];e&&!r.isEqualTo(t[n])&&(e=!1)}return e},Sd=i=>i[0],Dd=i=>i[1];class Zt extends sn{static textForAttachmentWithAttributes(t,e){return new this([new An(t,e)])}static textForStringWithAttributes(t,e){return new this([new Ps(t,e)])}static fromJSON(t){return new this(Array.from(t).map(e=>an.fromJSON(e)))}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);const e=t.filter(n=>!n.isEmpty());this.pieceList=new Pi(e)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(t){return new this.constructor(t.consolidate().toArray())}copyUsingObjectMap(t){const e=this.getPieces().map(n=>t.find(n)||n);return new this.constructor(e)}appendText(t){return this.insertTextAtPosition(t,this.getLength())}insertTextAtPosition(t,e){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(t.pieceList,e))}removeTextAtRange(t){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(t))}replaceTextAtRange(t,e){return this.removeTextAtRange(e).insertTextAtPosition(t,e[0])}moveTextFromRangeToPosition(t,e){if(t[0]<=e&&e<=t[1])return;const n=this.getTextAtRange(t),r=n.getLength();return t[0]<e&&(e-=r),this.removeTextAtRange(t).insertTextAtPosition(n,e)}addAttributeAtRange(t,e,n){const r={};return r[t]=e,this.addAttributesAtRange(r,n)}addAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithAdditionalAttributes(t)))}removeAttributeAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithoutAttribute(t)))}setAttributesAtRange(t,e){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(e,n=>n.copyWithAttributes(t)))}getAttributesAtPosition(t){var e;return((e=this.pieceList.getObjectAtPosition(t))===null||e===void 0?void 0:e.getAttributes())||{}}getCommonAttributes(){const t=Array.from(this.pieceList.toArray()).map(e=>e.getAttributes());return Wt.fromCommonAttributesOfObjects(t).toObject()}getCommonAttributesAtRange(t){return this.getTextAtRange(t).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(t,e){let n,r=n=e;const s=this.getLength();for(;r>0&&this.getCommonAttributesAtRange([r-1,n])[t];)r--;for(;n<s&&this.getCommonAttributesAtRange([e,n+1])[t];)n++;return[r,n]}getTextAtRange(t){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(t))}getStringAtRange(t){return this.pieceList.getSplittableListInRange(t).toString()}getStringAtPosition(t){return this.getStringAtRange([t,t+1])}startsWithString(t){return this.getStringAtRange([0,t.length])===t}endsWithString(t){const e=this.getLength();return this.getStringAtRange([e-t.length,e])===t}getAttachmentPieces(){return this.pieceList.toArray().filter(t=>!!t.attachment)}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getAttachmentAndPositionById(t){let e=0;for(const r of this.pieceList.toArray()){var n;if(((n=r.attachment)===null||n===void 0?void 0:n.id)===t)return{attachment:r.attachment,position:e};e+=r.length}return{attachment:null,position:null}}getAttachmentById(t){const{attachment:e}=this.getAttachmentAndPositionById(t);return e}getRangeOfAttachment(t){const e=this.getAttachmentAndPositionById(t.id),n=e.position;if(t=e.attachment)return[n,n+1]}updateAttributesForAttachment(t,e){const n=this.getRangeOfAttachment(e);return n?this.addAttributesAtRange(t,n):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(t){var e;return super.isEqualTo(t)||(t==null||(e=t.pieceList)===null||e===void 0?void 0:e.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(t){return this.pieceList.eachObject(t)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(t){return this.pieceList.getObjectAtPosition(t)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){const t=this.pieceList.selectSplittableList(e=>e.isSerializable());return this.copyWithPieceList(t)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(t=>JSON.parse(t.toConsole())))}getDirection(){return Lc(this.toString())}isRTL(){return this.getDirection()==="rtl"}}class oe extends sn{static fromJSON(t){return new this(Zt.fromJSON(t.text),t.attributes,t.htmlAttributes)}constructor(t,e,n){super(...arguments),this.text=_d(t||new Zt),this.attributes=e||[],this.htmlAttributes=n||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(t){return!!super.isEqualTo(t)||this.text.isEqualTo(t==null?void 0:t.text)&&nn(this.attributes,t==null?void 0:t.attributes)&&xn(this.htmlAttributes,t==null?void 0:t.htmlAttributes)}copyWithText(t){return new oe(t,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(t){return new oe(this.text,t,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(t){const e=t.find(this.text);return e?this.copyWithText(e):this.copyWithText(this.text.copyUsingObjectMap(t))}addAttribute(t){const e=this.attributes.concat(_o(t));return this.copyWithAttributes(e)}addHTMLAttribute(t,e){const n=Object.assign({},this.htmlAttributes,{[t]:e});return new oe(this.text,this.attributes,n)}removeAttribute(t){const{listAttribute:e}=ht(t),n=Ro(Ro(this.attributes,t),e);return this.copyWithAttributes(n)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return To(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(t){return this.attributes[t-1]}hasAttribute(t){return this.attributes.includes(t)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return To(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(t=>ht(t).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){const t=this.getLastNestableAttribute();return t?this.removeAttribute(t):this}increaseNestingLevel(){const t=this.getLastNestableAttribute();if(t){const e=this.attributes.lastIndexOf(t),n=Os(this.attributes,e+1,0,..._o(t));return this.copyWithAttributes(n)}return this}getListItemAttributes(){return this.attributes.filter(t=>ht(t).listAttribute)}isListItem(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.listAttribute}isTerminalBlock(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.terminal}breaksOnReturn(){var t;return(t=ht(this.getLastAttribute()))===null||t===void 0?void 0:t.breakOnReturn}findLineBreakInDirectionFromPosition(t,e){const n=this.toString();let r;switch(t){case"forward":r=n.indexOf(`
`,e);break;case"backward":r=n.slice(0,e).lastIndexOf(`
`)}if(r!==-1)return r}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(t){return!this.hasAttributes()&&!t.hasAttributes()&&this.getDirection()===t.getDirection()}consolidateWith(t){const e=Zt.textForStringWithAttributes(`
`),n=this.getTextWithoutBlockBreak().appendText(e);return this.copyWithText(n.appendText(t.text))}splitAtOffset(t){let e,n;return t===0?(e=null,n=this):t===this.getLength()?(e=this,n=null):(e=this.copyWithText(this.text.getTextAtRange([0,t])),n=this.copyWithText(this.text.getTextAtRange([t,this.getLength()]))),[e,n]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return rl(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(t){return this.attributes[t]}canBeGroupedWith(t,e){const n=t.getAttributes(),r=n[e],s=this.attributes[e];return s===r&&!(ht(s).group===!1&&!(()=>{if(!pi){pi=[];for(const o in Rt){const{listAttribute:a}=Rt[o];a!=null&&pi.push(a)}}return pi})().includes(n[e+1]))&&(this.getDirection()===t.getDirection()||t.isEmpty())}}const _d=function(i){return i=Td(i),i=Od(i)},Td=function(i){let t=!1;const e=i.getPieces();let n=e.slice(0,e.length-1);const r=e[e.length-1];return r?(n=n.map(s=>s.isBlockBreak()?(t=!0,Fd(s)):s),t?new Zt([...n,r]):i):i},Rd=Zt.textForStringWithAttributes(`
`,{blockBreak:!0}),Od=function(i){return rl(i)?i:i.appendText(Rd)},rl=function(i){const t=i.getLength();return t===0?!1:i.getTextAtRange([t-1,t]).isBlockBreak()},Fd=i=>i.copyWithoutAttribute("blockBreak"),_o=function(i){const{listAttribute:t}=ht(i);return t?[t,i]:[i]},To=i=>i.slice(-1)[0],Ro=function(i,t){const e=i.lastIndexOf(t);return e===-1?i:Os(i,e,1)};class zt extends sn{static fromJSON(t){return new this(Array.from(t).map(e=>oe.fromJSON(e)))}static fromString(t,e){const n=Zt.textForStringWithAttributes(t,e);return new this([new oe(n)])}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),t.length===0&&(t=[new oe]),this.blockList=Pi.box(t)}isEmpty(){const t=this.getBlockAtIndex(0);return this.blockList.length===1&&t.isEmpty()&&!t.hasAttributes()}copy(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(t)}copyUsingObjectsFromDocument(t){const e=new Uc(t.getObjects());return this.copyUsingObjectMap(e)}copyUsingObjectMap(t){const e=this.getBlocks().map(n=>t.find(n)||n.copyUsingObjectMap(t));return new this.constructor(e)}copyWithBaseBlockAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.getBlocks().map(n=>{const r=t.concat(n.getAttributes());return n.copyWithAttributes(r)});return new this.constructor(e)}replaceBlock(t,e){const n=this.blockList.indexOf(t);return n===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(e,n))}insertDocumentAtRange(t,e){const{blockList:n}=t;e=et(e);let[r]=e;const{index:s,offset:o}=this.locationFromPosition(r);let a=this;const l=this.getBlockAtPosition(r);return me(e)&&l.isEmpty()&&!l.hasAttributes()?a=new this.constructor(a.blockList.removeObjectAtIndex(s)):l.getBlockBreakPosition()===o&&r++,a=a.removeTextAtRange(e),new this.constructor(a.blockList.insertSplittableListAtPosition(n,r))}mergeDocumentAtRange(t,e){let n,r;e=et(e);const[s]=e,o=this.locationFromPosition(s),a=this.getBlockAtIndex(o.index).getAttributes(),l=t.getBaseBlockAttributes(),c=a.slice(-l.length);if(nn(l,c)){const m=a.slice(0,-l.length);n=t.copyWithBaseBlockAttributes(m)}else n=t.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(a);const h=n.getBlockCount(),p=n.getBlockAtIndex(0);if(nn(a,p.getAttributes())){const m=p.getTextWithoutBlockBreak();if(r=this.insertTextAtRange(m,e),h>1){n=new this.constructor(n.getBlocks().slice(1));const k=s+m.getLength();r=r.insertDocumentAtRange(n,k)}}else r=this.insertDocumentAtRange(n,e);return r}insertTextAtRange(t,e){e=et(e);const[n]=e,{index:r,offset:s}=this.locationFromPosition(n),o=this.removeTextAtRange(e);return new this.constructor(o.blockList.editObjectAtIndex(r,a=>a.copyWithText(a.text.insertTextAtPosition(t,s))))}removeTextAtRange(t){let e;t=et(t);const[n,r]=t;if(me(t))return this;const[s,o]=Array.from(this.locationRangeFromRange(t)),a=s.index,l=s.offset,c=this.getBlockAtIndex(a),h=o.index,p=o.offset,m=this.getBlockAtIndex(h);if(r-n==1&&c.getBlockBreakPosition()===l&&m.getBlockBreakPosition()!==p&&m.text.getStringAtPosition(p)===`
`)e=this.blockList.editObjectAtIndex(h,k=>k.copyWithText(k.text.removeTextAtRange([p,p+1])));else{let k;const v=c.text.getTextAtRange([0,l]),y=m.text.getTextAtRange([p,m.getLength()]),C=v.appendText(y);k=a!==h&&l===0&&c.getAttributeLevel()>=m.getAttributeLevel()?m.copyWithText(C):c.copyWithText(C);const R=h+1-a;e=this.blockList.splice(a,R,k)}return new this.constructor(e)}moveTextFromRangeToPosition(t,e){let n;t=et(t);const[r,s]=t;if(r<=e&&e<=s)return this;let o=this.getDocumentAtRange(t),a=this.removeTextAtRange(t);const l=r<e;l&&(e-=o.getLength());const[c,...h]=o.getBlocks();return h.length===0?(n=c.getTextWithoutBlockBreak(),l&&(e+=1)):n=c.text,a=a.insertTextAtRange(n,e),h.length===0?a:(o=new this.constructor(h),e+=n.getLength(),a.insertDocumentAtRange(o,e))}addAttributeAtRange(t,e,n){let{blockList:r}=this;return this.eachBlockAtRange(n,(s,o,a)=>r=r.editObjectAtIndex(a,function(){return ht(t)?s.addAttribute(t,e):o[0]===o[1]?s:s.copyWithText(s.text.addAttributeAtRange(t,e,o))})),new this.constructor(r)}addAttribute(t,e){let{blockList:n}=this;return this.eachBlock((r,s)=>n=n.editObjectAtIndex(s,()=>r.addAttribute(t,e))),new this.constructor(n)}removeAttributeAtRange(t,e){let{blockList:n}=this;return this.eachBlockAtRange(e,function(r,s,o){ht(t)?n=n.editObjectAtIndex(o,()=>r.removeAttribute(t)):s[0]!==s[1]&&(n=n.editObjectAtIndex(o,()=>r.copyWithText(r.text.removeAttributeAtRange(t,s))))}),new this.constructor(n)}updateAttributesForAttachment(t,e){const n=this.getRangeOfAttachment(e),[r]=Array.from(n),{index:s}=this.locationFromPosition(r),o=this.getTextAtIndex(s);return new this.constructor(this.blockList.editObjectAtIndex(s,a=>a.copyWithText(o.updateAttributesForAttachment(t,e))))}removeAttributeForAttachment(t,e){const n=this.getRangeOfAttachment(e);return this.removeAttributeAtRange(t,n)}setHTMLAttributeAtPosition(t,e,n){const r=this.getBlockAtPosition(t),s=r.addHTMLAttribute(e,n);return this.replaceBlock(r,s)}insertBlockBreakAtRange(t){let e;t=et(t);const[n]=t,{offset:r}=this.locationFromPosition(n),s=this.removeTextAtRange(t);return r===0&&(e=[new oe]),new this.constructor(s.blockList.insertSplittableListAtPosition(new Pi(e),n))}applyBlockAttributeAtRange(t,e,n){const r=this.expandRangeToLineBreaksAndSplitBlocks(n);let s=r.document;n=r.range;const o=ht(t);if(o.listAttribute){s=s.removeLastListAttributeAtRange(n,{exceptAttributeName:t});const a=s.convertLineBreaksToBlockBreaksInRange(n);s=a.document,n=a.range}else s=o.exclusive?s.removeBlockAttributesAtRange(n):o.terminal?s.removeLastTerminalAttributeAtRange(n):s.consolidateBlocksAtRange(n);return s.addAttributeAtRange(t,e,n)}removeLastListAttributeAtRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:n}=this;return this.eachBlockAtRange(t,function(r,s,o){const a=r.getLastAttribute();a&&ht(a).listAttribute&&a!==e.exceptAttributeName&&(n=n.editObjectAtIndex(o,()=>r.removeAttribute(a)))}),new this.constructor(n)}removeLastTerminalAttributeAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(n,r,s){const o=n.getLastAttribute();o&&ht(o).terminal&&(e=e.editObjectAtIndex(s,()=>n.removeAttribute(o)))}),new this.constructor(e)}removeBlockAttributesAtRange(t){let{blockList:e}=this;return this.eachBlockAtRange(t,function(n,r,s){n.hasAttributes()&&(e=e.editObjectAtIndex(s,()=>n.copyWithoutAttributes()))}),new this.constructor(e)}expandRangeToLineBreaksAndSplitBlocks(t){let e;t=et(t);let[n,r]=t;const s=this.locationFromPosition(n),o=this.locationFromPosition(r);let a=this;const l=a.getBlockAtIndex(s.index);if(s.offset=l.findLineBreakInDirectionFromPosition("backward",s.offset),s.offset!=null&&(e=a.positionFromLocation(s),a=a.insertBlockBreakAtRange([e,e+1]),o.index+=1,o.offset-=a.getBlockAtIndex(s.index).getLength(),s.index+=1),s.offset=0,o.offset===0&&o.index>s.index)o.index-=1,o.offset=a.getBlockAtIndex(o.index).getBlockBreakPosition();else{const c=a.getBlockAtIndex(o.index);c.text.getStringAtRange([o.offset-1,o.offset])===`
`?o.offset-=1:o.offset=c.findLineBreakInDirectionFromPosition("forward",o.offset),o.offset!==c.getBlockBreakPosition()&&(e=a.positionFromLocation(o),a=a.insertBlockBreakAtRange([e,e+1]))}return n=a.positionFromLocation(s),r=a.positionFromLocation(o),{document:a,range:t=et([n,r])}}convertLineBreaksToBlockBreaksInRange(t){t=et(t);let[e]=t;const n=this.getStringAtRange(t).slice(0,-1);let r=this;return n.replace(/.*?\n/g,function(s){e+=s.length,r=r.insertBlockBreakAtRange([e-1,e])}),{document:r,range:t}}consolidateBlocksAtRange(t){t=et(t);const[e,n]=t,r=this.locationFromPosition(e).index,s=this.locationFromPosition(n).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(r,s))}getDocumentAtRange(t){t=et(t);const e=this.blockList.getSplittableListInRange(t).toArray();return new this.constructor(e)}getStringAtRange(t){let e;const n=t=et(t);return n[n.length-1]!==this.getLength()&&(e=-1),this.getDocumentAtRange(t).toString().slice(0,e)}getBlockAtIndex(t){return this.blockList.getObjectAtIndex(t)}getBlockAtPosition(t){const{index:e}=this.locationFromPosition(t);return this.getBlockAtIndex(e)}getTextAtIndex(t){var e;return(e=this.getBlockAtIndex(t))===null||e===void 0?void 0:e.text}getTextAtPosition(t){const{index:e}=this.locationFromPosition(t);return this.getTextAtIndex(e)}getPieceAtPosition(t){const{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getPieceAtPosition(n)}getCharacterAtPosition(t){const{index:e,offset:n}=this.locationFromPosition(t);return this.getTextAtIndex(e).getStringAtRange([n,n+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(t){return this.blockList.eachObject(t)}eachBlockAtRange(t,e){let n,r;t=et(t);const[s,o]=t,a=this.locationFromPosition(s),l=this.locationFromPosition(o);if(a.index===l.index)return n=this.getBlockAtIndex(a.index),r=[a.offset,l.offset],e(n,r,a.index);for(let c=a.index;c<=l.index;c++)if(n=this.getBlockAtIndex(c),n){switch(c){case a.index:r=[a.offset,n.text.getLength()];break;case l.index:r=[0,l.offset];break;default:r=[0,n.text.getLength()]}e(n,r,c)}}getCommonAttributesAtRange(t){t=et(t);const[e]=t;if(me(t))return this.getCommonAttributesAtPosition(e);{const n=[],r=[];return this.eachBlockAtRange(t,function(s,o){if(o[0]!==o[1])return n.push(s.text.getCommonAttributesAtRange(o)),r.push(Oo(s))}),Wt.fromCommonAttributesOfObjects(n).merge(Wt.fromCommonAttributesOfObjects(r)).toObject()}}getCommonAttributesAtPosition(t){let e,n;const{index:r,offset:s}=this.locationFromPosition(t),o=this.getBlockAtIndex(r);if(!o)return{};const a=Oo(o),l=o.text.getAttributesAtPosition(s),c=o.text.getAttributesAtPosition(s-1),h=Object.keys(en).filter(p=>en[p].inheritable);for(e in c)n=c[e],(n===l[e]||h.includes(e))&&(a[e]=n);return a}getRangeOfCommonAttributeAtPosition(t,e){const{index:n,offset:r}=this.locationFromPosition(e),s=this.getTextAtIndex(n),[o,a]=Array.from(s.getExpandedRangeForAttributeAtOffset(t,r)),l=this.positionFromLocation({index:n,offset:o}),c=this.positionFromLocation({index:n,offset:a});return et([l,c])}getBaseBlockAttributes(){let t=this.getBlockAtIndex(0).getAttributes();for(let e=1;e<this.getBlockCount();e++){const n=this.getBlockAtIndex(e).getAttributes(),r=Math.min(t.length,n.length);t=(()=>{const s=[];for(let o=0;o<r&&n[o]===t[o];o++)s.push(n[o]);return s})()}return t}getAttachmentById(t){for(const e of this.getAttachments())if(e.id===t)return e}getAttachmentPieces(){let t=[];return this.blockList.eachObject(e=>{let{text:n}=e;return t=t.concat(n.getAttachmentPieces())}),t}getAttachments(){return this.getAttachmentPieces().map(t=>t.attachment)}getRangeOfAttachment(t){let e=0;const n=this.blockList.toArray();for(let r=0;r<n.length;r++){const{text:s}=n[r],o=s.getRangeOfAttachment(t);if(o)return et([e+o[0],e+o[1]]);e+=s.getLength()}}getLocationRangeOfAttachment(t){const e=this.getRangeOfAttachment(t);return this.locationRangeFromRange(e)}getAttachmentPieceForAttachment(t){for(const e of this.getAttachmentPieces())if(e.attachment===t)return e}findRangesForBlockAttribute(t){let e=0;const n=[];return this.getBlocks().forEach(r=>{const s=r.getLength();r.hasAttribute(t)&&n.push([e,e+s]),e+=s}),n}findRangesForTextAttribute(t){let{withValue:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=0,r=[];const s=[];return this.getPieces().forEach(o=>{const a=o.getLength();(function(l){return e?l.getAttribute(t)===e:l.hasAttribute(t)})(o)&&(r[1]===n?r[1]=n+a:s.push(r=[n,n+a])),n+=a}),s}locationFromPosition(t){const e=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,t));if(e.index!=null)return e;{const n=this.getBlocks();return{index:n.length-1,offset:n[n.length-1].getLength()}}}positionFromLocation(t){return this.blockList.findPositionAtIndexAndOffset(t.index,t.offset)}locationRangeFromPosition(t){return et(this.locationFromPosition(t))}locationRangeFromRange(t){if(!(t=et(t)))return;const[e,n]=Array.from(t),r=this.locationFromPosition(e),s=this.locationFromPosition(n);return et([r,s])}rangeFromLocationRange(t){let e;t=et(t);const n=this.positionFromLocation(t[0]);return me(t)||(e=this.positionFromLocation(t[1])),et([n,e])}isEqualTo(t){return this.blockList.isEqualTo(t==null?void 0:t.blockList)}getTexts(){return this.getBlocks().map(t=>t.text)}getPieces(){const t=[];return Array.from(this.getTexts()).forEach(e=>{t.push(...Array.from(e.getPieces()||[]))}),t}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){const t=[];return this.blockList.eachObject(e=>t.push(e.copyWithText(e.text.toSerializableText()))),new this.constructor(t)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(t=>JSON.parse(t.text.toConsole())))}}const Oo=function(i){const t={},e=i.getLastAttribute();return e&&(t[e]=!0),t},Br=function(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:i=Hn(i),attributes:t,type:"string"}},Fo=(i,t)=>{try{return JSON.parse(i.getAttribute("data-trix-".concat(t)))}catch{return{}}};class Zn extends mt{static parse(t,e){const n=new this(t,e);return n.parse(),n}constructor(t){let{referenceElement:e,purifyOptions:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=t,this.referenceElement=e,this.purifyOptions=n,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return zt.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),Zi.setHTML(this.containerElement,this.html,{purifyOptions:this.purifyOptions});const t=Mi(this.containerElement,{usingFilter:Md});for(;t.nextNode();)this.processNode(t.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=$({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return Fe(this.containerElement)}processNode(t){switch(t.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(t))return this.appendBlockForTextNode(t),this.processTextNode(t);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(t),this.processElement(t)}}appendBlockForTextNode(t){const e=t.parentNode;if(e===this.currentBlockElement&&this.isBlockElement(t.previousSibling))return this.appendStringWithAttributes(`
`);if(e===this.containerElement||this.isBlockElement(e)){var n;const r=this.getBlockAttributes(e),s=this.getBlockHTMLAttributes(e);nn(r,(n=this.currentBlock)===null||n===void 0?void 0:n.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(r,e,s),this.currentBlockElement=e)}}appendBlockForElement(t){const e=this.isBlockElement(t),n=Je(this.currentBlockElement,t);if(e&&!this.isBlockElement(t.firstChild)){if(!this.isInsignificantTextNode(t.firstChild)||!this.isBlockElement(t.firstElementChild)){const r=this.getBlockAttributes(t),s=this.getBlockHTMLAttributes(t);if(t.firstChild){if(n&&nn(r,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(r,t,s),this.currentBlockElement=t}}}else if(this.currentBlockElement&&!n&&!e){const r=this.findParentBlockElement(t);if(r)return this.appendBlockForElement(r);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(t){let{parentElement:e}=t;for(;e&&e!==this.containerElement;){if(this.isBlockElement(e)&&this.blockElements.includes(e))return e;e=e.parentElement}return null}processTextNode(t){let e=t.data;var n;return Lo(t.parentNode)||(e=Ms(e),sl((n=t.previousSibling)===null||n===void 0?void 0:n.textContent)&&(e=Id(e))),this.appendStringWithAttributes(e,this.getTextAttributes(t.parentNode))}processElement(t){let e;if(Ze(t)){if(e=Fo(t,"attachment"),Object.keys(e).length){const n=this.getTextAttributes(t);this.appendAttachmentWithAttributes(e,n),t.innerHTML=""}return this.processedElements.push(t)}switch(Tt(t)){case"br":return this.isExtraBR(t)||this.isBlockElement(t.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(t)),this.processedElements.push(t);case"img":e={url:t.getAttribute("src"),contentType:"image"};const n=(r=>{const s=r.getAttribute("width"),o=r.getAttribute("height"),a={};return s&&(a.width=parseInt(s,10)),o&&(a.height=parseInt(o,10)),a})(t);for(const r in n){const s=n[r];e[r]=s}return this.appendAttachmentWithAttributes(e,this.getTextAttributes(t)),this.processedElements.push(t);case"tr":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(Si.tableRowSeparator);break;case"td":if(this.needsTableSeparator(t))return this.appendStringWithAttributes(Si.tableCellSeparator)}}appendBlockForAttributesWithElement(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(e);const r=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(t,n);return this.blocks.push(r),r}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(t,e){return this.appendPiece(Br(t,e))}appendAttachmentWithAttributes(t,e){return this.appendPiece(function(n){return{attachment:n,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(t,e))}appendPiece(t){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(t)}appendStringToTextAtIndex(t,e){const{text:n}=this.blocks[e],r=n[n.length-1];if((r==null?void 0:r.type)!=="string")return n.push(Br(t));r.string+=t}prependStringToTextAtIndex(t,e){const{text:n}=this.blocks[e],r=n[0];if((r==null?void 0:r.type)!=="string")return n.unshift(Br(t));r.string=t+r.string}getTextAttributes(t){let e;const n={};for(const r in en){const s=en[r];if(s.tagName&&Oe(t,{matchingSelector:s.tagName,untilNode:this.containerElement}))n[r]=!0;else if(s.parser){if(e=s.parser(t),e){let o=!1;for(const a of this.findBlockElementAncestors(t))if(s.parser(a)===e){o=!0;break}o||(n[r]=e)}}else s.styleProperty&&(e=t.style[s.styleProperty],e&&(n[r]=e))}if(Ze(t)){const r=Fo(t,"attributes");for(const s in r)e=r[s],n[s]=e}return n}getBlockAttributes(t){const e=[];for(;t&&t!==this.containerElement;){for(const r in Rt){const s=Rt[r];var n;s.parse!==!1&&Tt(t)===s.tagName&&((n=s.test)!==null&&n!==void 0&&n.call(s,t)||!s.test)&&(e.push(r),s.listAttribute&&e.push(s.listAttribute))}t=t.parentNode}return e.reverse()}getBlockHTMLAttributes(t){const e={},n=Object.values(Rt).find(r=>r.tagName===Tt(t));return((n==null?void 0:n.htmlAttributes)||[]).forEach(r=>{t.hasAttribute(r)&&(e[r]=t.getAttribute(r))}),e}findBlockElementAncestors(t){const e=[];for(;t&&t!==this.containerElement;){const n=Tt(t);qn().includes(n)&&e.push(t),t=t.parentNode}return e}isBlockElement(t){if((t==null?void 0:t.nodeType)===Node.ELEMENT_NODE&&!Ze(t)&&!Oe(t,{matchingSelector:"td",untilNode:this.containerElement}))return qn().includes(Tt(t))||window.getComputedStyle(t).display==="block"}isInsignificantTextNode(t){if((t==null?void 0:t.nodeType)!==Node.TEXT_NODE||!Nd(t.data))return;const{parentNode:e,previousSibling:n,nextSibling:r}=t;return Ld(e.previousSibling)&&!this.isBlockElement(e.previousSibling)||Lo(e)?void 0:!n||this.isBlockElement(n)||!r||this.isBlockElement(r)}isExtraBR(t){return Tt(t)==="br"&&this.isBlockElement(t.parentNode)&&t.parentNode.lastChild===t}needsTableSeparator(t){if(Si.removeBlankTableCells){var e;const n=(e=t.previousSibling)===null||e===void 0?void 0:e.textContent;return n&&/\S/.test(n)}return t.previousSibling}translateBlockElementMarginsToNewlines(){const t=this.getMarginOfDefaultBlockElement();for(let e=0;e<this.blocks.length;e++){const n=this.getMarginOfBlockElementAtIndex(e);n&&(n.top>2*t.top&&this.prependStringToTextAtIndex(`
`,e),n.bottom>2*t.bottom&&this.appendStringToTextAtIndex(`
`,e))}}getMarginOfBlockElementAtIndex(t){const e=this.blockElements[t];if(e&&e.textContent&&!qn().includes(Tt(e))&&!this.processedElements.includes(e))return Mo(e)}getMarginOfDefaultBlockElement(){const t=$(Rt.default.tagName);return this.containerElement.appendChild(t),Mo(t)}}const Lo=function(i){const{whiteSpace:t}=window.getComputedStyle(i);return["pre","pre-wrap","pre-line"].includes(t)},Ld=i=>i&&!sl(i.textContent),Mo=function(i){const t=window.getComputedStyle(i);if(t.display==="block")return{top:parseInt(t.marginTop),bottom:parseInt(t.marginBottom)}},Md=function(i){return Tt(i)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},Id=i=>i.replace(new RegExp("^".concat(Ls.source,"+")),""),Nd=i=>new RegExp("^".concat(Ls.source,"*$")).test(i),sl=i=>/\s$/.test(i),Bd=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],vs="data-trix-serialized-attributes",Pd="[".concat(vs,"]"),Vd=new RegExp("<!--block-->","g"),jd={"application/json":function(i){let t;if(i instanceof zt)t=i;else{if(!(i instanceof HTMLElement))throw new Error("unserializable object");t=Zn.parse(i.innerHTML).getDocument()}return t.toSerializableDocument().toJSONString()},"text/html":function(i){let t;if(i instanceof zt)t=tr.render(i);else{if(!(i instanceof HTMLElement))throw new Error("unserializable object");t=i.cloneNode(!0)}return Array.from(t.querySelectorAll("[data-trix-serialize=false]")).forEach(e=>{Fe(e)}),Bd.forEach(e=>{Array.from(t.querySelectorAll("[".concat(e,"]"))).forEach(n=>{n.removeAttribute(e)})}),Array.from(t.querySelectorAll(Pd)).forEach(e=>{try{const n=JSON.parse(e.getAttribute(vs));e.removeAttribute(vs);for(const r in n){const s=n[r];e.setAttribute(r,s)}}catch{}}),t.innerHTML.replace(Vd,"")}};var Hd=Object.freeze({__proto__:null});class dt extends mt{constructor(t,e){super(...arguments),this.attachmentManager=t,this.attachment=e,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}}dt.proxyMethod("attachment.getAttribute"),dt.proxyMethod("attachment.hasAttribute"),dt.proxyMethod("attachment.setAttribute"),dt.proxyMethod("attachment.getAttributes"),dt.proxyMethod("attachment.setAttributes"),dt.proxyMethod("attachment.isPending"),dt.proxyMethod("attachment.isPreviewable"),dt.proxyMethod("attachment.getURL"),dt.proxyMethod("attachment.getHref"),dt.proxyMethod("attachment.getFilename"),dt.proxyMethod("attachment.getFilesize"),dt.proxyMethod("attachment.getFormattedFilesize"),dt.proxyMethod("attachment.getExtension"),dt.proxyMethod("attachment.getContentType"),dt.proxyMethod("attachment.getFile"),dt.proxyMethod("attachment.setFile"),dt.proxyMethod("attachment.releaseFile"),dt.proxyMethod("attachment.getUploadProgress"),dt.proxyMethod("attachment.setUploadProgress");class ol extends mt{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(t).forEach(e=>{this.manageAttachment(e)})}getAttachments(){const t=[];for(const e in this.managedAttachments){const n=this.managedAttachments[e];t.push(n)}return t}manageAttachment(t){return this.managedAttachments[t.id]||(this.managedAttachments[t.id]=new dt(this,t)),this.managedAttachments[t.id]}attachmentIsManaged(t){return t.id in this.managedAttachments}requestRemovalOfAttachment(t){var e,n;if(this.attachmentIsManaged(t))return(e=this.delegate)===null||e===void 0||(n=e.attachmentManagerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(e,t)}unmanageAttachment(t){const e=this.managedAttachments[t.id];return delete this.managedAttachments[t.id],e}}class al{constructor(t){this.composition=t,this.document=this.composition.document;const e=this.composition.getSelectedRange();this.startPosition=e[0],this.endPosition=e[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}}class _e extends mt{constructor(){super(...arguments),this.document=new zt,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(t){var e,n;if(!t.isEqualTo(this.document))return this.document=t,this.refreshAttachments(),this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidChangeDocument)===null||n===void 0?void 0:n.call(e,t)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(t){var e,n,r,s;let{document:o,selectedRange:a}=t;return(e=this.delegate)===null||e===void 0||(n=e.compositionWillLoadSnapshot)===null||n===void 0||n.call(e),this.setDocument(o??new zt),this.setSelection(a??[0,0]),(r=this.delegate)===null||r===void 0||(s=r.compositionDidLoadSnapshot)===null||s===void 0?void 0:s.call(r)}insertText(t){let{updatePosition:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0};const n=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(t,n));const r=n[0],s=r+t.getLength();return e&&this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}insertBlock(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new oe;const e=new zt([t]);return this.insertDocument(e)}insertDocument(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new zt;const e=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(t,e));const n=e[0],r=n+t.getLength();return this.setSelection(r),this.notifyDelegateOfInsertionAtRange([n,r])}insertString(t,e){const n=this.getCurrentTextAttributes(),r=Zt.textForStringWithAttributes(t,n);return this.insertText(r,e)}insertBlockBreak(){const t=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(t));const e=t[0],n=e+1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([e,n])}insertLineBreak(){const t=new al(this);if(t.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(t.startPosition);if(t.shouldPrependListItem()){const e=new zt([t.block.copyWithoutText()]);return this.insertDocument(e)}return t.shouldInsertBlockBreak()?this.insertBlockBreak():t.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():t.shouldBreakFormattedBlock()?this.breakFormattedBlock(t):this.insertString(`
`)}insertHTML(t){const e=Zn.parse(t,{purifyOptions:{SAFE_FOR_XML:!0}}).getDocument(),n=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(e,n));const r=n[0],s=r+e.getLength()-1;return this.setSelection(s),this.notifyDelegateOfInsertionAtRange([r,s])}replaceHTML(t){const e=Zn.parse(t).getDocument().copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),r=this.document.rangeFromLocationRange(n);return this.setDocument(e),this.setSelection(r)}insertFile(t){return this.insertFiles([t])}insertFiles(t){const e=[];return Array.from(t).forEach(n=>{var r;if((r=this.delegate)!==null&&r!==void 0&&r.compositionShouldAcceptFile(n)){const s=En.attachmentForFile(n);e.push(s)}}),this.insertAttachments(e)}insertAttachment(t){return this.insertAttachments([t])}insertAttachments(t){let e=new Zt;return Array.from(t).forEach(n=>{var r;const s=n.getType(),o=(r=Ds[s])===null||r===void 0?void 0:r.presentation,a=this.getCurrentTextAttributes();o&&(a.presentation=o);const l=Zt.textForAttachmentWithAttributes(n,a);e=e.appendText(l)}),this.insertText(e)}shouldManageDeletingInDirection(t){const e=this.getLocationRange();if(me(e)){if(t==="backward"&&e[0].offset===0||this.shouldManageMovingCursorInDirection(t))return!0}else if(e[0].index!==e[1].index)return!0;return!1}deleteInDirection(t){let e,n,r,{length:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=this.getLocationRange();let a=this.getSelectedRange();const l=me(a);if(l?n=t==="backward"&&o[0].offset===0:r=o[0].index!==o[1].index,n&&this.canDecreaseBlockAttributeLevel()){const c=this.getBlock();if(c.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(a[0]),c.isEmpty())return!1}return l&&(a=this.getExpandedRangeInDirection(t,{length:s}),t==="backward"&&(e=this.getAttachmentAtRange(a))),e?(this.editAttachment(e),!1):(this.setDocument(this.document.removeTextAtRange(a)),this.setSelection(a[0]),!n&&!r&&void 0)}moveTextFromRange(t){const[e]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(t,e)),this.setSelection(e)}removeAttachment(t){const e=this.document.getRangeOfAttachment(t);if(e)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(e)),this.setSelection(e[0])}removeLastBlockAttribute(){const[t,e]=Array.from(this.getSelectedRange()),n=this.document.getBlockAtPosition(e);return this.removeCurrentAttribute(n.getLastAttribute()),this.setSelection(t)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(t){const e=this.currentAttributes[t];return e!=null&&e!==!1}toggleCurrentAttribute(t){const e=!this.currentAttributes[t];return e?this.setCurrentAttribute(t,e):this.removeCurrentAttribute(t)}canSetCurrentAttribute(t){return ht(t)?this.canSetCurrentBlockAttribute(t):this.canSetCurrentTextAttribute(t)}canSetCurrentTextAttribute(t){const e=this.getSelectedDocument();if(e){for(const n of Array.from(e.getAttachments()))if(!n.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(t){const e=this.getBlock();if(e)return!e.isTerminalBlock()}setCurrentAttribute(t,e){return ht(t)?this.setBlockAttribute(t,e):(this.setTextAttribute(t,e),this.currentAttributes[t]=e,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(t,e,n){var r;const s=this.document.getBlockAtPosition(t),o=(r=ht(s.getLastAttribute()))===null||r===void 0?void 0:r.htmlAttributes;if(s&&o!=null&&o.includes(e)){const a=this.document.setHTMLAttributeAtPosition(t,e,n);this.setDocument(a)}}setTextAttribute(t,e){const n=this.getSelectedRange();if(!n)return;const[r,s]=Array.from(n);if(r!==s)return this.setDocument(this.document.addAttributeAtRange(t,e,n));if(t==="href"){const o=Zt.textForStringWithAttributes(e,{href:e});return this.insertText(o)}}setBlockAttribute(t,e){const n=this.getSelectedRange();if(this.canSetCurrentAttribute(t))return this.setDocument(this.document.applyBlockAttributeAtRange(t,e,n)),this.setSelection(n)}removeCurrentAttribute(t){return ht(t)?(this.removeBlockAttribute(t),this.updateCurrentAttributes()):(this.removeTextAttribute(t),delete this.currentAttributes[t],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(t){const e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}removeBlockAttribute(t){const e=this.getSelectedRange();if(e)return this.setDocument(this.document.removeAttributeAtRange(t,e))}canDecreaseNestingLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getNestingLevel())>0}canIncreaseNestingLevel(){var t;const e=this.getBlock();if(e){if((t=ht(e.getLastNestableAttribute()))===null||t===void 0||!t.listAttribute)return e.getNestingLevel()>0;{const n=this.getPreviousBlock();if(n)return function(){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return nn((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,r.length),r)}(n.getListItemAttributes(),e.getListItemAttributes())}}}decreaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.decreaseNestingLevel()))}increaseNestingLevel(){const t=this.getBlock();if(t)return this.setDocument(this.document.replaceBlock(t,t.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var t;return((t=this.getBlock())===null||t===void 0?void 0:t.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var t;const e=(t=this.getBlock())===null||t===void 0?void 0:t.getLastAttribute();if(e)return this.removeCurrentAttribute(e)}decreaseListLevel(){let[t]=Array.from(this.getSelectedRange());const{index:e}=this.document.locationFromPosition(t);let n=e;const r=this.getBlock().getAttributeLevel();let s=this.document.getBlockAtIndex(n+1);for(;s&&s.isListItem()&&!(s.getAttributeLevel()<=r);)n++,s=this.document.getBlockAtIndex(n+1);t=this.document.positionFromLocation({index:e,offset:0});const o=this.document.positionFromLocation({index:n,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([t,o]))}updateCurrentAttributes(){const t=this.getSelectedRange({ignoreLock:!0});if(t){const e=this.document.getCommonAttributesAtRange(t);if(Array.from(hs()).forEach(n=>{e[n]||this.canSetCurrentAttribute(n)||(e[n]=!1)}),!xn(e,this.currentAttributes))return this.currentAttributes=e,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return Na.call({},this.currentAttributes)}getCurrentTextAttributes(){const t={};for(const e in this.currentAttributes){const n=this.currentAttributes[e];n!==!1&&fs(e)&&(t[e]=n)}return t}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(t){var e;const n=this.document.locationRangeFromRange(t);return(e=this.delegate)===null||e===void 0?void 0:e.compositionDidRequestChangingSelectionToLocationRange(n)}getSelectedRange(){const t=this.getLocationRange();if(t)return this.document.rangeFromLocationRange(t)}setSelectedRange(t){const e=this.document.locationRangeFromRange(t);return this.getSelectionManager().setLocationRange(e)}getPosition(){const t=this.getLocationRange();if(t)return this.document.positionFromLocation(t[0])}getLocationRange(t){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(t)||et({index:0,offset:0})}withTargetLocationRange(t,e){let n;this.targetLocationRange=t;try{n=e()}finally{this.targetLocationRange=null}return n}withTargetRange(t,e){const n=this.document.locationRangeFromRange(t);return this.withTargetLocationRange(n,e)}withTargetDOMRange(t,e){const n=this.createLocationRangeFromDOMRange(t,{strict:!1});return this.withTargetLocationRange(n,e)}getExpandedRangeInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[n,r]=Array.from(this.getSelectedRange());return t==="backward"?e?n-=e:n=this.translateUTF16PositionFromOffset(n,-1):e?r+=e:r=this.translateUTF16PositionFromOffset(r,1),et([n,r])}shouldManageMovingCursorInDirection(t){if(this.editingAttachment)return!0;const e=this.getExpandedRangeInDirection(t);return this.getAttachmentAtRange(e)!=null}moveCursorInDirection(t){let e,n;if(this.editingAttachment)n=this.document.getRangeOfAttachment(this.editingAttachment);else{const r=this.getSelectedRange();n=this.getExpandedRangeInDirection(t),e=!Ii(r,n)}if(t==="backward"?this.setSelectedRange(n[0]):this.setSelectedRange(n[1]),e){const r=this.getAttachmentAtRange(n);if(r)return this.editAttachment(r)}}expandSelectionInDirection(t){let{length:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=this.getExpandedRangeInDirection(t,{length:e});return this.setSelectedRange(n)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(t){const e=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(t,e);return this.setSelectedRange(n)}selectionContainsAttachments(){var t;return((t=this.getSelectedAttachments())===null||t===void 0?void 0:t.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(t){const e=this.document.locationFromPosition(t);if(e)return this.locationIsCursorTarget(e)}positionIsBlockBreak(t){var e;return(e=this.document.getPieceAtPosition(t))===null||e===void 0?void 0:e.isBlockBreak()}getSelectedDocument(){const t=this.getSelectedRange();if(t)return this.document.getDocumentAtRange(t)}getSelectedAttachments(){var t;return(t=this.getSelectedDocument())===null||t===void 0?void 0:t.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){const t=this.document.getAttachments(),{added:e,removed:n}=function(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const o=[],a=[],l=new Set;r.forEach(h=>{l.add(h)});const c=new Set;return s.forEach(h=>{c.add(h),l.has(h)||o.push(h)}),r.forEach(h=>{c.has(h)||a.push(h)}),{added:o,removed:a}}(this.attachments,t);return this.attachments=t,Array.from(n).forEach(r=>{var s,o;r.delegate=null,(s=this.delegate)===null||s===void 0||(o=s.compositionDidRemoveAttachment)===null||o===void 0||o.call(s,r)}),(()=>{const r=[];return Array.from(e).forEach(s=>{var o,a;s.delegate=this,r.push((o=this.delegate)===null||o===void 0||(a=o.compositionDidAddAttachment)===null||a===void 0?void 0:a.call(o,s))}),r})()}attachmentDidChangeAttributes(t){var e,n;return this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidEditAttachment)===null||n===void 0?void 0:n.call(e,t)}attachmentDidChangePreviewURL(t){var e,n;return this.revision++,(e=this.delegate)===null||e===void 0||(n=e.compositionDidChangeAttachmentPreviewURL)===null||n===void 0?void 0:n.call(e,t)}editAttachment(t,e){var n,r;if(t!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=t,(n=this.delegate)===null||n===void 0||(r=n.compositionDidStartEditingAttachment)===null||r===void 0?void 0:r.call(n,this.editingAttachment,e)}stopEditingAttachment(){var t,e;this.editingAttachment&&((t=this.delegate)===null||t===void 0||(e=t.compositionDidStopEditingAttachment)===null||e===void 0||e.call(t,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(t,e){return this.setDocument(this.document.updateAttributesForAttachment(t,e))}removeAttributeForAttachment(t,e){return this.setDocument(this.document.removeAttributeForAttachment(t,e))}breakFormattedBlock(t){let{document:e}=t;const{block:n}=t;let r=t.startPosition,s=[r-1,r];n.getBlockBreakPosition()===t.startLocation.offset?(n.breaksOnReturn()&&t.nextCharacter===`
`?r+=1:e=e.removeTextAtRange(s),s=[r,r]):t.nextCharacter===`
`?t.previousCharacter===`
`?s=[r-1,r+1]:(s=[r,r+1],r+=1):t.startLocation.offset-1!=0&&(r+=1);const o=new zt([n.removeLastAttribute().copyWithoutText()]);return this.setDocument(e.insertDocumentAtRange(o,s)),this.setSelection(r)}getPreviousBlock(){const t=this.getLocationRange();if(t){const{index:e}=t[0];if(e>0)return this.document.getBlockAtIndex(e-1)}}getBlock(){const t=this.getLocationRange();if(t)return this.document.getBlockAtIndex(t[0].index)}getAttachmentAtRange(t){const e=this.document.getDocumentAtRange(t);if(e.toString()==="".concat("￼",`
`))return e.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.compositionDidChangeCurrentAttributes)===null||e===void 0?void 0:e.call(t,this.currentAttributes)}notifyDelegateOfInsertionAtRange(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionDidPerformInsertionAtRange)===null||n===void 0?void 0:n.call(e,t)}translateUTF16PositionFromOffset(t,e){const n=this.document.toUTF16String(),r=n.offsetFromUCS2Offset(t);return n.offsetToUCS2Offset(r+e)}}_e.proxyMethod("getSelectionManager().getPointRange"),_e.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),_e.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),_e.proxyMethod("getSelectionManager().locationIsCursorTarget"),_e.proxyMethod("getSelectionManager().selectionIsExpanded"),_e.proxyMethod("delegate?.getSelectionManager");class bs extends mt{constructor(t){super(...arguments),this.composition=t,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.undoEntries.slice(-1)[0];if(!n||!Ud(r,t,e)){const s=this.createEntry({description:t,context:e});this.undoEntries.push(s),this.redoEntries=[]}}undo(){const t=this.undoEntries.pop();if(t){const e=this.createEntry(t);return this.redoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}redo(){const t=this.redoEntries.pop();if(t){const e=this.createEntry(t);return this.undoEntries.push(e),this.composition.loadSnapshot(t.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:t,context:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:t==null?void 0:t.toString(),context:JSON.stringify(e),snapshot:this.composition.getSnapshot()}}}const Ud=(i,t,e)=>(i==null?void 0:i.description)===(t==null?void 0:t.toString())&&(i==null?void 0:i.context)===JSON.stringify(e),Pr="attachmentGallery";class ll{constructor(t){this.document=t.document,this.selectedRange=t.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(t=>this.document=this.document.removeAttributeAtRange(Pr,t))}applyBlockAttribute(){let t=0;this.findRangesOfPieces().forEach(e=>{e[1]-e[0]>1&&(e[0]+=t,e[1]+=t,this.document.getCharacterAtPosition(e[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[1]),e[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),e[1]++,t++),e[0]!==0&&this.document.getCharacterAtPosition(e[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(e[0]),e[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),e[0]++,t++),this.document=this.document.applyBlockAttributeAtRange(Pr,!0,e))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(Pr)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}}const ul=function(i){const t=new ll(i);return t.perform(),t.getSnapshot()},Wd=[ul];class cl{constructor(t,e,n){this.insertFiles=this.insertFiles.bind(this),this.composition=t,this.selectionManager=e,this.element=n,this.undoManager=new bs(this.composition),this.filters=Wd.slice(0)}loadDocument(t){return this.loadSnapshot({document:t,selectedRange:[0,0]})}loadHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const e=Zn.parse(t,{referenceElement:this.element}).getDocument();return this.loadDocument(e)}loadJSON(t){let{document:e,selectedRange:n}=t;return e=zt.fromJSON(e),this.loadSnapshot({document:e,selectedRange:n})}loadSnapshot(t){return this.undoManager=new bs(this.composition),this.composition.loadSnapshot(t)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(t){return this.composition.deleteInDirection(t)}insertAttachment(t){return this.composition.insertAttachment(t)}insertAttachments(t){return this.composition.insertAttachments(t)}insertDocument(t){return this.composition.insertDocument(t)}insertFile(t){return this.composition.insertFile(t)}insertFiles(t){return this.composition.insertFiles(t)}insertHTML(t){return this.composition.insertHTML(t)}insertString(t){return this.composition.insertString(t)}insertText(t){return this.composition.insertText(t)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(t){const e=this.getDocument().locationRangeFromRange([t,t+1]);return this.selectionManager.getClientRectAtLocationRange(e)}expandSelectionInDirection(t){return this.composition.expandSelectionInDirection(t)}moveCursorInDirection(t){return this.composition.moveCursorInDirection(t)}setSelectedRange(t){return this.composition.setSelectedRange(t)}activateAttribute(t){let e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(t,e)}attributeIsActive(t){return this.composition.hasCurrentAttribute(t)}canActivateAttribute(t){return this.composition.canSetCurrentAttribute(t)}deactivateAttribute(t){return this.composition.removeCurrentAttribute(t)}setHTMLAtributeAtPosition(t,e,n){this.composition.setHTMLAtributeAtPosition(t,e,n)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(t){let{context:e,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(t,{context:e,consolidatable:n})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}}class dl{constructor(t){this.element=t}findLocationFromContainerAndOffset(t,e){let{strict:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},r=0,s=!1;const o={index:0,offset:0},a=this.findAttachmentElementParentForNode(t);a&&(t=a.parentNode,e=Er(a));const l=Mi(this.element,{usingFilter:hl});for(;l.nextNode();){const c=l.currentNode;if(c===t&&zn(t)){bn(c)||(o.offset+=e);break}if(c.parentNode===t){if(r++===e)break}else if(!Je(t,c)&&r>0)break;oo(c,{strict:n})?(s&&o.index++,o.offset=0,s=!0):o.offset+=Vr(c)}return o}findContainerAndOffsetFromLocation(t){let e,n;if(t.index===0&&t.offset===0){for(e=this.element,n=0;e.firstChild;)if(e=e.firstChild,wr(e)){n=1;break}return[e,n]}let[r,s]=this.findNodeAndOffsetFromLocation(t);if(r){if(zn(r))Vr(r)===0?(e=r.parentNode.parentNode,n=Er(r.parentNode),bn(r,{name:"right"})&&n++):(e=r,n=t.offset-s);else{if(e=r.parentNode,!oo(r.previousSibling)&&!wr(e))for(;r===e.lastChild&&(r=e,e=e.parentNode,!wr(e)););n=Er(r),t.offset!==0&&n++}return[e,n]}}findNodeAndOffsetFromLocation(t){let e,n,r=0;for(const s of this.getSignificantNodesForIndex(t.index)){const o=Vr(s);if(t.offset<=r+o)if(zn(s)){if(e=s,n=r,t.offset===n&&bn(e))break}else e||(e=s,n=r);if(r+=o,r>t.offset)break}return[e,n]}findAttachmentElementParentForNode(t){for(;t&&t!==this.element;){if(Ze(t))return t;t=t.parentNode}}getSignificantNodesForIndex(t){const e=[],n=Mi(this.element,{usingFilter:qd});let r=!1;for(;n.nextNode();){const o=n.currentNode;var s;if(vn(o)){if(s!=null?s++:s=0,s===t)r=!0;else if(r)break}else r&&e.push(o)}return e}}const Vr=function(i){return i.nodeType===Node.TEXT_NODE?bn(i)?0:i.textContent.length:Tt(i)==="br"||Ze(i)?1:0},qd=function(i){return zd(i)===NodeFilter.FILTER_ACCEPT?hl(i):NodeFilter.FILTER_REJECT},zd=function(i){return Pa(i)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},hl=function(i){return Ze(i.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT};class fl{createDOMRangeFromPoint(t){let e,{x:n,y:r}=t;if(document.caretPositionFromPoint){const{offsetNode:s,offset:o}=document.caretPositionFromPoint(n,r);return e=document.createRange(),e.setStart(s,o),e}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(n,r);if(document.body.createTextRange){const s=$n();try{const o=document.body.createTextRange();o.moveToPoint(n,r),o.select()}catch{}return e=$n(),$a(s),e}}getClientRectsForDOMRange(t){const e=Array.from(t.getClientRects());return[e[0],e[e.length-1]]}}class Ke extends mt{constructor(t){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=t,this.locationMapper=new dl(this.element),this.pointMapper=new fl,this.lockCount=0,lt("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.strict===!1?this.createLocationRangeFromDOMRange($n()):t.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(t){if(this.lockedLocationRange)return;t=et(t);const e=this.createDOMRangeFromLocationRange(t);e&&($a(e),this.updateCurrentLocationRange(t))}setLocationRangeFromPointRange(t){t=et(t);const e=this.getLocationAtPoint(t[0]),n=this.getLocationAtPoint(t[1]);this.setLocationRange([e,n])}getClientRectAtLocationRange(t){const e=this.createDOMRangeFromLocationRange(t);if(e)return this.getClientRectsForDOMRange(e)[1]}locationIsCursorTarget(t){const e=Array.from(this.findNodeAndOffsetFromLocation(t))[0];return bn(e)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){const{lockedLocationRange:t}=this;if(this.lockedLocationRange=null,t!=null)return this.setLocationRange(t)}}clearSelection(){var t;return(t=za())===null||t===void 0?void 0:t.removeAllRanges()}selectionIsCollapsed(){var t;return((t=$n())===null||t===void 0?void 0:t.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(t,e){if(t==null||!this.domRangeWithinElement(t))return;const n=this.findLocationFromContainerAndOffset(t.startContainer,t.startOffset,e);if(!n)return;const r=t.collapsed?void 0:this.findLocationFromContainerAndOffset(t.endContainer,t.endOffset,e);return et([n,r])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let t;this.paused=!0;const e=()=>{if(this.paused=!1,clearTimeout(n),Array.from(t).forEach(r=>{r.destroy()}),Je(document,this.element))return this.selectionDidChange()},n=setTimeout(e,200);t=["mousemove","keydown"].map(r=>lt(r,{onElement:document,withCallback:e}))}selectionDidChange(){if(!this.paused&&!Ts(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(t){var e,n;if((t??(t=this.createLocationRangeFromDOMRange($n())))&&!Ii(t,this.currentLocationRange))return this.currentLocationRange=t,(e=this.delegate)===null||e===void 0||(n=e.locationRangeDidChange)===null||n===void 0?void 0:n.call(e,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(t){const e=this.findContainerAndOffsetFromLocation(t[0]),n=me(t)?e:this.findContainerAndOffsetFromLocation(t[1])||e;if(e!=null&&n!=null){const r=document.createRange();return r.setStart(...Array.from(e||[])),r.setEnd(...Array.from(n||[])),r}}getLocationAtPoint(t){const e=this.createDOMRangeFromPoint(t);var n;if(e)return(n=this.createLocationRangeFromDOMRange(e))===null||n===void 0?void 0:n[0]}domRangeWithinElement(t){return t.collapsed?Je(this.element,t.startContainer):Je(this.element,t.startContainer)&&Je(this.element,t.endContainer)}}Ke.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Ke.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Ke.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Ke.proxyMethod("pointMapper.createDOMRangeFromPoint"),Ke.proxyMethod("pointMapper.getClientRectsForDOMRange");var pl=Object.freeze({__proto__:null,Attachment:En,AttachmentManager:ol,AttachmentPiece:An,Block:oe,Composition:_e,Document:zt,Editor:cl,HTMLParser:Zn,HTMLSanitizer:Zi,LineBreakInsertion:al,LocationMapper:dl,ManagedAttachment:dt,Piece:an,PointMapper:fl,SelectionManager:Ke,SplittableList:Pi,StringPiece:Ps,Text:Zt,UndoManager:bs}),$d=Object.freeze({__proto__:null,ObjectView:on,AttachmentView:Ns,BlockView:tl,DocumentView:tr,PieceView:Qa,PreviewableAttachmentView:Xa,TextView:Za});const{lang:jr,css:Ue,keyNames:Kd}=si,Hr=function(i){return function(){const t=i.apply(this,arguments);t.do(),this.undos||(this.undos=[]),this.undos.push(t.undo)}};class gl extends mt{constructor(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),Ot(this,"makeElementMutable",Hr(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),Ot(this,"addToolbar",Hr(()=>{const s=$({tagName:"div",className:Ue.attachmentToolbar,data:{trixMutable:!0},childNodes:$({tagName:"div",className:"trix-button-row",childNodes:$({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:$({tagName:"button",className:"trix-button trix-button--remove",textContent:jr.remove,attributes:{title:jr.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&s.appendChild($({tagName:"div",className:Ue.attachmentMetadataContainer,childNodes:$({tagName:"span",className:Ue.attachmentMetadata,childNodes:[$({tagName:"span",className:Ue.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),$({tagName:"span",className:Ue.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),lt("click",{onElement:s,withCallback:this.didClickToolbar}),lt("click",{onElement:s,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),Wn("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:s,attachment:this.attachment}}),{do:()=>this.element.appendChild(s),undo:()=>Fe(s)}})),Ot(this,"installCaptionEditor",Hr(()=>{const s=$({tagName:"textarea",className:Ue.attachmentCaptionEditor,attributes:{placeholder:jr.captionPlaceholder},data:{trixMutable:!0}});s.value=this.attachmentPiece.getCaption();const o=s.cloneNode();o.classList.add("trix-autoresize-clone"),o.tabIndex=-1;const a=function(){o.value=s.value,s.style.height=o.scrollHeight+"px"};lt("input",{onElement:s,withCallback:a}),lt("input",{onElement:s,withCallback:this.didInputCaption}),lt("keydown",{onElement:s,withCallback:this.didKeyDownCaption}),lt("change",{onElement:s,withCallback:this.didChangeCaption}),lt("blur",{onElement:s,withCallback:this.didBlurCaption});const l=this.element.querySelector("figcaption"),c=l.cloneNode();return{do:()=>{if(l.style.display="none",c.appendChild(s),c.appendChild(o),c.classList.add("".concat(Ue.attachmentCaption,"--editing")),l.parentElement.insertBefore(c,l),a(),this.options.editCaption)return Fs(()=>s.focus())},undo(){Fe(c),l.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=t,this.element=e,this.container=n,this.options=r,this.attachment=this.attachmentPiece.attachment,Tt(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var t;let e=this.undos.pop();for(this.savePendingCaption();e;)e(),e=this.undos.pop();(t=this.delegate)===null||t===void 0||t.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){const s=this.pendingCaption;var t,e,n,r;this.pendingCaption=null,s?(t=this.delegate)===null||t===void 0||(e=t.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||e===void 0||e.call(t,{caption:s},this.attachment):(n=this.delegate)===null||n===void 0||(r=n.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||r===void 0||r.call(n,"caption",this.attachment)}}didClickToolbar(t){return t.preventDefault(),t.stopPropagation()}didClickActionButton(t){var e;if(t.target.getAttribute("data-trix-action")==="remove")return(e=this.delegate)===null||e===void 0?void 0:e.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(t){var e,n;if(Kd[t.keyCode]==="return")return t.preventDefault(),this.savePendingCaption(),(e=this.delegate)===null||e===void 0||(n=e.attachmentEditorDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(e,this.attachment)}didInputCaption(t){this.pendingCaption=t.target.value.replace(/\s/g," ").trim()}didChangeCaption(t){return this.savePendingCaption()}didBlurCaption(t){return this.savePendingCaption()}}class ml extends mt{constructor(t,e){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=t,this.composition=e,this.documentView=new tr(this.composition.document,{element:this.element}),lt("focus",{onElement:this.element,withCallback:this.didFocus}),lt("blur",{onElement:this.element,withCallback:this.didBlur}),lt("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),lt("mousedown",{onElement:this.element,matchingSelector:Qe,withCallback:this.didClickAttachment}),lt("click",{onElement:this.element,matchingSelector:"a".concat(Qe),preventDefault:!0})}didFocus(t){var e;const n=()=>{var r,s;if(!this.focused)return this.focused=!0,(r=this.delegate)===null||r===void 0||(s=r.compositionControllerDidFocus)===null||s===void 0?void 0:s.call(r)};return((e=this.blurPromise)===null||e===void 0?void 0:e.then(n))||n()}didBlur(t){this.blurPromise=new Promise(e=>Fs(()=>{var n,r;return Ts(this.element)||(this.focused=null,(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidBlur)===null||r===void 0||r.call(n)),this.blurPromise=null,e()}))}didClickAttachment(t,e){var n,r;const s=this.findAttachmentForElement(e),o=!!Oe(t.target,{matchingSelector:"figcaption"});return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerDidSelectAttachment)===null||r===void 0?void 0:r.call(n,s,{editCaption:o})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var t,e,n,r,s,o;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillSyncDocumentView)===null||r===void 0||r.call(n),this.documentView.sync(),(s=this.delegate)===null||s===void 0||(o=s.compositionControllerDidSyncDocumentView)===null||o===void 0||o.call(s)),(t=this.delegate)===null||t===void 0||(e=t.compositionControllerDidRender)===null||e===void 0?void 0:e.call(t)}rerenderViewForObject(t){return this.invalidateViewForObject(t),this.render()}invalidateViewForObject(t){return this.documentView.invalidateViewForObject(t)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(t,e){var n;if(((n=this.attachmentEditor)===null||n===void 0?void 0:n.attachment)===t)return;const r=this.documentView.findElementForObject(t);if(!r)return;this.uninstallAttachmentEditor();const s=this.composition.document.getAttachmentPieceForAttachment(t);this.attachmentEditor=new gl(s,r,this.element,e),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var t;return(t=this.attachmentEditor)===null||t===void 0?void 0:t.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(t,e){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,e),this.composition.updateAttributesForAttachment(t,e)}attachmentEditorDidRequestRemovingAttributeForAttachment(t,e){var n,r;return(n=this.delegate)===null||n===void 0||(r=n.compositionControllerWillUpdateAttachment)===null||r===void 0||r.call(n,e),this.composition.removeAttributeForAttachment(t,e)}attachmentEditorDidRequestRemovalOfAttachment(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionControllerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(e,t)}attachmentEditorDidRequestDeselectingAttachment(t){var e,n;return(e=this.delegate)===null||e===void 0||(n=e.compositionControllerDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(e,t)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(t){return this.composition.document.getAttachmentById(parseInt(t.dataset.trixId,10))}}class vl extends mt{}const bl="data-trix-mutable",Yd="[".concat(bl,"]"),Jd={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};class Al extends mt{constructor(t){super(t),this.didMutate=this.didMutate.bind(this),this.element=t,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,Jd)}stop(){return this.observer.disconnect()}didMutate(t){var e,n;if(this.mutations.push(...Array.from(this.findSignificantMutations(t)||[])),this.mutations.length)return(e=this.delegate)===null||e===void 0||(n=e.elementDidMutate)===null||n===void 0||n.call(e,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(t){return t.filter(e=>this.mutationIsSignificant(e))}mutationIsSignificant(t){if(this.nodeIsMutable(t.target))return!1;for(const e of Array.from(this.nodesModifiedByMutation(t)))if(this.nodeIsSignificant(e))return!0;return!1}nodeIsSignificant(t){return t!==this.element&&!this.nodeIsMutable(t)&&!Pa(t)}nodeIsMutable(t){return Oe(t,{matchingSelector:Yd})}nodesModifiedByMutation(t){const e=[];switch(t.type){case"attributes":t.attributeName!==bl&&e.push(t.target);break;case"characterData":e.push(t.target.parentNode),e.push(t.target);break;case"childList":e.push(...Array.from(t.addedNodes||[])),e.push(...Array.from(t.removedNodes||[]))}return e}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){const{additions:t,deletions:e}=this.getTextChangesFromCharacterData(),n=this.getTextChangesFromChildList();Array.from(n.additions).forEach(a=>{Array.from(t).includes(a)||t.push(a)}),e.push(...Array.from(n.deletions||[]));const r={},s=t.join("");s&&(r.textAdded=s);const o=e.join("");return o&&(r.textDeleted=o),r}getMutationsByType(t){return Array.from(this.mutations).filter(e=>e.type===t)}getTextChangesFromChildList(){let t,e;const n=[],r=[];Array.from(this.getMutationsByType("childList")).forEach(a=>{n.push(...Array.from(a.addedNodes||[])),r.push(...Array.from(a.removedNodes||[]))}),n.length===0&&r.length===1&&vn(r[0])?(t=[],e=[`
`]):(t=As(n),e=As(r));const s=t.filter((a,l)=>a!==e[l]).map(Hn),o=e.filter((a,l)=>a!==t[l]).map(Hn);return{additions:s,deletions:o}}getTextChangesFromCharacterData(){let t,e;const n=this.getMutationsByType("characterData");if(n.length){const r=n[0],s=n[n.length-1],o=function(a,l){let c,h;return a=Qn.box(a),(l=Qn.box(l)).length<a.length?[h,c]=fo(a,l):[c,h]=fo(l,a),{added:c,removed:h}}(Hn(r.oldValue),Hn(s.target.data));t=o.added,e=o.removed}return{additions:t?[t]:[],deletions:e?[e]:[]}}}const As=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const t=[];for(const e of Array.from(i))switch(e.nodeType){case Node.TEXT_NODE:t.push(e.data);break;case Node.ELEMENT_NODE:Tt(e)==="br"?t.push(`
`):t.push(...Array.from(As(e.childNodes)||[]))}return t};class yl extends Ni{constructor(t){super(...arguments),this.file=t}perform(t){const e=new FileReader;return e.onerror=()=>t(!1),e.onload=()=>{e.onerror=null;try{e.abort()}catch{}return t(!0,this.file)},e.readAsArrayBuffer(this.file)}}class Gd{constructor(t){this.element=t}shouldIgnore(t){return!!ri.samsungAndroid&&(this.previousEvent=this.event,this.event=t,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&Xd(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var t;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((t=this.event.data)===null||t===void 0?void 0:t.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var t,e;return((t=this.previousEvent)===null||t===void 0?void 0:t.type)==="keydown"&&((e=this.previousEvent)===null||e===void 0?void 0:e.key)==="Unidentified"}}const Xd=(i,t)=>Io(i)===Io(t),Qd=new RegExp("(".concat("￼","|").concat(Qi,"|").concat(Te,"|\\s)+"),"g"),Io=i=>i.replace(Qd," ").trim();class er extends mt{constructor(t){super(...arguments),this.element=t,this.mutationObserver=new Al(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new Gd(this.element);for(const e in this.constructor.events)lt(e,{onElement:this.element,withCallback:this.handlerFor(e)})}elementDidMutate(t){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestRender)===null||e===void 0?void 0:e.call(t)}requestReparse(){var t,e;return(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidRequestReparse)===null||e===void 0||e.call(t),this.requestRender()}attachFiles(t){const e=Array.from(t).map(n=>new yl(n));return Promise.all(e).then(n=>{this.handleInput(function(){var r,s;return(r=this.delegate)===null||r===void 0||r.inputControllerWillAttachFiles(),(s=this.responder)===null||s===void 0||s.insertFiles(n),this.requestRender()})})}handlerFor(t){return e=>{e.defaultPrevented||this.handleInput(()=>{if(!Ts(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(e))return;this.eventName=t,this.constructor.events[t].call(this,e)}})}}handleInput(t){try{var e;(e=this.delegate)===null||e===void 0||e.inputControllerWillHandleInput(),t.call(this)}finally{var n;(n=this.delegate)===null||n===void 0||n.inputControllerDidHandleInput()}}createLinkHTML(t,e){const n=document.createElement("a");return n.href=t,n.textContent=e||t,n.outerHTML}}var Ur;Ot(er,"events",{});const{browser:Zd,keyNames:Cl}=si;let th=0;class pe extends er{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(const e in t){const n=t[e];this.inputSummary[e]=n}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),rn.reset()}elementDidMutate(t){var e,n;return this.isComposing()?(e=this.delegate)===null||e===void 0||(n=e.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(e):this.handleInput(function(){return this.mutationIsSignificant(t)&&(this.mutationIsExpected(t)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(t){let{textAdded:e,textDeleted:n}=t;if(this.inputSummary.preferDocument)return!0;const r=e!=null?e===this.inputSummary.textAdded:!this.inputSummary.textAdded,s=n!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,o=[`
`,` 
`].includes(e)&&!r,a=n===`
`&&!s;if(o&&!a||a&&!o){const c=this.getSelectedRange();if(c){var l;const h=o?e.replace(/\n$/,"").length||-1:(e==null?void 0:e.length)||1;if((l=this.responder)!==null&&l!==void 0&&l.positionIsBlockBreak(c[1]+h))return!0}}return r&&s}mutationIsSignificant(t){var e;const n=Object.keys(t).length>0,r=((e=this.compositionInput)===null||e===void 0?void 0:e.getEndData())==="";return n||!r}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new De(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(t,e){var n;return((n=this.responder)===null||n===void 0?void 0:n.deleteInDirection(t))!==!1?this.setInputSummary({didDelete:!0}):e?(e.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(t){var e;if(!function(r){if(r==null||!r.setData)return!1;for(const s in uo){const o=uo[s];try{if(r.setData(s,o),!r.getData(s)===o)return!1}catch{return!1}}return!0}(t))return;const n=(e=this.responder)===null||e===void 0?void 0:e.getSelectedDocument().toSerializableDocument();return t.setData("application/x-trix-document",JSON.stringify(n)),t.setData("text/html",tr.render(n).innerHTML),t.setData("text/plain",n.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(t){const e={};return Array.from((t==null?void 0:t.types)||[]).forEach(n=>{e[n]=!0}),e.Files||e["application/x-trix-document"]||e["text/html"]||e["text/plain"]}getPastedHTMLUsingHiddenElement(t){const e=this.getSelectedRange(),n={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},r=$({style:n,tagName:"div",editable:!0});return document.body.appendChild(r),r.focus(),requestAnimationFrame(()=>{const s=r.innerHTML;return Fe(r),this.setSelectedRange(e),t(s)})}}Ot(pe,"events",{keydown(i){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;const t=Cl[i.keyCode];if(t){var e;let r=this.keys;["ctrl","alt","shift","meta"].forEach(s=>{var o;i["".concat(s,"Key")]&&(s==="ctrl"&&(s="control"),r=(o=r)===null||o===void 0?void 0:o[s])}),((e=r)===null||e===void 0?void 0:e[t])!=null&&(this.setInputSummary({keyName:t}),rn.reset(),r[t].call(this,i))}if(Ua(i)){const r=String.fromCharCode(i.keyCode).toLowerCase();if(r){var n;const s=["alt","shift"].map(o=>{if(i["".concat(o,"Key")])return o}).filter(o=>o);s.push(r),(n=this.delegate)!==null&&n!==void 0&&n.inputControllerDidReceiveKeyboardCommand(s)&&i.preventDefault()}}},keypress(i){if(this.inputSummary.eventName!=null||i.metaKey||i.ctrlKey&&!i.altKey)return;const t=ih(i);var e,n;return t?((e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(t),this.setInputSummary({textAdded:t,didDelete:this.selectionIsExpanded()})):void 0},textInput(i){const{data:t}=i,{textAdded:e}=this.inputSummary;if(e&&e!==t&&e.toUpperCase()===t){var n;const r=this.getSelectedRange();return this.setSelectedRange([r[0],r[1]+e.length]),(n=this.responder)===null||n===void 0||n.insertString(t),this.setInputSummary({textAdded:t}),this.setSelectedRange(r)}},dragenter(i){i.preventDefault()},dragstart(i){var t,e;return this.serializeSelectionToDataTransfer(i.dataTransfer),this.draggedRange=this.getSelectedRange(),(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidStartDrag)===null||e===void 0?void 0:e.call(t)},dragover(i){if(this.draggedRange||this.canAcceptDataTransfer(i.dataTransfer)){i.preventDefault();const n={x:i.clientX,y:i.clientY};var t,e;if(!xn(n,this.draggingPoint))return this.draggingPoint=n,(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidReceiveDragOverPoint)===null||e===void 0?void 0:e.call(t,this.draggingPoint)}},dragend(i){var t,e;(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidCancelDrag)===null||e===void 0||e.call(t),this.draggedRange=null,this.draggingPoint=null},drop(i){var t,e;i.preventDefault();const n=(t=i.dataTransfer)===null||t===void 0?void 0:t.files,r=i.dataTransfer.getData("application/x-trix-document"),s={x:i.clientX,y:i.clientY};if((e=this.responder)===null||e===void 0||e.setLocationRangeFromPointRange(s),n!=null&&n.length)this.attachFiles(n);else if(this.draggedRange){var o,a;(o=this.delegate)===null||o===void 0||o.inputControllerWillMoveText(),(a=this.responder)===null||a===void 0||a.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(r){var l;const c=zt.fromJSONString(r);(l=this.responder)===null||l===void 0||l.insertDocument(c),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(i){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillCutText(),this.deleteInDirection("backward"),i.defaultPrevented))return this.requestRender()},copy(i){var t;(t=this.responder)!==null&&t!==void 0&&t.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(i.clipboardData)&&i.preventDefault()},paste(i){const t=i.clipboardData||i.testClipboardData,e={clipboard:t};if(!t||rh(i))return void this.getPastedHTMLUsingHiddenElement(B=>{var N,J,O;return e.type="text/html",e.html=B,(N=this.delegate)===null||N===void 0||N.inputControllerWillPaste(e),(J=this.responder)===null||J===void 0||J.insertHTML(e.html),this.requestRender(),(O=this.delegate)===null||O===void 0?void 0:O.inputControllerDidPaste(e)});const n=t.getData("URL"),r=t.getData("text/html"),s=t.getData("public.url-name");if(n){var o,a,l;let B;e.type="text/html",B=s?Ms(s).trim():n,e.html=this.createLinkHTML(n,B),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.setInputSummary({textAdded:B,didDelete:this.selectionIsExpanded()}),(a=this.responder)===null||a===void 0||a.insertHTML(e.html),this.requestRender(),(l=this.delegate)===null||l===void 0||l.inputControllerDidPaste(e)}else if(Ha(t)){var c,h,p;e.type="text/plain",e.string=t.getData("text/plain"),(c=this.delegate)===null||c===void 0||c.inputControllerWillPaste(e),this.setInputSummary({textAdded:e.string,didDelete:this.selectionIsExpanded()}),(h=this.responder)===null||h===void 0||h.insertString(e.string),this.requestRender(),(p=this.delegate)===null||p===void 0||p.inputControllerDidPaste(e)}else if(r){var m,k,v;e.type="text/html",e.html=r,(m=this.delegate)===null||m===void 0||m.inputControllerWillPaste(e),(k=this.responder)===null||k===void 0||k.insertHTML(e.html),this.requestRender(),(v=this.delegate)===null||v===void 0||v.inputControllerDidPaste(e)}else if(Array.from(t.types).includes("Files")){var y,C;const B=(y=t.items)===null||y===void 0||(y=y[0])===null||y===void 0||(C=y.getAsFile)===null||C===void 0?void 0:C.call(y);if(B){var R,x,F;const N=eh(B);!B.name&&N&&(B.name="pasted-file-".concat(++th,".").concat(N)),e.type="File",e.file=B,(R=this.delegate)===null||R===void 0||R.inputControllerWillAttachFiles(),(x=this.responder)===null||x===void 0||x.insertFile(e.file),this.requestRender(),(F=this.delegate)===null||F===void 0||F.inputControllerDidPaste(e)}}i.preventDefault()},compositionstart(i){return this.getCompositionInput().start(i.data)},compositionupdate(i){return this.getCompositionInput().update(i.data)},compositionend(i){return this.getCompositionInput().end(i.data)},beforeinput(i){this.inputSummary.didInput=!0},input(i){return this.inputSummary.didInput=!0,i.stopPropagation()}}),Ot(pe,"keys",{backspace(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},delete(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},return(i){var t,e;return this.setInputSummary({preferDocument:!0}),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()},tab(i){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.requestRender(),i.preventDefault())},left(i){var t;if(this.selectionIsInCursorTarget())return i.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},right(i){var t;if(this.selectionIsInCursorTarget())return i.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},control:{d(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("forward",i)},h(i){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.deleteInDirection("backward",i)},o(i){var t,e;return i.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(i){var t,e;(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.insertString(`
`),this.requestRender(),i.preventDefault()},tab(i){var t,e;(t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel()&&((e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.requestRender(),i.preventDefault())},left(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("backward")},right(i){if(this.selectionIsInCursorTarget())return i.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(i){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}},meta:{backspace(i){var t;return this.setInputSummary({preferDocument:!1}),(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformTyping()}}}),pe.proxyMethod("responder?.getSelectedRange"),pe.proxyMethod("responder?.setSelectedRange"),pe.proxyMethod("responder?.expandSelectionInDirection"),pe.proxyMethod("responder?.selectionIsInCursorTarget"),pe.proxyMethod("responder?.selectionIsExpanded");const eh=i=>{var t;return(t=i.type)===null||t===void 0||(t=t.match(/\/(\w+)$/))===null||t===void 0?void 0:t[1]},nh=!((Ur=" ".codePointAt)===null||Ur===void 0||!Ur.call(" ",0)),ih=function(i){if(i.key&&nh&&i.key.codePointAt(0)===i.keyCode)return i.key;{let t;if(i.which===null?t=i.keyCode:i.which!==0&&i.charCode!==0&&(t=i.charCode),t!=null&&Cl[t]!=="escape")return Qn.fromCodepoints([t]).toString()}},rh=function(i){const t=i.clipboardData;if(t){if(t.types.includes("text/html")){for(const e of t.types){const n=/^CorePasteboardFlavorType/.test(e),r=/^dyn\./.test(e)&&t.getData(e);if(n||r)return!0}return!1}{const e=t.types.includes("com.apple.webarchive"),n=t.types.includes("com.apple.flat-rtfd");return e||n}}};class De extends mt{constructor(t){super(...arguments),this.inputController=t,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(t){if(this.data.start=t,this.isSignificant()){var e,n;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((n=this.responder)===null||n===void 0||n.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange()}}update(t){if(this.data.update=t,this.isSignificant()){const e=this.selectPlaceholder();e&&(this.forgetPlaceholder(),this.range=e)}}end(t){return this.data.end=t,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.setSelectedRange(this.range),(r=this.responder)===null||r===void 0||r.insertString(this.data.end),(s=this.responder)===null||s===void 0?void 0:s.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var e,n,r,s}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!Zd.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var t,e;return((t=this.data.start)===null||t===void 0?void 0:t.length)===0&&((e=this.data.end)===null||e===void 0?void 0:e.length)>0&&this.range}}De.proxyMethod("inputController.setInputSummary"),De.proxyMethod("inputController.requestRender"),De.proxyMethod("inputController.requestReparse"),De.proxyMethod("responder?.selectionIsExpanded"),De.proxyMethod("responder?.insertPlaceholder"),De.proxyMethod("responder?.selectPlaceholder"),De.proxyMethod("responder?.forgetPlaceholder");class Yn extends er{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(t=this.delegate)===null||t===void 0||(e=t.inputControllerDidAllowUnhandledInput)===null||e===void 0?void 0:e.call(t):void 0:this.reparse();var t,e}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var t,e;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(e=this.delegate)===null||e===void 0||e.render(),(t=this.afterRender)===null||t===void 0||t.call(this),this.afterRender=null}reparse(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.reparse()}insertString(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.insertString(e,n)})}toggleAttributeIfSupported(t){var e;if(hs().includes(t))return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.toggleCurrentAttribute(t)})}activateAttributeIfSupported(t,e){var n;if(hs().includes(t))return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(t),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.setCurrentAttribute(t,e)})}deleteInDirection(t){let{recordUndoEntry:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var n;e&&((n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping());const r=()=>{var o;return(o=this.responder)===null||o===void 0?void 0:o.deleteInDirection(t)},s=this.getTargetDOMRange({minLength:this.composing?1:2});return s?this.withTargetDOMRange(s,r):r()}withTargetDOMRange(t,e){var n;return typeof t=="function"&&(e=t,t=this.getTargetDOMRange()),t?(n=this.responder)===null||n===void 0?void 0:n.withTargetDOMRange(t,e.bind(this)):(rn.reset(),e.call(this))}getTargetDOMRange(){var t,e;let{minLength:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0};const r=(t=(e=this.event).getTargetRanges)===null||t===void 0?void 0:t.call(e);if(r&&r.length){const s=sh(r[0]);if(n===0||s.toString().length>=n)return s}}withEvent(t,e){let n;this.event=t;try{n=e.call(this)}finally{this.event=null}return n}}Ot(Yn,"events",{keydown(i){if(Ua(i)){var t;const e=lh(i);(t=this.delegate)!==null&&t!==void 0&&t.inputControllerDidReceiveKeyboardCommand(e)&&i.preventDefault()}else{let e=i.key;i.altKey&&(e+="+Alt"),i.shiftKey&&(e+="+Shift");const n=this.constructor.keys[e];if(n)return this.withEvent(i,n)}},paste(i){var t;let e;const n=(t=i.clipboardData)===null||t===void 0?void 0:t.getData("URL");return xl(i)?(i.preventDefault(),this.attachFiles(i.clipboardData.files)):ah(i)?(i.preventDefault(),e={type:"text/plain",string:i.clipboardData.getData("text/plain")},(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(e),(s=this.responder)===null||s===void 0||s.insertString(e.string),this.render(),(o=this.delegate)===null||o===void 0?void 0:o.inputControllerDidPaste(e)):n?(i.preventDefault(),e={type:"text/html",html:this.createLinkHTML(n)},(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(e),(l=this.responder)===null||l===void 0||l.insertHTML(e.html),this.render(),(c=this.delegate)===null||c===void 0?void 0:c.inputControllerDidPaste(e)):void 0;var r,s,o,a,l,c},beforeinput(i){const t=this.constructor.inputTypes[i.inputType],e=(n=i,!(!/iPhone|iPad/.test(navigator.userAgent)||n.inputType&&n.inputType!=="insertParagraph"));var n;t&&(this.withEvent(i,t),e||this.scheduleRender()),e&&this.render()},input(i){rn.reset()},dragstart(i){var t,e;(t=this.responder)!==null&&t!==void 0&&t.selectionContainsAttachments()&&(i.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(e=this.responder)===null||e===void 0?void 0:e.getSelectedRange(),point:qr(i)})},dragenter(i){Wr(i)&&i.preventDefault()},dragover(i){if(this.dragging){i.preventDefault();const e=qr(i);var t;if(!xn(e,this.dragging.point))return this.dragging.point=e,(t=this.responder)===null||t===void 0?void 0:t.setLocationRangeFromPointRange(e)}else Wr(i)&&i.preventDefault()},drop(i){var t,e;if(this.dragging)return i.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),(e=this.responder)===null||e===void 0||e.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(Wr(i)){var n;i.preventDefault();const r=qr(i);return(n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(r),this.attachFiles(i.dataTransfer.files)}},dragend(){var i;this.dragging&&((i=this.responder)===null||i===void 0||i.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(i){this.composing&&(this.composing=!1,ri.recentAndroid||this.scheduleRender())}}),Ot(Yn,"keys",{ArrowLeft(){var i,t;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("backward")},ArrowRight(){var i,t;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(t=this.responder)===null||t===void 0?void 0:t.moveCursorInDirection("forward")},Backspace(){var i,t,e;if((i=this.responder)!==null&&i!==void 0&&i.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),(e=this.responder)===null||e===void 0||e.deleteInDirection("backward"),this.render()},Tab(){var i,t;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.increaseNestingLevel(),this.render()},"Tab+Shift"(){var i,t;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel())return this.event.preventDefault(),(t=this.responder)===null||t===void 0||t.decreaseNestingLevel(),this.render()}}),Ot(Yn,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var i;this.deleteByDragRange=(i=this.responder)===null||i===void 0?void 0:i.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var i;if((i=this.responder)!==null&&i!==void 0&&i.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(const e in(i=this.responder)===null||i===void 0?void 0:i.getCurrentAttributes()){var i,t;(t=this.responder)===null||t===void 0||t.removeCurrentAttribute(e)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformRedo()},historyUndo(){var i;return(i=this.delegate)===null||i===void 0?void 0:i.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){const i=this.deleteByDragRange;var t;if(i)return this.deleteByDragRange=null,(t=this.delegate)===null||t===void 0||t.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.moveTextFromRange(i)})},insertFromPaste(){const{dataTransfer:i}=this.event,t={dataTransfer:i},e=i.getData("URL"),n=i.getData("text/html");if(e){var r;let l;this.event.preventDefault(),t.type="text/html";const c=i.getData("public.url-name");l=c?Ms(c).trim():e,t.html=this.createLinkHTML(e,l),(r=this.delegate)===null||r===void 0||r.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var h;return(h=this.responder)===null||h===void 0?void 0:h.insertHTML(t.html)}),this.afterRender=()=>{var h;return(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(t)}}else if(Ha(i)){var s;t.type="text/plain",t.string=i.getData("text/plain"),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertString(t.string)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(oh(this.event)){var o;t.type="File",t.file=i.files[0],(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertFile(t.file)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}else if(n){var a;this.event.preventDefault(),t.type="text/html",t.html=n,(a=this.delegate)===null||a===void 0||a.inputControllerWillPaste(t),this.withTargetDOMRange(function(){var l;return(l=this.responder)===null||l===void 0?void 0:l.insertHTML(t.html)}),this.afterRender=()=>{var l;return(l=this.delegate)===null||l===void 0?void 0:l.inputControllerDidPaste(t)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var i;return(i=this.delegate)===null||i===void 0||i.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var t;return(t=this.responder)===null||t===void 0?void 0:t.insertLineBreak()})},insertReplacementText(){const i=this.event.dataTransfer.getData("text/plain"),t=this.event.getTargetRanges()[0];this.withTargetDOMRange(t,()=>{this.insertString(i,{updatePosition:!1})})},insertText(){var i;return this.insertString(this.event.data||((i=this.event.dataTransfer)===null||i===void 0?void 0:i.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});const sh=function(i){const t=document.createRange();return t.setStart(i.startContainer,i.startOffset),t.setEnd(i.endContainer,i.endOffset),t},Wr=i=>{var t;return Array.from(((t=i.dataTransfer)===null||t===void 0?void 0:t.types)||[]).includes("Files")},oh=i=>{var t;return((t=i.dataTransfer.files)===null||t===void 0?void 0:t[0])&&!xl(i)&&!(e=>{let{dataTransfer:n}=e;return n.types.includes("Files")&&n.types.includes("text/html")&&n.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(i)},xl=function(i){const t=i.clipboardData;if(t)return Array.from(t.types).filter(e=>e.match(/file/i)).length===t.types.length&&t.files.length>=1},ah=function(i){const t=i.clipboardData;if(t)return t.types.includes("text/plain")&&t.types.length===1},lh=function(i){const t=[];return i.altKey&&t.push("alt"),i.shiftKey&&t.push("shift"),t.push(i.key),t},qr=i=>({x:i.clientX,y:i.clientY}),ys="[data-trix-attribute]",Cs="[data-trix-action]",uh="".concat(ys,", ").concat(Cs),nr="[data-trix-dialog]",ch="".concat(nr,"[data-trix-active]"),dh="".concat(nr," [data-trix-method]"),No="".concat(nr," [data-trix-input]"),Bo=(i,t)=>(t||(t=pn(i)),i.querySelector("[data-trix-input][name='".concat(t,"']"))),Po=i=>i.getAttribute("data-trix-action"),pn=i=>i.getAttribute("data-trix-attribute")||i.getAttribute("data-trix-dialog-attribute");class El extends mt{constructor(t){super(t),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=t,this.attributes={},this.actions={},this.resetDialogInputs(),lt("mousedown",{onElement:this.element,matchingSelector:Cs,withCallback:this.didClickActionButton}),lt("mousedown",{onElement:this.element,matchingSelector:ys,withCallback:this.didClickAttributeButton}),lt("click",{onElement:this.element,matchingSelector:uh,preventDefault:!0}),lt("click",{onElement:this.element,matchingSelector:dh,withCallback:this.didClickDialogButton}),lt("keydown",{onElement:this.element,matchingSelector:No,withCallback:this.didKeyDownDialogInput})}didClickActionButton(t,e){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),t.preventDefault();const r=Po(e);return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0?void 0:s.toolbarDidInvokeAction(r,e);var s}didClickAttributeButton(t,e){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),t.preventDefault();const r=pn(e);var s;return this.getDialog(r)?this.toggleDialog(r):(s=this.delegate)===null||s===void 0||s.toolbarDidToggleAttribute(r),this.refreshAttributeButtons()}didClickDialogButton(t,e){const n=Oe(e,{matchingSelector:nr});return this[e.getAttribute("data-trix-method")].call(this,n)}didKeyDownDialogInput(t,e){if(t.keyCode===13){t.preventDefault();const n=e.getAttribute("name"),r=this.getDialog(n);this.setAttribute(r)}if(t.keyCode===27)return t.preventDefault(),this.hideDialog()}updateActions(t){return this.actions=t,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((t,e)=>{t.disabled=this.actions[e]===!1})}eachActionButton(t){return Array.from(this.element.querySelectorAll(Cs)).map(e=>t(e,Po(e)))}updateAttributes(t){return this.attributes=t,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((t,e)=>(t.disabled=this.attributes[e]===!1,this.attributes[e]||this.dialogIsVisible(e)?(t.setAttribute("data-trix-active",""),t.classList.add("trix-active")):(t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"))))}eachAttributeButton(t){return Array.from(this.element.querySelectorAll(ys)).map(e=>t(e,pn(e)))}applyKeyboardCommand(t){const e=JSON.stringify(t.sort());for(const n of Array.from(this.element.querySelectorAll("[data-trix-key]"))){const r=n.getAttribute("data-trix-key").split("+");if(JSON.stringify(r.sort())===e)return Wn("mousedown",{onElement:n}),!0}return!1}dialogIsVisible(t){const e=this.getDialog(t);if(e)return e.hasAttribute("data-trix-active")}toggleDialog(t){return this.dialogIsVisible(t)?this.hideDialog():this.showDialog(t)}showDialog(t){var e,n;this.hideDialog(),(e=this.delegate)===null||e===void 0||e.toolbarWillShowDialog();const r=this.getDialog(t);r.setAttribute("data-trix-active",""),r.classList.add("trix-active"),Array.from(r.querySelectorAll("input[disabled]")).forEach(o=>{o.removeAttribute("disabled")});const s=pn(r);if(s){const o=Bo(r,t);o&&(o.value=this.attributes[s]||"",o.select())}return(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidShowDialog(t)}setAttribute(t){var e;const n=pn(t),r=Bo(t,n);return!r.willValidate||(r.setCustomValidity(""),r.checkValidity()&&this.isSafeAttribute(r))?((e=this.delegate)===null||e===void 0||e.toolbarDidUpdateAttribute(n,r.value),this.hideDialog()):(r.setCustomValidity("Invalid value"),r.setAttribute("data-trix-validate",""),r.classList.add("trix-validate"),r.focus())}isSafeAttribute(t){return!t.hasAttribute("data-trix-validate-href")||Bi.isValidAttribute("a","href",t.value)}removeAttribute(t){var e;const n=pn(t);return(e=this.delegate)===null||e===void 0||e.toolbarDidRemoveAttribute(n),this.hideDialog()}hideDialog(){const t=this.element.querySelector(ch);var e;if(t)return t.removeAttribute("data-trix-active"),t.classList.remove("trix-active"),this.resetDialogInputs(),(e=this.delegate)===null||e===void 0?void 0:e.toolbarDidHideDialog((n=>n.getAttribute("data-trix-dialog"))(t))}resetDialogInputs(){Array.from(this.element.querySelectorAll(No)).forEach(t=>{t.setAttribute("disabled","disabled"),t.removeAttribute("data-trix-validate"),t.classList.remove("trix-validate")})}getDialog(t){return this.element.querySelector("[data-trix-dialog=".concat(t,"]"))}}class Jn extends vl{constructor(t){let{editorElement:e,document:n,html:r}=t;super(...arguments),this.editorElement=e,this.selectionManager=new Ke(this.editorElement),this.selectionManager.delegate=this,this.composition=new _e,this.composition.delegate=this,this.attachmentManager=new ol(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=Rs.getLevel()===2?new Yn(this.editorElement):new pe(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new ml(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new El(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new cl(this.composition,this.selectionManager,this.editorElement),n?this.editor.loadDocument(n):this.editor.loadHTML(r)}registerSelectionManager(){return rn.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return rn.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(t){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(t){return this.currentAttributes=t,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(t){this.pasting&&(this.pastedRange=t)}compositionShouldAcceptFile(t){return this.notifyEditorElement("file-accept",{file:t})}compositionDidAddAttachment(t){const e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-add",{attachment:e})}compositionDidEditAttachment(t){this.compositionController.rerenderViewForObject(t);const e=this.attachmentManager.manageAttachment(t);return this.notifyEditorElement("attachment-edit",{attachment:e}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(t){return this.compositionController.invalidateViewForObject(t),this.notifyEditorElement("change")}compositionDidRemoveAttachment(t){const e=this.attachmentManager.unmanageAttachment(t);return this.notifyEditorElement("attachment-remove",{attachment:e})}compositionDidStartEditingAttachment(t,e){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(t),this.compositionController.installAttachmentEditorForAttachment(t,e),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(t){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(t){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=t,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(t,e){return this.toolbarController.hideDialog(),this.composition.editAttachment(t,e)}compositionControllerDidRequestDeselectingAttachment(t){const e=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(t);return this.selectionManager.setLocationRange(e[1])}compositionControllerWillUpdateAttachment(t){return this.editor.recordUndoEntry("Edit Attachment",{context:t.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(t){return this.removeAttachment(t)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(t){return this.recordFormattingUndoEntry(t)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(t){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:t})}inputControllerDidPaste(t){return t.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:t})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(t){return this.toolbarController.applyKeyboardCommand(t)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(t){return this.selectionManager.setLocationRangeFromPointRange(t)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(t){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!Ii(this.attachmentLocationRange,t)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(t,e){return this.invokeAction(t,e)}toolbarDidToggleAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.toggleCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(t,e){if(this.recordFormattingUndoEntry(t),this.composition.setCurrentAttribute(t,e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(t){if(this.recordFormattingUndoEntry(t),this.composition.removeCurrentAttribute(t),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(t){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(t){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:t})}toolbarDidHideDialog(t){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:t})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(t){return!!this.actionIsExternal(t)||!((e=this.actions[t])===null||e===void 0||(e=e.test)===null||e===void 0||!e.call(this));var e}invokeAction(t,e){return this.actionIsExternal(t)?this.notifyEditorElement("action-invoke",{actionName:t,invokingElement:e}):(n=this.actions[t])===null||n===void 0||(n=n.perform)===null||n===void 0?void 0:n.call(this);var n}actionIsExternal(t){return/^x-./.test(t)}getCurrentActions(){const t={};for(const e in this.actions)t[e]=this.canInvokeAction(e);return t}updateCurrentActions(){const t=this.getCurrentActions();if(!xn(t,this.currentActions))return this.currentActions=t,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let t=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(r=>{const{document:s,selectedRange:o}=t;t=r.call(this.editor,t)||{},t.document||(t.document=s),t.selectedRange||(t.selectedRange=o)}),e=t,n=this.composition.getSnapshot(),!Ii(e.selectedRange,n.selectedRange)||!e.document.isEqualTo(n.document))return this.composition.loadSnapshot(t);var e,n}updateInputElement(){const t=function(e,n){const r=jd[n];if(r)return r(e);throw new Error("unknown content type: ".concat(n))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(t)}notifyEditorElement(t,e){switch(t){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(t,e)}removeAttachment(t){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(t),this.render()}recordFormattingUndoEntry(t){const e=ht(t),n=this.selectionManager.getLocationRange();if(e||!me(n))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return[this.getLocationContext(),this.getTimeContext(),...Array.from(e)]}getLocationContext(){const t=this.selectionManager.getLocationRange();return me(t)?t[0].index:t}getTimeContext(){return us.interval>0?Math.floor(new Date().getTime()/us.interval):0}isFocused(){var t;return this.editorElement===((t=this.editorElement.ownerDocument)===null||t===void 0?void 0:t.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}}Ot(Jn,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return Rs.pickFiles(this.editor.insertFiles)}}}),Jn.proxyMethod("getSelectionManager().setLocationRange"),Jn.proxyMethod("getSelectionManager().getLocationRange");var hh=Object.freeze({__proto__:null,AttachmentEditorController:gl,CompositionController:ml,Controller:vl,EditorController:Jn,InputController:er,Level0InputController:pe,Level2InputController:Yn,ToolbarController:El}),fh=Object.freeze({__proto__:null,MutationObserver:Al,SelectionChangeObserver:qa}),ph=Object.freeze({__proto__:null,FileVerificationOperation:yl,ImagePreloadOperation:il});ja("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);class wl extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=Va.getDefaultHTML())}}let gh=0;const mh=function(i){if(!i.hasAttribute("contenteditable"))return i.setAttribute("contenteditable",""),function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.times=1,lt(t,e)}("focus",{onElement:i,withCallback:()=>vh(i)})},vh=function(i){return bh(i),Ah()},bh=function(i){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),lt("mscontrolselect",{onElement:i,preventDefault:!0})},Ah=function(i){var t,e;if((t=(e=document).queryCommandSupported)!==null&&t!==void 0&&t.call(e,"DefaultParagraphSeparator")){const{tagName:n}=Rt.default;if(["div","p"].includes(n))return document.execCommand("DefaultParagraphSeparator",!1,n)}},Vo=ri.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};ja("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(Qe,` figcaption textarea {
    resize: none;
}

%t `).concat(Qe,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(Qe,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(Vo.display,` !important;
    width: `).concat(Vo.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var fe=new WeakMap,jn=new WeakSet;class yh{constructor(t){var e,n;nl(e=this,n=jn),n.add(e),Kn(this,fe,{writable:!0,value:void 0}),this.element=t,Bs(this,fe,t.attachInternals())}connectedCallback(){vi(this,jn,bi).call(this)}disconnectedCallback(){}get labels(){return nt(this,fe).labels}get disabled(){var t;return(t=this.element.inputElement)===null||t===void 0?void 0:t.disabled}set disabled(t){this.element.toggleAttribute("disabled",t)}get required(){return this.element.hasAttribute("required")}set required(t){this.element.toggleAttribute("required",t),vi(this,jn,bi).call(this)}get validity(){return nt(this,fe).validity}get validationMessage(){return nt(this,fe).validationMessage}get willValidate(){return nt(this,fe).willValidate}setFormValue(t){vi(this,jn,bi).call(this)}checkValidity(){return nt(this,fe).checkValidity()}reportValidity(){return nt(this,fe).reportValidity()}setCustomValidity(t){vi(this,jn,bi).call(this,t)}}function bi(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const{required:t,value:e}=this.element,n=t&&!e,r=!!i,s=$("input",{required:t}),o=i||s.validationMessage;nt(this,fe).setValidity({valueMissing:n,customError:r},o)}var zr=new WeakMap,$r=new WeakMap,Kr=new WeakMap;class Ch{constructor(t){Kn(this,zr,{writable:!0,value:void 0}),Kn(this,$r,{writable:!0,value:e=>{e.defaultPrevented||e.target===this.element.form&&this.element.reset()}}),Kn(this,Kr,{writable:!0,value:e=>{if(e.defaultPrevented||this.element.contains(e.target))return;const n=Oe(e.target,{matchingSelector:"label"});n&&Array.from(this.labels).includes(n)&&this.element.focus()}}),this.element=t}connectedCallback(){Bs(this,zr,function(t){if(t.hasAttribute("aria-label")||t.hasAttribute("aria-labelledby"))return;const e=function(){const n=Array.from(t.labels).map(s=>{if(!s.contains(t))return s.textContent}).filter(s=>s),r=n.join(" ");return r?t.setAttribute("aria-label",r):t.removeAttribute("aria-label")};return e(),lt("focus",{onElement:t,withCallback:e})}(this.element)),window.addEventListener("reset",nt(this,$r),!1),window.addEventListener("click",nt(this,Kr),!1)}disconnectedCallback(){var t;(t=nt(this,zr))===null||t===void 0||t.destroy(),window.removeEventListener("reset",nt(this,$r),!1),window.removeEventListener("click",nt(this,Kr),!1)}get labels(){const t=[];this.element.id&&this.element.ownerDocument&&t.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));const e=Oe(this.element,{matchingSelector:"label"});return e&&[this.element,null].includes(e.control)&&t.push(e),t}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(t){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(t){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(t){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(t){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}}var At=new WeakMap;class Vi extends HTMLElement{constructor(){super(),Kn(this,At,{writable:!0,value:void 0}),Bs(this,At,this.constructor.formAssociated?new yh(this):new Ch(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++gh),this.trixId)}get labels(){return nt(this,At).labels}get disabled(){return nt(this,At).disabled}set disabled(t){nt(this,At).disabled=t}get required(){return nt(this,At).required}set required(t){nt(this,At).required=t}get validity(){return nt(this,At).validity}get validationMessage(){return nt(this,At).validationMessage}get willValidate(){return nt(this,At).willValidate}get type(){return this.localName}get toolbarElement(){var t;if(this.hasAttribute("toolbar"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("toolbar"));if(this.parentNode){const e="trix-toolbar-".concat(this.trixId);return this.setAttribute("toolbar",e),this.internalToolbar=$("trix-toolbar",{id:e}),this.parentNode.insertBefore(this.internalToolbar,this),this.internalToolbar}}get form(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.form}get inputElement(){var t;if(this.hasAttribute("input"))return(t=this.ownerDocument)===null||t===void 0?void 0:t.getElementById(this.getAttribute("input"));if(this.parentNode){const e="trix-input-".concat(this.trixId);this.setAttribute("input",e);const n=$("input",{type:"hidden",id:e});return this.parentNode.insertBefore(n,this.nextElementSibling),n}}get editor(){var t;return(t=this.editorController)===null||t===void 0?void 0:t.editor}get name(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.name}get value(){var t;return(t=this.inputElement)===null||t===void 0?void 0:t.value}set value(t){var e;this.defaultValue=t,(e=this.editor)===null||e===void 0||e.loadHTML(this.defaultValue)}attributeChangedCallback(t,e,n){t==="connected"&&this.isConnected&&e!=null&&e!==n&&requestAnimationFrame(()=>this.reconnect())}notify(t,e){if(this.editorController)return Wn("trix-".concat(t),{onElement:this,attributes:e})}setFormValue(t){this.inputElement&&(this.inputElement.value=t,nt(this,At).setFormValue(t))}connectedCallback(){this.hasAttribute("data-trix-internal")||(mh(this),function(t){t.hasAttribute("role")||t.setAttribute("role","textbox")}(this),this.editorController||(Wn("trix-before-initialize",{onElement:this}),this.editorController=new Jn({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>Wn("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),nt(this,At).connectedCallback(),this.toggleAttribute("connected",!0),function(t){!document.querySelector(":focus")&&t.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===t&&t.focus()}(this))}disconnectedCallback(){var t;(t=this.editorController)===null||t===void 0||t.unregisterSelectionManager(),nt(this,At).disconnectedCallback(),this.toggleAttribute("connected",!1)}reconnect(){this.removeInternalToolbar(),this.disconnectedCallback(),this.connectedCallback()}removeInternalToolbar(){var t;(t=this.internalToolbar)===null||t===void 0||t.remove(),this.internalToolbar=null}checkValidity(){return nt(this,At).checkValidity()}reportValidity(){return nt(this,At).reportValidity()}setCustomValidity(t){nt(this,At).setCustomValidity(t)}formDisabledCallback(t){this.inputElement&&(this.inputElement.disabled=t),this.toggleAttribute("contenteditable",!t)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}}Ot(Vi,"formAssociated","ElementInternals"in window),Ot(Vi,"observedAttributes",["connected"]);const jo={VERSION:xc,config:si,core:Hd,models:pl,views:$d,controllers:hh,observers:fh,operations:ph,elements:Object.freeze({__proto__:null,TrixEditorElement:Vi,TrixToolbarElement:wl}),filters:Object.freeze({__proto__:null,Filter:ll,attachmentGalleryFilter:ul})};Object.assign(jo,pl),window.Trix=jo,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",wl),customElements.get("trix-editor")||customElements.define("trix-editor",Vi)},0);function Re(i){return typeof i=="string"||i instanceof String}function Ho(i){var t;return typeof i=="object"&&i!=null&&(i==null||(t=i.constructor)==null?void 0:t.name)==="Object"}function kl(i,t){return Array.isArray(t)?kl(i,(e,n)=>t.includes(n)):Object.entries(i).reduce((e,n)=>{let[r,s]=n;return t(s,r)&&(e[r]=s),e},{})}const L={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function xh(i){switch(i){case L.LEFT:return L.FORCE_LEFT;case L.RIGHT:return L.FORCE_RIGHT;default:return i}}function Yr(i){return i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function ji(i,t){if(t===i)return!0;const e=Array.isArray(t),n=Array.isArray(i);let r;if(e&&n){if(t.length!=i.length)return!1;for(r=0;r<t.length;r++)if(!ji(t[r],i[r]))return!1;return!0}if(e!=n)return!1;if(t&&i&&typeof t=="object"&&typeof i=="object"){const s=t instanceof Date,o=i instanceof Date;if(s&&o)return t.getTime()==i.getTime();if(s!=o)return!1;const a=t instanceof RegExp,l=i instanceof RegExp;if(a&&l)return t.toString()==i.toString();if(a!=l)return!1;const c=Object.keys(t);for(r=0;r<c.length;r++)if(!Object.prototype.hasOwnProperty.call(i,c[r]))return!1;for(r=0;r<c.length;r++)if(!ji(i[c[r]],t[c[r]]))return!1;return!0}else if(t&&i&&typeof t=="function"&&typeof i=="function")return t.toString()===i.toString();return!1}class Eh{constructor(t){for(Object.assign(this,t);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?L.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?L.RIGHT:L.LEFT}}function j(i,t){return new j.InputMask(i,t)}function Sl(i){if(i==null)throw new Error("mask property should be defined");return i instanceof RegExp?j.MaskedRegExp:Re(i)?j.MaskedPattern:i===Date?j.MaskedDate:i===Number?j.MaskedNumber:Array.isArray(i)||i===Array?j.MaskedDynamic:j.Masked&&i.prototype instanceof j.Masked?i:j.Masked&&i instanceof j.Masked?i.constructor:i instanceof Function?j.MaskedFunction:(console.warn("Mask not found for mask",i),j.Masked)}function ti(i){if(!i)throw new Error("Options in not defined");if(j.Masked){if(i.prototype instanceof j.Masked)return{mask:i};const{mask:t=void 0,...e}=i instanceof j.Masked?{mask:i}:Ho(i)&&i.mask instanceof j.Masked?i:{};if(t){const n=t.mask;return{...kl(t,(r,s)=>!s.startsWith("_")),mask:t.constructor,_mask:n,...e}}}return Ho(i)?{...i}:{mask:i}}function ve(i){if(j.Masked&&i instanceof j.Masked)return i;const t=ti(i),e=Sl(t.mask);if(!e)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===e&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new e(t)}j.createMask=ve;class Vs{get selectionStart(){let t;try{t=this._unsafeSelectionStart}catch{}return t??this.value.length}get selectionEnd(){let t;try{t=this._unsafeSelectionEnd}catch{}return t??this.value.length}select(t,e){if(!(t==null||e==null||t===this.selectionStart&&e===this.selectionEnd))try{this._unsafeSelect(t,e)}catch{}}get isActive(){return!1}}j.MaskElement=Vs;const Uo=90,wh=89;class ir extends Vs{constructor(t){super(),this.input=t,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var t,e,n;return(t=(e=(n=this.input).getRootNode)==null?void 0:e.call(n))!=null?t:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(t){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",t.drop),this.input.addEventListener("click",t.click),this.input.addEventListener("focus",t.focus),this.input.addEventListener("blur",t.commit),this._handlers=t}_onKeydown(t){if(this._handlers.redo&&(t.keyCode===Uo&&t.shiftKey&&(t.metaKey||t.ctrlKey)||t.keyCode===wh&&t.ctrlKey))return t.preventDefault(),this._handlers.redo(t);if(this._handlers.undo&&t.keyCode===Uo&&(t.metaKey||t.ctrlKey))return t.preventDefault(),this._handlers.undo(t);t.isComposing||this._handlers.selectionChange(t)}_onBeforeinput(t){if(t.inputType==="historyUndo"&&this._handlers.undo)return t.preventDefault(),this._handlers.undo(t);if(t.inputType==="historyRedo"&&this._handlers.redo)return t.preventDefault(),this._handlers.redo(t)}_onCompositionEnd(t){this._handlers.input(t)}_onInput(t){t.isComposing||this._handlers.input(t)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}j.HTMLMaskElement=ir;class kh extends ir{constructor(t){super(t),this.input=t}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(t,e){this.input.setSelectionRange(t,e)}get value(){return this.input.value}set value(t){this.input.value=t}}j.HTMLMaskElement=ir;class Dl extends ir{get _unsafeSelectionStart(){const t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,r=e&&e.focusOffset;return r==null||n==null||n<r?n:r}get _unsafeSelectionEnd(){const t=this.rootElement,e=t.getSelection&&t.getSelection(),n=e&&e.anchorOffset,r=e&&e.focusOffset;return r==null||n==null||n>r?n:r}_unsafeSelect(t,e){if(!this.rootElement.createRange)return;const n=this.rootElement.createRange();n.setStart(this.input.firstChild||this.input,t),n.setEnd(this.input.lastChild||this.input,e);const r=this.rootElement,s=r.getSelection&&r.getSelection();s&&(s.removeAllRanges(),s.addRange(n))}get value(){return this.input.textContent||""}set value(t){this.input.textContent=t}}j.HTMLContenteditableMaskElement=Dl;class rr{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(t){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(t),this.states.length>rr.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(t){return this.currentIndex=Math.min(Math.max(this.currentIndex+t,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}rr.MAX_LENGTH=100;class Sh{constructor(t,e){this.el=t instanceof Vs?t:t.isContentEditable&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"?new Dl(t):new kh(t),this.masked=ve(e),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new rr,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(t){var e;return t==null||((e=this.masked)==null?void 0:e.maskEquals(t))}get mask(){return this.masked.mask}set mask(t){if(this.maskEquals(t))return;if(!(t instanceof j.Masked)&&this.masked.constructor===Sl(t)){this.masked.updateOptions({mask:t});return}const e=t instanceof j.Masked?t:ve({mask:t});e.unmaskedValue=this.masked.unmaskedValue,this.masked=e}get value(){return this._value}set value(t){this.value!==t&&(this.masked.value=t,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(t){this.unmaskedValue!==t&&(this.masked.unmaskedValue=t,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(t){this.rawInputValue!==t&&(this.masked.rawInputValue=t,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(t){this.masked.typedValueEquals(t)||(this.masked.typedValue=t,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(t,e){const n=this._listeners[t];n&&n.forEach(r=>r(e))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(t){!this.el||!this.el.isActive||(this.el.select(t,t),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(t){const e=this.masked.unmaskedValue,n=this.masked.value,r=this.masked.rawInputValue,s=this.displayValue,o=this.unmaskedValue!==e||this.value!==n||this._rawInputValue!==r;this._unmaskedValue=e,this._value=n,this._rawInputValue=r,this.el.value!==s&&(this.el.value=s),t==="auto"?this.alignCursor():t!=null&&(this.cursorPos=t),o&&this._fireChangeEvents(),!this._historyChanging&&(o||this.history.isEmpty)&&this.history.push({unmaskedValue:e,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(t){const{mask:e,...n}=t,r=!this.maskEquals(e),s=this.masked.optionsIsChanged(n);r&&(this.mask=e),s&&this.masked.updateOptions(n),(r||s)&&this.updateControl()}updateCursor(t){t!=null&&(this.cursorPos=t,this._delayUpdateCursor(t))}_delayUpdateCursor(t){this._abortUpdateCursor(),this._changingCursorPos=t,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,L.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(t,e){return this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e),this}off(t,e){if(!this._listeners[t])return this;if(!e)return delete this._listeners[t],this;const n=this._listeners[t].indexOf(e);return n>=0&&this._listeners[t].splice(n,1),this}_onInput(t){this._inputEvent=t,this._abortUpdateCursor();const e=new Eh({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),n=this.masked.rawInputValue,r=this.masked.splice(e.startChangePos,e.removed.length,e.inserted,e.removeDirection,{input:!0,raw:!0}).offset,s=n===this.masked.rawInputValue?e.removeDirection:L.NONE;let o=this.masked.nearestInputPos(e.startChangePos+r,s);s!==L.NONE&&(o=this.masked.nearestInputPos(o,L.NONE)),this.updateControl(o),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(t){t.preventDefault(),t.stopPropagation()}_onFocus(t){this.alignCursorFriendly()}_onClick(t){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(t){t&&(this._historyChanging=!0,this.unmaskedValue=t.unmaskedValue,this.el.select(t.selection.start,t.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}j.InputMask=Sh;class q{static normalize(t){return Array.isArray(t)?t:[t,new q]}constructor(t){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},t)}aggregate(t){return this.inserted+=t.inserted,this.rawInserted+=t.rawInserted,this.tailShift+=t.tailShift,this.skip=this.skip||t.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(t){return this.inserted===t.inserted&&this.tailShift===t.tailShift&&this.rawInserted===t.rawInserted&&this.skip===t.skip}}j.ChangeDetails=q;class ae{constructor(t,e,n){t===void 0&&(t=""),e===void 0&&(e=0),this.value=t,this.from=e,this.stop=n}toString(){return this.value}extend(t){this.value+=String(t)}appendTo(t){return t.append(this.toString(),{tail:!0}).aggregate(t._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(t){Object.assign(this,t)}unshift(t){if(!this.value.length||t!=null&&this.from>=t)return"";const e=this.value[0];return this.value=this.value.slice(1),e}shift(){if(!this.value.length)return"";const t=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),t}}class xt{constructor(t){this._value="",this._update({...xt.DEFAULTS,...t}),this._initialized=!0}updateOptions(t){this.optionsIsChanged(t)&&this.withValueRefresh(this._update.bind(this,t))}_update(t){Object.assign(this,t)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value}reset(){this._value=""}get value(){return this._value}set value(t){this.resolve(t,{input:!0})}resolve(t,e){e===void 0&&(e={input:!0}),this.reset(),this.append(t,e,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(t){this.resolve(t,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(t){this.format?this.value=this.format(t,this):this.unmaskedValue=String(t)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(t){this.resolve(t,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(t,e){return t}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),Math.min(this.displayValue.length,e-t)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),this.displayValue.slice(t,e)}extractTail(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),new ae(this.extractInput(t,e),t)}appendTail(t){return Re(t)&&(t=new ae(String(t))),t.appendTo(this)}_appendCharRaw(t,e){return t?(this._value+=t,new q({inserted:t,rawInserted:t})):new q}_appendChar(t,e,n){e===void 0&&(e={});const r=this.state;let s;if([t,s]=this.doPrepareChar(t,e),t&&(s=s.aggregate(this._appendCharRaw(t,e)),!s.rawInserted&&this.autofix==="pad")){const o=this.state;this.state=r;let a=this.pad(e);const l=this._appendCharRaw(t,e);a=a.aggregate(l),l.rawInserted||a.equals(s)?s=a:this.state=o}if(s.inserted){let o,a=this.doValidate(e)!==!1;if(a&&n!=null){const l=this.state;if(this.overwrite===!0){o=n.state;for(let h=0;h<s.rawInserted.length;++h)n.unshift(this.displayValue.length-s.tailShift)}let c=this.appendTail(n);if(a=c.rawInserted.length===n.toString().length,!(a&&c.inserted)&&this.overwrite==="shift"){this.state=l,o=n.state;for(let h=0;h<s.rawInserted.length;++h)n.shift();c=this.appendTail(n),a=c.rawInserted.length===n.toString().length}a&&c.inserted&&(this.state=l)}a||(s=new q,this.state=r,n&&o&&(n.state=o))}return s}_appendPlaceholder(){return new q}_appendEager(){return new q}append(t,e,n){if(!Re(t))throw new Error("value should be string");const r=Re(n)?new ae(String(n)):n;e!=null&&e.tail&&(e._beforeTailState=this.state);let s;[t,s]=this.doPrepare(t,e);for(let o=0;o<t.length;++o){const a=this._appendChar(t[o],e,r);if(!a.rawInserted&&!this.doSkipInvalid(t[o],e,r))break;s.aggregate(a)}return(this.eager===!0||this.eager==="append")&&e!=null&&e.input&&t&&s.aggregate(this._appendEager()),r!=null&&(s.tailShift+=this.appendTail(r).tailShift),s}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),this._value=this.displayValue.slice(0,t)+this.displayValue.slice(e),new q}withValueRefresh(t){if(this._refreshing||!this._initialized)return t();this._refreshing=!0;const e=this.rawInputValue,n=this.value,r=t();return this.rawInputValue=e,this.value&&this.value!==n&&n.indexOf(this.value)===0&&(this.append(n.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,r}runIsolated(t){if(this._isolated||!this._initialized)return t(this);this._isolated=!0;const e=this.state,n=t(this);return this.state=e,delete this._isolated,n}doSkipInvalid(t,e,n){return!!this.skipInvalid}doPrepare(t,e){return e===void 0&&(e={}),q.normalize(this.prepare?this.prepare(t,this,e):t)}doPrepareChar(t,e){return e===void 0&&(e={}),q.normalize(this.prepareChar?this.prepareChar(t,this,e):t)}doValidate(t){return(!this.validate||this.validate(this.value,this,t))&&(!this.parent||this.parent.doValidate(t))}doCommit(){this.commit&&this.commit(this.value,this)}splice(t,e,n,r,s){n===void 0&&(n=""),r===void 0&&(r=L.NONE),s===void 0&&(s={input:!0});const o=t+e,a=this.extractTail(o),l=this.eager===!0||this.eager==="remove";let c;l&&(r=xh(r),c=this.extractInput(0,o,{raw:!0}));let h=t;const p=new q;if(r!==L.NONE&&(h=this.nearestInputPos(t,e>1&&t!==0&&!l?L.NONE:r),p.tailShift=h-t),p.aggregate(this.remove(h)),l&&r!==L.NONE&&c===this.rawInputValue)if(r===L.FORCE_LEFT){let m;for(;c===this.rawInputValue&&(m=this.displayValue.length);)p.aggregate(new q({tailShift:-1})).aggregate(this.remove(m-1))}else r===L.FORCE_RIGHT&&a.unshift();return p.aggregate(this.append(n,s,a))}maskEquals(t){return this.mask===t}optionsIsChanged(t){return!ji(this,t)}typedValueEquals(t){const e=this.typedValue;return t===e||xt.EMPTY_VALUES.includes(t)&&xt.EMPTY_VALUES.includes(e)||(this.format?this.format(t,this)===this.format(this.typedValue,this):!1)}pad(t){return new q}}xt.DEFAULTS={skipInvalid:!0};xt.EMPTY_VALUES=[void 0,null,""];j.Masked=xt;class Ge{constructor(t,e){t===void 0&&(t=[]),e===void 0&&(e=0),this.chunks=t,this.from=e}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=Re(t)?new ae(String(t)):t;const e=this.chunks[this.chunks.length-1],n=e&&(e.stop===t.stop||t.stop==null)&&t.from===e.from+e.toString().length;if(t instanceof ae)n?e.extend(t.toString()):this.chunks.push(t);else if(t instanceof Ge){if(t.stop==null){let r;for(;t.chunks.length&&t.chunks[0].stop==null;)r=t.chunks.shift(),r.from+=t.from,this.extend(r)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(t){if(!(t instanceof j.MaskedPattern))return new ae(this.toString()).appendTo(t);const e=new q;for(let n=0;n<this.chunks.length;++n){const r=this.chunks[n],s=t._mapPosToBlock(t.displayValue.length),o=r.stop;let a;if(o!=null&&(!s||s.index<=o)&&((r instanceof Ge||t._stops.indexOf(o)>=0)&&e.aggregate(t._appendPlaceholder(o)),a=r instanceof Ge&&t._blocks[o]),a){const l=a.appendTail(r);e.aggregate(l);const c=r.toString().slice(l.rawInserted.length);c&&e.aggregate(t.append(c,{tail:!0}))}else e.aggregate(t.append(r.toString(),{tail:!0}))}return e}get state(){return{chunks:this.chunks.map(t=>t.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(t){const{chunks:e,...n}=t;Object.assign(this,n),this.chunks=e.map(r=>{const s="chunks"in r?new Ge:new ae;return s.state=r,s})}unshift(t){if(!this.chunks.length||t!=null&&this.from>=t)return"";const e=t!=null?t-this.from:t;let n=0;for(;n<this.chunks.length;){const r=this.chunks[n],s=r.unshift(e);if(r.toString()){if(!s)break;++n}else this.chunks.splice(n,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let t=this.chunks.length-1;for(;0<=t;){const e=this.chunks[t],n=e.shift();if(e.toString()){if(!n)break;--t}else this.chunks.splice(t,1);if(n)return n}return""}}class Dh{constructor(t,e){this.masked=t,this._log=[];const{offset:n,index:r}=t._mapPosToBlock(e)||(e<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=n,this.index=r,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(t){Object.assign(this,t)}pushState(){this._log.push(this.state)}popState(){const t=this._log.pop();return t&&(this.state=t),t}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(t){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((e=this.block)==null?void 0:e.displayValue.length)||0){var e;if(t())return this.ok=!0}return this.ok=!1}_pushRight(t){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(t())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,L.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,L.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,L.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,L.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,L.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,L.NONE),!0})}}class _l{constructor(t){Object.assign(this,t),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),this._value=this._value.slice(0,t)+this._value.slice(e),this._value||(this._isRawInput=!1),new q}nearestInputPos(t,e){e===void 0&&(e=L.NONE);const n=0,r=this._value.length;switch(e){case L.LEFT:case L.FORCE_LEFT:return n;case L.NONE:case L.RIGHT:case L.FORCE_RIGHT:default:return r}}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),this._isRawInput?e-t:0}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this._value.length),n===void 0&&(n={}),n.raw&&this._isRawInput&&this._value.slice(t,e)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(t,e){if(e===void 0&&(e={}),this.isFilled)return new q;const n=this.eager===!0||this.eager==="append",s=this.char===t&&(this.isUnmasking||e.input||e.raw)&&(!e.raw||!n)&&!e.tail,o=new q({inserted:this.char,rawInserted:s?this.char:""});return this._value=this.char,this._isRawInput=s&&(e.raw||e.input),o}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const t=new q;return this.isFilled||(this._value=t.inserted=this.char),t}extractTail(){return new ae("")}appendTail(t){return Re(t)&&(t=new ae(String(t))),t.appendTo(this)}append(t,e,n){const r=this._appendChar(t[0],e);return n!=null&&(r.tailShift+=this.appendTail(n).tailShift),r}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(t){this._value=t._value,this._isRawInput=!!t._rawInputValue}pad(t){return this._appendPlaceholder()}}class Hi{constructor(t){const{parent:e,isOptional:n,placeholderChar:r,displayChar:s,lazy:o,eager:a,...l}=t;this.masked=ve(l),Object.assign(this,{parent:e,isOptional:n,placeholderChar:r,displayChar:s,lazy:o,eager:a})}reset(){this.isFilled=!1,this.masked.reset()}remove(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),t===0&&e>=1?(this.isFilled=!1,this.masked.remove(t,e)):new q}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(t,e){if(e===void 0&&(e={}),this.isFilled)return new q;const n=this.masked.state;let r=this.masked._appendChar(t,this.currentMaskFlags(e));return r.inserted&&this.doValidate(e)===!1&&(r=new q,this.masked.state=n),!r.inserted&&!this.isOptional&&!this.lazy&&!e.input&&(r.inserted=this.placeholderChar),r.skip=!r.inserted&&!this.isOptional,this.isFilled=!!r.inserted,r}append(t,e,n){return this.masked.append(t,this.currentMaskFlags(e),n)}_appendPlaceholder(){return this.isFilled||this.isOptional?new q:(this.isFilled=!0,new q({inserted:this.placeholderChar}))}_appendEager(){return new q}extractTail(t,e){return this.masked.extractTail(t,e)}appendTail(t){return this.masked.appendTail(t)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),this.masked.extractInput(t,e,n)}nearestInputPos(t,e){e===void 0&&(e=L.NONE);const n=0,r=this.value.length,s=Math.min(Math.max(t,n),r);switch(e){case L.LEFT:case L.FORCE_LEFT:return this.isComplete?s:n;case L.RIGHT:case L.FORCE_RIGHT:return this.isComplete?s:r;case L.NONE:default:return s}}totalInputPositions(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.value.length),this.value.slice(t,e).length}doValidate(t){return this.masked.doValidate(this.currentMaskFlags(t))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(t)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(t){this.masked.state=t.masked,this.isFilled=t.isFilled}currentMaskFlags(t){var e;return{...t,_beforeTailState:(t==null||(e=t._beforeTailState)==null?void 0:e.masked)||(t==null?void 0:t._beforeTailState)}}pad(t){return new q}}Hi.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class _h extends xt{updateOptions(t){super.updateOptions(t)}_update(t){const e=t.mask;e&&(t.validate=n=>n.search(e)>=0),super._update(t)}}j.MaskedRegExp=_h;class Et extends xt{constructor(t){super({...Et.DEFAULTS,...t,definitions:Object.assign({},Hi.DEFAULT_DEFINITIONS,t==null?void 0:t.definitions)})}updateOptions(t){super.updateOptions(t)}_update(t){t.definitions=Object.assign({},this.definitions,t.definitions),super._update(t),this._rebuildMask()}_rebuildMask(){const t=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const e=this.mask;if(!e||!t)return;let n=!1,r=!1;for(let s=0;s<e.length;++s){if(this.blocks){const c=e.slice(s),h=Object.keys(this.blocks).filter(m=>c.indexOf(m)===0);h.sort((m,k)=>k.length-m.length);const p=h[0];if(p){const{expose:m,repeat:k,...v}=ti(this.blocks[p]),y={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...v,repeat:k,parent:this},C=k!=null?new j.RepeatBlock(y):ve(y);C&&(this._blocks.push(C),m&&(this.exposeBlock=C),this._maskedBlocks[p]||(this._maskedBlocks[p]=[]),this._maskedBlocks[p].push(this._blocks.length-1)),s+=p.length-1;continue}}let o=e[s],a=o in t;if(o===Et.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(o==="{"||o==="}"){n=!n;continue}if(o==="["||o==="]"){r=!r;continue}if(o===Et.ESCAPE_CHAR){if(++s,o=e[s],!o)break;a=!1}const l=a?new Hi({isOptional:r,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...ti(t[o]),parent:this}):new _l({char:o,eager:this.eager,isUnmasking:n});this._blocks.push(l)}}get state(){return{...super.state,_blocks:this._blocks.map(t=>t.state)}}set state(t){if(!t){this.reset();return}const{_blocks:e,...n}=t;this._blocks.forEach((r,s)=>r.state=e[s]),super.state=n}reset(){super.reset(),this._blocks.forEach(t=>t.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(t=>t.isComplete)}get isFilled(){return this._blocks.every(t=>t.isFilled)}get isFixed(){return this._blocks.every(t=>t.isFixed)}get isOptional(){return this._blocks.every(t=>t.isOptional)}doCommit(){this._blocks.forEach(t=>t.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((t,e)=>t+=e.unmaskedValue,"")}set unmaskedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=t,this.appendTail(e),this.doCommit()}else super.unmaskedValue=t}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((t,e)=>t+=e.value,"")}set value(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=t,this.appendTail(e),this.doCommit()}else super.value=t}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(t){if(this.exposeBlock){const e=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=t,this.appendTail(e),this.doCommit()}else super.typedValue=t}get displayValue(){return this._blocks.reduce((t,e)=>t+=e.displayValue,"")}appendTail(t){return super.appendTail(t).aggregate(this._appendPlaceholder())}_appendEager(){var t;const e=new q;let n=(t=this._mapPosToBlock(this.displayValue.length))==null?void 0:t.index;if(n==null)return e;this._blocks[n].isFilled&&++n;for(let r=n;r<this._blocks.length;++r){const s=this._blocks[r]._appendEager();if(!s.inserted)break;e.aggregate(s)}return e}_appendCharRaw(t,e){e===void 0&&(e={});const n=this._mapPosToBlock(this.displayValue.length),r=new q;if(!n)return r;for(let o=n.index,a;a=this._blocks[o];++o){var s;const l=a._appendChar(t,{...e,_beforeTailState:(s=e._beforeTailState)==null||(s=s._blocks)==null?void 0:s[o]});if(r.aggregate(l),l.consumed)break}return r}extractTail(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=new Ge;return t===e||this._forEachBlocksInRange(t,e,(r,s,o,a)=>{const l=r.extractTail(o,a);l.stop=this._findStopBefore(s),l.from=this._blockStartPos(s),l instanceof Ge&&(l.blockIndex=s),n.extend(l)}),n}extractInput(t,e,n){if(t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),n===void 0&&(n={}),t===e)return"";let r="";return this._forEachBlocksInRange(t,e,(s,o,a,l)=>{r+=s.extractInput(a,l,n)}),r}_findStopBefore(t){let e;for(let n=0;n<this._stops.length;++n){const r=this._stops[n];if(r<=t)e=r;else break}return e}_appendPlaceholder(t){const e=new q;if(this.lazy&&t==null)return e;const n=this._mapPosToBlock(this.displayValue.length);if(!n)return e;const r=n.index,s=t??this._blocks.length;return this._blocks.slice(r,s).forEach(o=>{if(!o.lazy||t!=null){var a;e.aggregate(o._appendPlaceholder((a=o._blocks)==null?void 0:a.length))}}),e}_mapPosToBlock(t){let e="";for(let n=0;n<this._blocks.length;++n){const r=this._blocks[n],s=e.length;if(e+=r.displayValue,t<=e.length)return{index:n,offset:t-s}}}_blockStartPos(t){return this._blocks.slice(0,t).reduce((e,n)=>e+=n.displayValue.length,0)}_forEachBlocksInRange(t,e,n){e===void 0&&(e=this.displayValue.length);const r=this._mapPosToBlock(t);if(r){const s=this._mapPosToBlock(e),o=s&&r.index===s.index,a=r.offset,l=s&&o?s.offset:this._blocks[r.index].displayValue.length;if(n(this._blocks[r.index],r.index,a,l),s&&!o){for(let c=r.index+1;c<s.index;++c)n(this._blocks[c],c,0,this._blocks[c].displayValue.length);n(this._blocks[s.index],s.index,0,s.offset)}}}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=super.remove(t,e);return this._forEachBlocksInRange(t,e,(r,s,o,a)=>{n.aggregate(r.remove(o,a))}),n}nearestInputPos(t,e){if(e===void 0&&(e=L.NONE),!this._blocks.length)return 0;const n=new Dh(this,t);if(e===L.NONE)return n.pushRightBeforeInput()||(n.popState(),n.pushLeftBeforeInput())?n.pos:this.displayValue.length;if(e===L.LEFT||e===L.FORCE_LEFT){if(e===L.LEFT){if(n.pushRightBeforeFilled(),n.ok&&n.pos===t)return t;n.popState()}if(n.pushLeftBeforeInput(),n.pushLeftBeforeRequired(),n.pushLeftBeforeFilled(),e===L.LEFT){if(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.ok&&n.pos<=t||(n.popState(),n.ok&&n.pos<=t))return n.pos;n.popState()}return n.ok?n.pos:e===L.FORCE_LEFT?0:(n.popState(),n.ok||(n.popState(),n.ok)?n.pos:0)}return e===L.RIGHT||e===L.FORCE_RIGHT?(n.pushRightBeforeInput(),n.pushRightBeforeRequired(),n.pushRightBeforeFilled()?n.pos:e===L.FORCE_RIGHT?this.displayValue.length:(n.popState(),n.ok||(n.popState(),n.ok)?n.pos:this.nearestInputPos(t,L.LEFT))):t}totalInputPositions(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);let n=0;return this._forEachBlocksInRange(t,e,(r,s,o,a)=>{n+=r.totalInputPositions(o,a)}),n}maskedBlock(t){return this.maskedBlocks(t)[0]}maskedBlocks(t){const e=this._maskedBlocks[t];return e?e.map(n=>this._blocks[n]):[]}pad(t){const e=new q;return this._forEachBlocksInRange(0,this.displayValue.length,n=>e.aggregate(n.pad(t))),e}}Et.DEFAULTS={...xt.DEFAULTS,lazy:!0,placeholderChar:"_"};Et.STOP_CHAR="`";Et.ESCAPE_CHAR="\\";Et.InputDefinition=Hi;Et.FixedDefinition=_l;j.MaskedPattern=Et;class Ti extends Et{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){const{to:e=this.to||0,from:n=this.from||0,maxLength:r=this.maxLength||0,autofix:s=this.autofix,...o}=t;this.to=e,this.from=n,this.maxLength=Math.max(String(e).length,r),this.autofix=s;const a=String(this.from).padStart(this.maxLength,"0"),l=String(this.to).padStart(this.maxLength,"0");let c=0;for(;c<l.length&&l[c]===a[c];)++c;o.mask=l.slice(0,c).replace(/0/g,"\\0")+"0".repeat(this.maxLength-c),super._update(o)}get isComplete(){return super.isComplete&&!!this.value}boundaries(t){let e="",n="";const[,r,s]=t.match(/^(\D*)(\d*)(\D*)/)||[];return s&&(e="0".repeat(r.length)+s,n="9".repeat(r.length)+s),e=e.padEnd(this.maxLength,"0"),n=n.padEnd(this.maxLength,"9"),[e,n]}doPrepareChar(t,e){e===void 0&&(e={});let n;return[t,n]=super.doPrepareChar(t.replace(/\D/g,""),e),t||(n.skip=!this.isComplete),[t,n]}_appendCharRaw(t,e){if(e===void 0&&(e={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(t,e);const n=String(this.from).padStart(this.maxLength,"0"),r=String(this.to).padStart(this.maxLength,"0"),[s,o]=this.boundaries(this.value+t);return Number(o)<this.from?super._appendCharRaw(n[this.value.length],e):Number(s)>this.to?!e.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(n[this.value.length],e).aggregate(this._appendCharRaw(t,e)):super._appendCharRaw(r[this.value.length],e):super._appendCharRaw(t,e)}doValidate(t){const e=this.value;if(e.search(/[^0]/)===-1&&e.length<=this._matchFrom)return!0;const[r,s]=this.boundaries(e);return this.from<=Number(s)&&Number(r)<=this.to&&super.doValidate(t)}pad(t){const e=new q;if(this.value.length===this.maxLength)return e;const n=this.value,r=this.maxLength-this.value.length;if(r){this.reset();for(let s=0;s<r;++s)e.aggregate(super._appendCharRaw("0",t));n.split("").forEach(s=>this._appendCharRaw(s))}return e}}j.MaskedRange=Ti;const Th="d{.}`m{.}`Y";class ge extends Et{static extractPatternOptions(t){const{mask:e,pattern:n,...r}=t;return{...r,mask:Re(e)?e:n}}constructor(t){super(ge.extractPatternOptions({...ge.DEFAULTS,...t}))}updateOptions(t){super.updateOptions(t)}_update(t){const{mask:e,pattern:n,blocks:r,...s}={...ge.DEFAULTS,...t},o=Object.assign({},ge.GET_DEFAULT_BLOCKS());t.min&&(o.Y.from=t.min.getFullYear()),t.max&&(o.Y.to=t.max.getFullYear()),t.min&&t.max&&o.Y.from===o.Y.to&&(o.m.from=t.min.getMonth()+1,o.m.to=t.max.getMonth()+1,o.m.from===o.m.to&&(o.d.from=t.min.getDate(),o.d.to=t.max.getDate())),Object.assign(o,this.blocks,r),super._update({...s,mask:Re(e)?e:n,blocks:o})}doValidate(t){const e=this.date;return super.doValidate(t)&&(!this.isComplete||this.isDateExist(this.value)&&e!=null&&(this.min==null||this.min<=e)&&(this.max==null||e<=this.max))}isDateExist(t){return this.format(this.parse(t,this),this).indexOf(t)>=0}get date(){return this.typedValue}set date(t){this.typedValue=t}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(t){super.typedValue=t}maskEquals(t){return t===Date||super.maskEquals(t)}optionsIsChanged(t){return super.optionsIsChanged(ge.extractPatternOptions(t))}}ge.GET_DEFAULT_BLOCKS=()=>({d:{mask:Ti,from:1,to:31,maxLength:2},m:{mask:Ti,from:1,to:12,maxLength:2},Y:{mask:Ti,from:1900,to:9999}});ge.DEFAULTS={...Et.DEFAULTS,mask:Date,pattern:Th,format:(i,t)=>{if(!i)return"";const e=String(i.getDate()).padStart(2,"0"),n=String(i.getMonth()+1).padStart(2,"0"),r=i.getFullYear();return[e,n,r].join(".")},parse:(i,t)=>{const[e,n,r]=i.split(".").map(Number);return new Date(r,n-1,e)}};j.MaskedDate=ge;class sr extends xt{constructor(t){super({...sr.DEFAULTS,...t}),this.currentMask=void 0}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),"mask"in t&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(t.mask)?t.mask.map(e=>{const{expose:n,...r}=ti(e),s=ve({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...r});return n&&(this.exposeMask=s),s}):[])}_appendCharRaw(t,e){e===void 0&&(e={});const n=this._applyDispatch(t,e);return this.currentMask&&n.aggregate(this.currentMask._appendChar(t,this.currentMaskFlags(e))),n}_applyDispatch(t,e,n){t===void 0&&(t=""),e===void 0&&(e={}),n===void 0&&(n="");const r=e.tail&&e._beforeTailState!=null?e._beforeTailState._value:this.value,s=this.rawInputValue,o=e.tail&&e._beforeTailState!=null?e._beforeTailState._rawInputValue:s,a=s.slice(o.length),l=this.currentMask,c=new q,h=l==null?void 0:l.state;return this.currentMask=this.doDispatch(t,{...e},n),this.currentMask&&(this.currentMask!==l?(this.currentMask.reset(),o&&(this.currentMask.append(o,{raw:!0}),c.tailShift=this.currentMask.value.length-r.length),a&&(c.tailShift+=this.currentMask.append(a,{raw:!0,tail:!0}).tailShift)):h&&(this.currentMask.state=h)),c}_appendPlaceholder(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendPlaceholder()),t}_appendEager(){const t=this._applyDispatch();return this.currentMask&&t.aggregate(this.currentMask._appendEager()),t}appendTail(t){const e=new q;return t&&e.aggregate(this._applyDispatch("",{},t)),e.aggregate(this.currentMask?this.currentMask.appendTail(t):super.appendTail(t))}currentMaskFlags(t){var e,n;return{...t,_beforeTailState:((e=t._beforeTailState)==null?void 0:e.currentMaskRef)===this.currentMask&&((n=t._beforeTailState)==null?void 0:n.currentMask)||t._beforeTailState}}doDispatch(t,e,n){return e===void 0&&(e={}),n===void 0&&(n=""),this.dispatch(t,this,e,n)}doValidate(t){return super.doValidate(t)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(t)))}doPrepare(t,e){e===void 0&&(e={});let[n,r]=super.doPrepare(t,e);if(this.currentMask){let s;[n,s]=super.doPrepare(n,this.currentMaskFlags(e)),r=r.aggregate(s)}return[n,r]}doPrepareChar(t,e){e===void 0&&(e={});let[n,r]=super.doPrepareChar(t,e);if(this.currentMask){let s;[n,s]=super.doPrepareChar(n,this.currentMaskFlags(e)),r=r.aggregate(s)}return[n,r]}reset(){var t;(t=this.currentMask)==null||t.reset(),this.compiledMasks.forEach(e=>e.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(t){this.exposeMask?(this.exposeMask.value=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=t}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(t){this.exposeMask?(this.exposeMask.unmaskedValue=t,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=t}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(t){if(this.exposeMask){this.exposeMask.typedValue=t,this.currentMask=this.exposeMask,this._applyDispatch();return}let e=String(t);this.currentMask&&(this.currentMask.typedValue=t,e=this.currentMask.unmaskedValue),this.unmaskedValue=e}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var t;return!!((t=this.currentMask)!=null&&t.isComplete)}get isFilled(){var t;return!!((t=this.currentMask)!=null&&t.isFilled)}remove(t,e){const n=new q;return this.currentMask&&n.aggregate(this.currentMask.remove(t,e)).aggregate(this._applyDispatch()),n}get state(){var t;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(e=>e.state),currentMaskRef:this.currentMask,currentMask:(t=this.currentMask)==null?void 0:t.state}}set state(t){const{compiledMasks:e,currentMaskRef:n,currentMask:r,...s}=t;e&&this.compiledMasks.forEach((o,a)=>o.state=e[a]),n!=null&&(this.currentMask=n,this.currentMask.state=r),super.state=s}extractInput(t,e,n){return this.currentMask?this.currentMask.extractInput(t,e,n):""}extractTail(t,e){return this.currentMask?this.currentMask.extractTail(t,e):super.extractTail(t,e)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(t,e){return this.currentMask?this.currentMask.nearestInputPos(t,e):super.nearestInputPos(t,e)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(t){this._overwrite=t}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(t){this._eager=t}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(t){this._skipInvalid=t}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(t){this._autofix=t}maskEquals(t){return Array.isArray(t)?this.compiledMasks.every((e,n)=>{if(!t[n])return;const{mask:r,...s}=t[n];return ji(e,s)&&e.maskEquals(r)}):super.maskEquals(t)}typedValueEquals(t){var e;return!!((e=this.currentMask)!=null&&e.typedValueEquals(t))}}sr.DEFAULTS={...xt.DEFAULTS,dispatch:(i,t,e,n)=>{if(!t.compiledMasks.length)return;const r=t.rawInputValue,s=t.compiledMasks.map((o,a)=>{const l=t.currentMask===o,c=l?o.displayValue.length:o.nearestInputPos(o.displayValue.length,L.FORCE_LEFT);return o.rawInputValue!==r?(o.reset(),o.append(r,{raw:!0})):l||o.remove(c),o.append(i,t.currentMaskFlags(e)),o.appendTail(n),{index:a,weight:o.rawInputValue.length,totalInputPositions:o.totalInputPositions(0,Math.max(c,o.nearestInputPos(o.displayValue.length,L.FORCE_LEFT)))}});return s.sort((o,a)=>a.weight-o.weight||a.totalInputPositions-o.totalInputPositions),t.compiledMasks[s[0].index]}};j.MaskedDynamic=sr;class or extends Et{constructor(t){super({...or.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){const{enum:e,...n}=t;if(e){const r=e.map(a=>a.length),s=Math.min(...r),o=Math.max(...r)-s;n.mask="*".repeat(s),o&&(n.mask+="["+"*".repeat(o)+"]"),this.enum=e}super._update(n)}_appendCharRaw(t,e){e===void 0&&(e={});const n=Math.min(this.nearestInputPos(0,L.FORCE_RIGHT),this.value.length),r=this.enum.filter(s=>this.matchValue(s,this.unmaskedValue+t,n));if(r.length){r.length===1&&this._forEachBlocksInRange(0,this.value.length,(o,a)=>{const l=r[0][a];a>=this.value.length||l===o.value||(o.reset(),o._appendChar(l,e))});const s=super._appendCharRaw(r[0][this.value.length],e);return r.length===1&&r[0].slice(this.unmaskedValue.length).split("").forEach(o=>s.aggregate(super._appendCharRaw(o))),s}return new q({skip:!this.isComplete})}extractTail(t,e){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),new ae("",t)}remove(t,e){if(t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),t===e)return new q;const n=Math.min(super.nearestInputPos(0,L.FORCE_RIGHT),this.value.length);let r;for(r=t;r>=0&&!(this.enum.filter(a=>this.matchValue(a,this.value.slice(n,r),n)).length>1);--r);const s=super.remove(r,e);return s.tailShift+=r-t,s}get isComplete(){return this.enum.indexOf(this.value)>=0}}or.DEFAULTS={...Et.DEFAULTS,matchValue:(i,t,e)=>i.indexOf(t,e)===e};j.MaskedEnum=or;class Rh extends xt{updateOptions(t){super.updateOptions(t)}_update(t){super._update({...t,validate:t.mask})}}j.MaskedFunction=Rh;var Tl;class Ut extends xt{constructor(t){super({...Ut.DEFAULTS,...t})}updateOptions(t){super.updateOptions(t)}_update(t){super._update(t),this._updateRegExps()}_updateRegExps(){const t="^"+(this.allowNegative?"[+|\\-]?":""),e="\\d*",n=(this.scale?"("+Yr(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(t+e+n),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(Yr).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(Yr(this.thousandsSeparator),"g")}_removeThousandsSeparators(t){return t.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(t){const e=t.split(this.radix);return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),e.join(this.radix)}doPrepareChar(t,e){e===void 0&&(e={});const[n,r]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(e.input&&e.raw||!e.input&&!e.raw)?t.replace(this._mapToRadixRegExp,this.radix):t),e);return t&&!n&&(r.skip=!0),n&&!this.allowPositive&&!this.value&&n!=="-"&&r.aggregate(this._appendChar("-")),[n,r]}_separatorsCount(t,e){e===void 0&&(e=!1);let n=0;for(let r=0;r<t;++r)this._value.indexOf(this.thousandsSeparator,r)===r&&(++n,e&&(t+=this.thousandsSeparator.length));return n}_separatorsCountFromSlice(t){return t===void 0&&(t=this._value),this._separatorsCount(this._removeThousandsSeparators(t).length,!0)}extractInput(t,e,n){return t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),[t,e]=this._adjustRangeWithSeparators(t,e),this._removeThousandsSeparators(super.extractInput(t,e,n))}_appendCharRaw(t,e){e===void 0&&(e={});const n=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,r=this._separatorsCountFromSlice(n);this._value=this._removeThousandsSeparators(this.value);const s=this._value;this._value+=t;const o=this.number;let a=!isNaN(o),l=!1;if(a){let m;this.min!=null&&this.min<0&&this.number<this.min&&(m=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(m=this.max),m!=null&&(this.autofix?(this._value=this.format(m,this).replace(Ut.UNMASKED_RADIX,this.radix),l||(l=s===this._value&&!e.tail)):a=!1),a&&(a=!!this._value.match(this._numberRegExp))}let c;a?c=new q({inserted:this._value.slice(s.length),rawInserted:l?"":t,skip:l}):(this._value=s,c=new q),this._value=this._insertThousandsSeparators(this._value);const h=e.tail&&e._beforeTailState?e._beforeTailState._value:this._value,p=this._separatorsCountFromSlice(h);return c.tailShift+=(p-r)*this.thousandsSeparator.length,c}_findSeparatorAround(t){if(this.thousandsSeparator){const e=t-this.thousandsSeparator.length+1,n=this.value.indexOf(this.thousandsSeparator,e);if(n<=t)return n}return-1}_adjustRangeWithSeparators(t,e){const n=this._findSeparatorAround(t);n>=0&&(t=n);const r=this._findSeparatorAround(e);return r>=0&&(e=r+this.thousandsSeparator.length),[t,e]}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length),[t,e]=this._adjustRangeWithSeparators(t,e);const n=this.value.slice(0,t),r=this.value.slice(e),s=this._separatorsCount(n.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(n+r));const o=this._separatorsCountFromSlice(n);return new q({tailShift:(o-s)*this.thousandsSeparator.length})}nearestInputPos(t,e){if(!this.thousandsSeparator)return t;switch(e){case L.NONE:case L.LEFT:case L.FORCE_LEFT:{const n=this._findSeparatorAround(t-1);if(n>=0){const r=n+this.thousandsSeparator.length;if(t<r||this.value.length<=r||e===L.FORCE_LEFT)return n}break}case L.RIGHT:case L.FORCE_RIGHT:{const n=this._findSeparatorAround(t);if(n>=0)return n+this.thousandsSeparator.length}}return t}doCommit(){if(this.value){const t=this.number;let e=t;this.min!=null&&(e=Math.max(e,this.min)),this.max!=null&&(e=Math.min(e,this.max)),e!==t&&(this.unmaskedValue=this.format(e,this));let n=this.value;this.normalizeZeros&&(n=this._normalizeZeros(n)),this.padFractionalZeros&&this.scale>0&&(n=this._padFractionalZeros(n)),this._value=n}super.doCommit()}_normalizeZeros(t){const e=this._removeThousandsSeparators(t).split(this.radix);return e[0]=e[0].replace(/^(\D*)(0*)(\d*)/,(n,r,s,o)=>r+o),t.length&&!/\d$/.test(e[0])&&(e[0]=e[0]+"0"),e.length>1&&(e[1]=e[1].replace(/0*$/,""),e[1].length||(e.length=1)),this._insertThousandsSeparators(e.join(this.radix))}_padFractionalZeros(t){if(!t)return t;const e=t.split(this.radix);return e.length<2&&e.push(""),e[1]=e[1].padEnd(this.scale,"0"),e.join(this.radix)}doSkipInvalid(t,e,n){e===void 0&&(e={});const r=this.scale===0&&t!==this.thousandsSeparator&&(t===this.radix||t===Ut.UNMASKED_RADIX||this.mapToRadix.includes(t));return super.doSkipInvalid(t,e,n)&&!r}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Ut.UNMASKED_RADIX)}set unmaskedValue(t){super.unmaskedValue=t}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(t){this.rawInputValue=this.format(t,this).replace(Ut.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(t){this.typedValue=t}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(t){return(super.typedValueEquals(t)||Ut.EMPTY_VALUES.includes(t)&&Ut.EMPTY_VALUES.includes(this.typedValue))&&!(t===0&&this.value==="")}}Tl=Ut;Ut.UNMASKED_RADIX=".";Ut.EMPTY_VALUES=[...xt.EMPTY_VALUES,0];Ut.DEFAULTS={...xt.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[Tl.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:i=>i.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};j.MaskedNumber=Ut;const xs={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Rl(i,t,e){t===void 0&&(t=xs.MASKED),e===void 0&&(e=xs.MASKED);const n=ve(i);return r=>n.runIsolated(s=>(s[t]=r,s[e]))}function Oh(i,t,e,n){return Rl(t,e,n)(i)}j.PIPE_TYPE=xs;j.createPipe=Rl;j.pipe=Oh;class Fh extends Et{get repeatFrom(){var t;return(t=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?t:0}get repeatTo(){var t;return(t=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?t:1/0}constructor(t){super(t)}updateOptions(t){super.updateOptions(t)}_update(t){var e,n,r;const{repeat:s,...o}=ti(t);this._blockOpts=Object.assign({},this._blockOpts,o);const a=ve(this._blockOpts);this.repeat=(e=(n=s??a.repeat)!=null?n:this.repeat)!=null?e:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((r=this._blocks)==null?void 0:r.length)||0,this.repeatFrom)),blocks:{m:a},eager:a.eager,overwrite:a.overwrite,skipInvalid:a.skipInvalid,lazy:a.lazy,placeholderChar:a.placeholderChar,displayChar:a.displayChar})}_allocateBlock(t){if(t<this._blocks.length)return this._blocks[t];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(ve(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(t,e){e===void 0&&(e={});const n=new q;for(let l=(r=(s=this._mapPosToBlock(this.displayValue.length))==null?void 0:s.index)!=null?r:Math.max(this._blocks.length-1,0),c,h;c=(o=this._blocks[l])!=null?o:h=!h&&this._allocateBlock(l);++l){var r,s,o,a;const p=c._appendChar(t,{...e,_beforeTailState:(a=e._beforeTailState)==null||(a=a._blocks)==null?void 0:a[l]});if(p.skip&&h){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(n.aggregate(p),p.consumed)break}return n}_trimEmptyTail(t,e){var n,r;t===void 0&&(t=0);const s=Math.max(((n=this._mapPosToBlock(t))==null?void 0:n.index)||0,this.repeatFrom,0);let o;e!=null&&(o=(r=this._mapPosToBlock(e))==null?void 0:r.index),o==null&&(o=this._blocks.length-1);let a=0;for(let l=o;s<=l&&!this._blocks[l].unmaskedValue;--l,++a);a&&(this._blocks.splice(o-a+1,a),this.mask=this.mask.slice(a))}reset(){super.reset(),this._trimEmptyTail()}remove(t,e){t===void 0&&(t=0),e===void 0&&(e=this.displayValue.length);const n=super.remove(t,e);return this._trimEmptyTail(t,e),n}totalInputPositions(t,e){return t===void 0&&(t=0),e==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(t,e)}get state(){return super.state}set state(t){this._blocks.length=t._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=t}}j.RepeatBlock=Fh;try{globalThis.IMask=j}catch{}function Jr(i,t){i.split(/\s+/).forEach(e=>{t(e)})}class Lh{constructor(){this._events={}}on(t,e){Jr(t,n=>{const r=this._events[n]||[];r.push(e),this._events[n]=r})}off(t,e){var n=arguments.length;if(n===0){this._events={};return}Jr(t,r=>{if(n===1){delete this._events[r];return}const s=this._events[r];s!==void 0&&(s.splice(s.indexOf(e),1),this._events[r]=s)})}trigger(t,...e){var n=this;Jr(t,r=>{const s=n._events[r];s!==void 0&&s.forEach(o=>{o.apply(n,e)})})}}function Mh(i){return i.plugins={},class extends i{constructor(){super(...arguments),this.plugins={names:[],settings:{},requested:{},loaded:{}}}static define(t,e){i.plugins[t]={name:t,fn:e}}initializePlugins(t){var e,n;const r=this,s=[];if(Array.isArray(t))t.forEach(o=>{typeof o=="string"?s.push(o):(r.plugins.settings[o.name]=o.options,s.push(o.name))});else if(t)for(e in t)t.hasOwnProperty(e)&&(r.plugins.settings[e]=t[e],s.push(e));for(;n=s.shift();)r.require(n)}loadPlugin(t){var e=this,n=e.plugins,r=i.plugins[t];if(!i.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');n.requested[t]=!0,n.loaded[t]=r.fn.apply(e,[e.plugins.settings[t]||{}]),n.names.push(t)}require(t){var e=this,n=e.plugins;if(!e.plugins.loaded.hasOwnProperty(t)){if(n.requested[t])throw new Error('Plugin has circular dependency ("'+t+'")');e.loadPlugin(t)}return n.loaded[t]}}}const ar=i=>(i=i.filter(Boolean),i.length<2?i[0]||"":Nh(i)==1?"["+i.join("")+"]":"(?:"+i.join("|")+")"),Ol=i=>{if(!Ih(i))return i.join("");let t="",e=0;const n=()=>{e>1&&(t+="{"+e+"}")};return i.forEach((r,s)=>{if(r===i[s-1]){e++;return}n(),t+=r,e=1}),n(),t},Fl=i=>{let t=Array.from(i);return ar(t)},Ih=i=>new Set(i).size!==i.length,ei=i=>(i+"").replace(/([\$\(\)\*\+\.\?\[\]\^\{\|\}\\])/gu,"\\$1"),Nh=i=>i.reduce((t,e)=>Math.max(t,Bh(e)),0),Bh=i=>Array.from(i).length,Ll=i=>{if(i.length===1)return[[i]];let t=[];const e=i.substring(1);return Ll(e).forEach(function(r){let s=r.slice(0);s[0]=i.charAt(0)+s[0],t.push(s),s=r.slice(0),s.unshift(i.charAt(0)),t.push(s)}),t},Ph=[[0,65535]],Vh="[̀-ͯ·ʾʼ]";let Ui,Ml;const jh=3,js={},Wo={"/":"⁄∕",0:"߀",a:"ⱥɐɑ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",b:"ƀɓƃ",c:"ꜿƈȼↄ",d:"đɗɖᴅƌꮷԁɦ",e:"ɛǝᴇɇ",f:"ꝼƒ",g:"ǥɠꞡᵹꝿɢ",h:"ħⱨⱶɥ",i:"ɨı",j:"ɉȷ",k:"ƙⱪꝁꝃꝅꞣ",l:"łƚɫⱡꝉꝇꞁɭ",m:"ɱɯϻ",n:"ꞥƞɲꞑᴎлԉ",o:"øǿɔɵꝋꝍᴑ",oe:"œ",oi:"ƣ",oo:"ꝏ",ou:"ȣ",p:"ƥᵽꝑꝓꝕρ",q:"ꝗꝙɋ",r:"ɍɽꝛꞧꞃ",s:"ßȿꞩꞅʂ",t:"ŧƭʈⱦꞇ",th:"þ",tz:"ꜩ",u:"ʉ",v:"ʋꝟʌ",vy:"ꝡ",w:"ⱳ",y:"ƴɏỿ",z:"ƶȥɀⱬꝣ",hv:"ƕ"};for(let i in Wo){let t=Wo[i]||"";for(let e=0;e<t.length;e++){let n=t.substring(e,e+1);js[n]=i}}const Hh=new RegExp(Object.keys(js).join("|")+"|"+Vh,"gu"),Uh=i=>{Ui===void 0&&(Ui=$h(Ph))},qo=(i,t="NFKD")=>i.normalize(t),Wi=i=>Array.from(i).reduce((t,e)=>t+Wh(e),""),Wh=i=>(i=qo(i).toLowerCase().replace(Hh,t=>js[t]||""),qo(i,"NFC"));function*qh(i){for(const[t,e]of i)for(let n=t;n<=e;n++){let r=String.fromCharCode(n),s=Wi(r);s!=r.toLowerCase()&&(s.length>jh||s.length!=0&&(yield{folded:s,composed:r,code_point:n}))}}const zh=i=>{const t={},e=(n,r)=>{const s=t[n]||new Set,o=new RegExp("^"+Fl(s)+"$","iu");r.match(o)||(s.add(ei(r)),t[n]=s)};for(let n of qh(i))e(n.folded,n.folded),e(n.folded,n.composed);return t},$h=i=>{const t=zh(i),e={};let n=[];for(let s in t){let o=t[s];o&&(e[s]=Fl(o)),s.length>1&&n.push(ei(s))}n.sort((s,o)=>o.length-s.length);const r=ar(n);return Ml=new RegExp("^"+r,"u"),e},Kh=(i,t=1)=>{let e=0;return i=i.map(n=>(Ui[n]&&(e+=n.length),Ui[n]||n)),e>=t?Ol(i):""},Yh=(i,t=1)=>(t=Math.max(t,i.length-1),ar(Ll(i).map(e=>Kh(e,t)))),zo=(i,t=!0)=>{let e=i.length>1?1:0;return ar(i.map(n=>{let r=[];const s=t?n.length():n.length()-1;for(let o=0;o<s;o++)r.push(Yh(n.substrs[o]||"",e));return Ol(r)}))},Jh=(i,t)=>{for(const e of t){if(e.start!=i.start||e.end!=i.end||e.substrs.join("")!==i.substrs.join(""))continue;let n=i.parts;const r=o=>{for(const a of n){if(a.start===o.start&&a.substr===o.substr)return!1;if(!(o.length==1||a.length==1)&&(o.start<a.start&&o.end>a.start||a.start<o.start&&a.end>o.start))return!0}return!1};if(!(e.parts.filter(r).length>0))return!0}return!1};class qi{constructor(){He(this,"parts");He(this,"substrs");He(this,"start");He(this,"end");this.parts=[],this.substrs=[],this.start=0,this.end=0}add(t){t&&(this.parts.push(t),this.substrs.push(t.substr),this.start=Math.min(t.start,this.start),this.end=Math.max(t.end,this.end))}last(){return this.parts[this.parts.length-1]}length(){return this.parts.length}clone(t,e){let n=new qi,r=JSON.parse(JSON.stringify(this.parts)),s=r.pop();for(const l of r)n.add(l);let o=e.substr.substring(0,t-s.start),a=o.length;return n.add({start:s.start,end:s.start+a,length:a,substr:o}),n}}const Gh=i=>{Uh(),i=Wi(i);let t="",e=[new qi];for(let n=0;n<i.length;n++){let s=i.substring(n).match(Ml);const o=i.substring(n,n+1),a=s?s[0]:null;let l=[],c=new Set;for(const h of e){const p=h.last();if(!p||p.length==1||p.end<=n)if(a){const m=a.length;h.add({start:n,end:n+m,length:m,substr:a}),c.add("1")}else h.add({start:n,end:n+1,length:1,substr:o}),c.add("2");else if(a){let m=h.clone(n,p);const k=a.length;m.add({start:n,end:n+k,length:k,substr:a}),l.push(m)}else c.add("3")}if(l.length>0){l=l.sort((h,p)=>h.length()-p.length());for(let h of l)Jh(h,e)||e.push(h);continue}if(n>0&&c.size==1&&!c.has("3")){t+=zo(e,!1);let h=new qi;const p=e[0];p&&h.add(p.last()),e=[h]}}return t+=zo(e,!0),t},Xh=(i,t)=>{if(i)return i[t]},Qh=(i,t)=>{if(i){for(var e,n=t.split(".");(e=n.shift())&&(i=i[e]););return i}},Gr=(i,t,e)=>{var n,r;return!i||(i=i+"",t.regex==null)||(r=i.search(t.regex),r===-1)?0:(n=t.string.length/i.length,r===0&&(n+=.5),n*e)},Xr=(i,t)=>{var e=i[t];if(typeof e=="function")return e;e&&!Array.isArray(e)&&(i[t]=[e])},Ai=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},Zh=(i,t)=>typeof i=="number"&&typeof t=="number"?i>t?1:i<t?-1:0:(i=Wi(i+"").toLowerCase(),t=Wi(t+"").toLowerCase(),i>t?1:t>i?-1:0);class tf{constructor(t,e){He(this,"items");He(this,"settings");this.items=t,this.settings=e||{diacritics:!0}}tokenize(t,e,n){if(!t||!t.length)return[];const r=[],s=t.split(/\s+/);var o;return n&&(o=new RegExp("^("+Object.keys(n).map(ei).join("|")+"):(.*)$")),s.forEach(a=>{let l,c=null,h=null;o&&(l=a.match(o))&&(c=l[1],a=l[2]),a.length>0&&(this.settings.diacritics?h=Gh(a)||null:h=ei(a),h&&e&&(h="\\b"+h)),r.push({string:a,regex:h?new RegExp(h,"iu"):null,field:c})}),r}getScoreFunction(t,e){var n=this.prepareSearch(t,e);return this._getScoreFunction(n)}_getScoreFunction(t){const e=t.tokens,n=e.length;if(!n)return function(){return 0};const r=t.options.fields,s=t.weights,o=r.length,a=t.getAttrFn;if(!o)return function(){return 1};const l=function(){return o===1?function(c,h){const p=r[0].field;return Gr(a(h,p),c,s[p]||1)}:function(c,h){var p=0;if(c.field){const m=a(h,c.field);!c.regex&&m?p+=1/o:p+=Gr(m,c,1)}else Ai(s,(m,k)=>{p+=Gr(a(h,k),c,m)});return p/o}}();return n===1?function(c){return l(e[0],c)}:t.options.conjunction==="and"?function(c){var h,p=0;for(let m of e){if(h=l(m,c),h<=0)return 0;p+=h}return p/n}:function(c){var h=0;return Ai(e,p=>{h+=l(p,c)}),h/n}}getSortFunction(t,e){var n=this.prepareSearch(t,e);return this._getSortFunction(n)}_getSortFunction(t){var e,n=[];const r=this,s=t.options,o=!t.query&&s.sort_empty?s.sort_empty:s.sort;if(typeof o=="function")return o.bind(this);const a=function(c,h){return c==="$score"?h.score:t.getAttrFn(r.items[h.id],c)};if(o)for(let c of o)(t.query||c.field!=="$score")&&n.push(c);if(t.query){e=!0;for(let c of n)if(c.field==="$score"){e=!1;break}e&&n.unshift({field:"$score",direction:"desc"})}else n=n.filter(c=>c.field!=="$score");return n.length?function(c,h){var p,m;for(let k of n)if(m=k.field,p=(k.direction==="desc"?-1:1)*Zh(a(m,c),a(m,h)),p)return p;return 0}:null}prepareSearch(t,e){const n={};var r=Object.assign({},e);if(Xr(r,"sort"),Xr(r,"sort_empty"),r.fields){Xr(r,"fields");const s=[];r.fields.forEach(o=>{typeof o=="string"&&(o={field:o,weight:1}),s.push(o),n[o.field]="weight"in o?o.weight:1}),r.fields=s}return{options:r,query:t.toLowerCase().trim(),tokens:this.tokenize(t,r.respect_word_boundaries,n),total:0,items:[],weights:n,getAttrFn:r.nesting?Qh:Xh}}search(t,e){var n=this,r,s;s=this.prepareSearch(t,e),e=s.options,t=s.query;const o=e.score||n._getScoreFunction(s);t.length?Ai(n.items,(l,c)=>{r=o(l),(e.filter===!1||r>0)&&s.items.push({score:r,id:c})}):Ai(n.items,(l,c)=>{s.items.push({score:1,id:c})});const a=n._getSortFunction(s);return a&&s.items.sort(a),s.total=s.items.length,typeof e.limit=="number"&&(s.items=s.items.slice(0,e.limit)),s}}const Xt=i=>typeof i>"u"||i===null?null:Ri(i),Ri=i=>typeof i=="boolean"?i?"1":"0":i+"",Qr=i=>(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ef=(i,t)=>t>0?window.setTimeout(i,t):(i.call(null),null),nf=(i,t)=>{var e;return function(n,r){var s=this;e&&(s.loading=Math.max(s.loading-1,0),clearTimeout(e)),e=setTimeout(function(){e=null,s.loadedSearches[n]=!0,i.call(s,n,r)},t)}},$o=(i,t,e)=>{var n,r=i.trigger,s={};i.trigger=function(){var o=arguments[0];if(t.indexOf(o)!==-1)s[o]=arguments;else return r.apply(i,arguments)},e.apply(i,[]),i.trigger=r;for(n of t)n in s&&r.apply(i,s[n])},rf=i=>({start:i.selectionStart||0,length:(i.selectionEnd||0)-(i.selectionStart||0)}),ut=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},_t=(i,t,e,n)=>{i.addEventListener(t,e,n)},We=(i,t)=>{if(!t||!t[i])return!1;var e=(t.altKey?1:0)+(t.ctrlKey?1:0)+(t.shiftKey?1:0)+(t.metaKey?1:0);return e===1},Zr=(i,t)=>{const e=i.getAttribute("id");return e||(i.setAttribute("id",t),t)},Ko=i=>i.replace(/[\\"']/g,"\\$&"),qe=(i,t)=>{t&&i.append(t)},bt=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},se=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Il(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Il=i=>typeof i=="string"&&i.indexOf("<")>-1,sf=i=>i.replace(/['"\\]/g,"\\$&"),ts=(i,t)=>{var e=document.createEvent("HTMLEvents");e.initEvent(t,!0,!1),i.dispatchEvent(e)},yi=(i,t)=>{Object.assign(i.style,t)},jt=(i,...t)=>{var e=Nl(t);i=Bl(i),i.map(n=>{e.map(r=>{n.classList.add(r)})})},Se=(i,...t)=>{var e=Nl(t);i=Bl(i),i.map(n=>{e.map(r=>{n.classList.remove(r)})})},Nl=i=>{var t=[];return bt(i,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},Bl=i=>(Array.isArray(i)||(i=[i]),i),es=(i,t,e)=>{if(!(e&&!e.contains(i)))for(;i&&i.matches;){if(i.matches(t))return i;i=i.parentNode}},Yo=(i,t=0)=>t>0?i[i.length-1]:i[0],of=i=>Object.keys(i).length===0,Jo=(i,t)=>{if(!i)return-1;t=t||i.nodeName;for(var e=0;i=i.previousElementSibling;)i.matches(t)&&e++;return e},ot=(i,t)=>{bt(t,(e,n)=>{e==null?i.removeAttribute(n):i.setAttribute(n,""+e)})},Es=(i,t)=>{i.parentNode&&i.parentNode.replaceChild(t,i)},af=(i,t)=>{if(t===null)return;if(typeof t=="string"){if(!t.length)return;t=new RegExp(t,"i")}const e=s=>{var o=s.data.match(t);if(o&&s.data.length>0){var a=document.createElement("span");a.className="highlight";var l=s.splitText(o.index);l.splitText(o[0].length);var c=l.cloneNode(!0);return a.appendChild(c),Es(l,a),1}return 0},n=s=>{s.nodeType===1&&s.childNodes&&!/(script|style)/i.test(s.tagName)&&(s.className!=="highlight"||s.tagName!=="SPAN")&&Array.from(s.childNodes).forEach(o=>{r(o)})},r=s=>s.nodeType===3?e(s):(n(s),0);r(i)},lf=i=>{var t=i.querySelectorAll("span.highlight");Array.prototype.forEach.call(t,function(e){var n=e.parentNode;n.replaceChild(e.firstChild,e),n.normalize()})},uf=65,cf=13,df=27,hf=37,ff=38,pf=39,gf=40,Go=8,mf=46,Xo=9,vf=typeof navigator>"u"?!1:/Mac/.test(navigator.userAgent),Ci=vf?"metaKey":"ctrlKey",Qo={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:null,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,shouldOpen:null,maxOptions:50,maxItems:null,hideSelected:null,duplicates:!1,addPrecedence:!1,selectOnTab:!1,preload:null,allowEmptyOption:!1,refreshThrottle:300,loadThrottle:300,loadingClass:"loading",dataAttr:null,optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"ts-wrapper",controlClass:"ts-control",dropdownClass:"ts-dropdown",dropdownContentClass:"ts-dropdown-content",itemClass:"item",optionClass:"option",dropdownParent:null,controlInput:'<input type="text" autocomplete="off" size="1" />',copyClassesToDropdown:!1,placeholder:null,hidePlaceholder:null,shouldLoad:function(i){return i.length>0},render:{}};function Zo(i,t){var e=Object.assign({},Qo,t),n=e.dataAttr,r=e.labelField,s=e.valueField,o=e.disabledField,a=e.optgroupField,l=e.optgroupLabelField,c=e.optgroupValueField,h=i.tagName.toLowerCase(),p=i.getAttribute("placeholder")||i.getAttribute("data-placeholder");if(!p&&!e.allowEmptyOption){let y=i.querySelector('option[value=""]');y&&(p=y.textContent)}var m={placeholder:p,options:[],optgroups:[],items:[],maxItems:null},k=()=>{var y,C=m.options,R={},x=1;let F=0;var B=O=>{var P=Object.assign({},O.dataset),I=n&&P[n];return typeof I=="string"&&I.length&&(P=Object.assign(P,JSON.parse(I))),P},N=(O,P)=>{var I=Xt(O.value);if(I!=null&&!(!I&&!e.allowEmptyOption)){if(R.hasOwnProperty(I)){if(P){var st=R[I][a];st?Array.isArray(st)?st.push(P):R[I][a]=[st,P]:R[I][a]=P}}else{var G=B(O);G[r]=G[r]||O.textContent,G[s]=G[s]||I,G[o]=G[o]||O.disabled,G[a]=G[a]||P,G.$option=O,G.$order=G.$order||++F,R[I]=G,C.push(G)}O.selected&&m.items.push(I)}},J=O=>{var P,I;I=B(O),I[l]=I[l]||O.getAttribute("label")||"",I[c]=I[c]||x++,I[o]=I[o]||O.disabled,I.$order=I.$order||++F,m.optgroups.push(I),P=I[c],bt(O.children,st=>{N(st,P)})};m.maxItems=i.hasAttribute("multiple")?null:1,bt(i.children,O=>{y=O.tagName.toLowerCase(),y==="optgroup"?J(O):y==="option"&&N(O)})},v=()=>{const y=i.getAttribute(n);if(y)m.options=JSON.parse(y),bt(m.options,R=>{m.items.push(R[s])});else{var C=i.value.trim()||"";if(!e.allowEmptyOption&&!C.length)return;const R=C.split(e.delimiter);bt(R,x=>{const F={};F[r]=x,F[s]=x,m.options.push(F)}),m.items=R}};return h==="select"?k():v(),Object.assign({},Qo,m,t)}var ta=0;class Mt extends Mh(Lh){constructor(t,e){super(),this.order=0,this.isOpen=!1,this.isDisabled=!1,this.isReadOnly=!1,this.isInvalid=!1,this.isValid=!0,this.isLocked=!1,this.isFocused=!1,this.isInputHidden=!1,this.isSetup=!1,this.ignoreFocus=!1,this.ignoreHover=!1,this.hasOptions=!1,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.activeOption=null,this.activeItems=[],this.optgroups={},this.options={},this.userOptions={},this.items=[],this.refreshTimeout=null,ta++;var n,r=se(t);if(r.tomselect)throw new Error("Tom Select already initialized on this element");r.tomselect=this;var s=window.getComputedStyle&&window.getComputedStyle(r,null);n=s.getPropertyValue("direction");const o=Zo(r,e);this.settings=o,this.input=r,this.tabIndex=r.tabIndex||0,this.is_select_tag=r.tagName.toLowerCase()==="select",this.rtl=/rtl/i.test(n),this.inputId=Zr(r,"tomselect-"+ta),this.isRequired=r.required,this.sifter=new tf(this.options,{diacritics:o.diacritics}),o.mode=o.mode||(o.maxItems===1?"single":"multi"),typeof o.hideSelected!="boolean"&&(o.hideSelected=o.mode==="multi"),typeof o.hidePlaceholder!="boolean"&&(o.hidePlaceholder=o.mode!=="multi");var a=o.createFilter;typeof a!="function"&&(typeof a=="string"&&(a=new RegExp(a)),a instanceof RegExp?o.createFilter=C=>a.test(C):o.createFilter=C=>this.settings.duplicates||!this.options[C]),this.initializePlugins(o.plugins),this.setupCallbacks(),this.setupTemplates();const l=se("<div>"),c=se("<div>"),h=this._render("dropdown"),p=se('<div role="listbox" tabindex="-1">'),m=this.input.getAttribute("class")||"",k=o.mode;var v;if(jt(l,o.wrapperClass,m,k),jt(c,o.controlClass),qe(l,c),jt(h,o.dropdownClass,k),o.copyClassesToDropdown&&jt(h,m),jt(p,o.dropdownContentClass),qe(h,p),se(o.dropdownParent||l).appendChild(h),Il(o.controlInput)){v=se(o.controlInput);var y=["autocorrect","autocapitalize","autocomplete","spellcheck"];bt(y,C=>{r.getAttribute(C)&&ot(v,{[C]:r.getAttribute(C)})}),v.tabIndex=-1,c.appendChild(v),this.focus_node=v}else o.controlInput?(v=se(o.controlInput),this.focus_node=v):(v=se("<input/>"),this.focus_node=c);this.wrapper=l,this.dropdown=h,this.dropdown_content=p,this.control=c,this.control_input=v,this.setup()}setup(){const t=this,e=t.settings,n=t.control_input,r=t.dropdown,s=t.dropdown_content,o=t.wrapper,a=t.control,l=t.input,c=t.focus_node,h={passive:!0},p=t.inputId+"-ts-dropdown";ot(s,{id:p}),ot(c,{role:"combobox","aria-haspopup":"listbox","aria-expanded":"false","aria-controls":p});const m=Zr(c,t.inputId+"-ts-control"),k="label[for='"+sf(t.inputId)+"']",v=document.querySelector(k),y=t.focus.bind(t);if(v){_t(v,"click",y),ot(v,{for:m});const x=Zr(v,t.inputId+"-ts-label");ot(c,{"aria-labelledby":x}),ot(s,{"aria-labelledby":x})}if(o.style.width=l.style.width,t.plugins.names.length){const x="plugin-"+t.plugins.names.join(" plugin-");jt([o,r],x)}(e.maxItems===null||e.maxItems>1)&&t.is_select_tag&&ot(l,{multiple:"multiple"}),e.placeholder&&ot(n,{placeholder:e.placeholder}),!e.splitOn&&e.delimiter&&(e.splitOn=new RegExp("\\s*"+ei(e.delimiter)+"+\\s*")),e.load&&e.loadThrottle&&(e.load=nf(e.load,e.loadThrottle)),_t(r,"mousemove",()=>{t.ignoreHover=!1}),_t(r,"mouseenter",x=>{var F=es(x.target,"[data-selectable]",r);F&&t.onOptionHover(x,F)},{capture:!0}),_t(r,"click",x=>{const F=es(x.target,"[data-selectable]");F&&(t.onOptionSelect(x,F),ut(x,!0))}),_t(a,"click",x=>{var F=es(x.target,"[data-ts-item]",a);if(F&&t.onItemSelect(x,F)){ut(x,!0);return}n.value==""&&(t.onClick(),ut(x,!0))}),_t(c,"keydown",x=>t.onKeyDown(x)),_t(n,"keypress",x=>t.onKeyPress(x)),_t(n,"input",x=>t.onInput(x)),_t(c,"blur",x=>t.onBlur(x)),_t(c,"focus",x=>t.onFocus(x)),_t(n,"paste",x=>t.onPaste(x));const C=x=>{const F=x.composedPath()[0];if(!o.contains(F)&&!r.contains(F)){t.isFocused&&t.blur(),t.inputState();return}F==n&&t.isOpen?x.stopPropagation():ut(x,!0)},R=()=>{t.isOpen&&t.positionDropdown()};_t(document,"mousedown",C),_t(window,"scroll",R,h),_t(window,"resize",R,h),this._destroy=()=>{document.removeEventListener("mousedown",C),window.removeEventListener("scroll",R),window.removeEventListener("resize",R),v&&v.removeEventListener("click",y)},this.revertSettings={innerHTML:l.innerHTML,tabIndex:l.tabIndex},l.tabIndex=-1,l.insertAdjacentElement("afterend",t.wrapper),t.sync(!1),e.items=[],delete e.optgroups,delete e.options,_t(l,"invalid",()=>{t.isValid&&(t.isValid=!1,t.isInvalid=!0,t.refreshState())}),t.updateOriginalInput(),t.refreshItems(),t.close(!1),t.inputState(),t.isSetup=!0,l.disabled?t.disable():l.readOnly?t.setReadOnly(!0):t.enable(),t.on("change",this.onChange),jt(l,"tomselected","ts-hidden-accessible"),t.trigger("initialize"),e.preload===!0&&t.preload()}setupOptions(t=[],e=[]){this.addOptions(t),bt(e,n=>{this.registerOptionGroup(n)})}setupTemplates(){var t=this,e=t.settings.labelField,n=t.settings.optgroupLabelField,r={optgroup:s=>{let o=document.createElement("div");return o.className="optgroup",o.appendChild(s.options),o},optgroup_header:(s,o)=>'<div class="optgroup-header">'+o(s[n])+"</div>",option:(s,o)=>"<div>"+o(s[e])+"</div>",item:(s,o)=>"<div>"+o(s[e])+"</div>",option_create:(s,o)=>'<div class="create">Add <strong>'+o(s.input)+"</strong>&hellip;</div>",no_results:()=>'<div class="no-results">No results found</div>',loading:()=>'<div class="spinner"></div>',not_loading:()=>{},dropdown:()=>"<div></div>"};t.settings.render=Object.assign({},r,t.settings.render)}setupCallbacks(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",item_select:"onItemSelect",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)e=this.settings[n[t]],e&&this.on(t,e)}sync(t=!0){const e=this,n=t?Zo(e.input,{delimiter:e.settings.delimiter}):e.settings;e.setupOptions(n.options,n.optgroups),e.setValue(n.items||[],!0),e.lastQuery=null}onClick(){var t=this;if(t.activeItems.length>0){t.clearActiveItems(),t.focus();return}t.isFocused&&t.isOpen?t.blur():t.focus()}onMouseDown(){}onChange(){ts(this.input,"input"),ts(this.input,"change")}onPaste(t){var e=this;if(e.isInputHidden||e.isLocked){ut(t);return}e.settings.splitOn&&setTimeout(()=>{var n=e.inputValue();if(n.match(e.settings.splitOn)){var r=n.trim().split(e.settings.splitOn);bt(r,s=>{Xt(s)&&(this.options[s]?e.addItem(s):e.createItem(s))})}},0)}onKeyPress(t){var e=this;if(e.isLocked){ut(t);return}var n=String.fromCharCode(t.keyCode||t.which);if(e.settings.create&&e.settings.mode==="multi"&&n===e.settings.delimiter){e.createItem(),ut(t);return}}onKeyDown(t){var e=this;if(e.ignoreHover=!0,e.isLocked){t.keyCode!==Xo&&ut(t);return}switch(t.keyCode){case uf:if(We(Ci,t)&&e.control_input.value==""){ut(t),e.selectAll();return}break;case df:e.isOpen&&(ut(t,!0),e.close()),e.clearActiveItems();return;case gf:if(!e.isOpen&&e.hasOptions)e.open();else if(e.activeOption){let n=e.getAdjacent(e.activeOption,1);n&&e.setActiveOption(n)}ut(t);return;case ff:if(e.activeOption){let n=e.getAdjacent(e.activeOption,-1);n&&e.setActiveOption(n)}ut(t);return;case cf:e.canSelect(e.activeOption)?(e.onOptionSelect(t,e.activeOption),ut(t)):(e.settings.create&&e.createItem()||document.activeElement==e.control_input&&e.isOpen)&&ut(t);return;case hf:e.advanceSelection(-1,t);return;case pf:e.advanceSelection(1,t);return;case Xo:e.settings.selectOnTab&&(e.canSelect(e.activeOption)&&(e.onOptionSelect(t,e.activeOption),ut(t)),e.settings.create&&e.createItem()&&ut(t));return;case Go:case mf:e.deleteSelection(t);return}e.isInputHidden&&!We(Ci,t)&&ut(t)}onInput(t){if(this.isLocked)return;const e=this.inputValue();if(this.lastValue!==e){if(this.lastValue=e,e==""){this._onInput();return}this.refreshTimeout&&window.clearTimeout(this.refreshTimeout),this.refreshTimeout=ef(()=>{this.refreshTimeout=null,this._onInput()},this.settings.refreshThrottle)}}_onInput(){const t=this.lastValue;this.settings.shouldLoad.call(this,t)&&this.load(t),this.refreshOptions(),this.trigger("type",t)}onOptionHover(t,e){this.ignoreHover||this.setActiveOption(e,!1)}onFocus(t){var e=this,n=e.isFocused;if(e.isDisabled||e.isReadOnly){e.blur(),ut(t);return}e.ignoreFocus||(e.isFocused=!0,e.settings.preload==="focus"&&e.preload(),n||e.trigger("focus"),e.activeItems.length||(e.inputState(),e.refreshOptions(!!e.settings.openOnFocus)),e.refreshState())}onBlur(t){if(document.hasFocus()!==!1){var e=this;if(e.isFocused){e.isFocused=!1,e.ignoreFocus=!1;var n=()=>{e.close(),e.setActiveItem(),e.setCaret(e.items.length),e.trigger("blur")};e.settings.create&&e.settings.createOnBlur?e.createItem(null,n):n()}}}onOptionSelect(t,e){var n,r=this;e.parentElement&&e.parentElement.matches("[data-disabled]")||(e.classList.contains("create")?r.createItem(null,()=>{r.settings.closeAfterSelect&&r.close()}):(n=e.dataset.value,typeof n<"u"&&(r.lastQuery=null,r.addItem(n),r.settings.closeAfterSelect&&r.close(),!r.settings.hideSelected&&t.type&&/click/.test(t.type)&&r.setActiveOption(e))))}canSelect(t){return!!(this.isOpen&&t&&this.dropdown_content.contains(t))}onItemSelect(t,e){var n=this;return!n.isLocked&&n.settings.mode==="multi"?(ut(t),n.setActiveItem(e,t),!0):!1}canLoad(t){return!(!this.settings.load||this.loadedSearches.hasOwnProperty(t))}load(t){const e=this;if(!e.canLoad(t))return;jt(e.wrapper,e.settings.loadingClass),e.loading++;const n=e.loadCallback.bind(e);e.settings.load.call(e,t,n)}loadCallback(t,e){const n=this;n.loading=Math.max(n.loading-1,0),n.lastQuery=null,n.clearActiveOption(),n.setupOptions(t,e),n.refreshOptions(n.isFocused&&!n.isInputHidden),n.loading||Se(n.wrapper,n.settings.loadingClass),n.trigger("load",t,e)}preload(){var t=this.wrapper.classList;t.contains("preloaded")||(t.add("preloaded"),this.load(""))}setTextboxValue(t=""){var e=this.control_input,n=e.value!==t;n&&(e.value=t,ts(e,"update"),this.lastValue=t)}getValue(){return this.is_select_tag&&this.input.hasAttribute("multiple")?this.items:this.items.join(this.settings.delimiter)}setValue(t,e){var n=e?[]:["change"];$o(this,n,()=>{this.clear(e),this.addItems(t,e)})}setMaxItems(t){t===0&&(t=null),this.settings.maxItems=t,this.refreshState()}setActiveItem(t,e){var n=this,r,s,o,a,l,c;if(n.settings.mode!=="single"){if(!t){n.clearActiveItems(),n.isFocused&&n.inputState();return}if(r=e&&e.type.toLowerCase(),r==="click"&&We("shiftKey",e)&&n.activeItems.length){for(c=n.getLastActive(),o=Array.prototype.indexOf.call(n.control.children,c),a=Array.prototype.indexOf.call(n.control.children,t),o>a&&(l=o,o=a,a=l),s=o;s<=a;s++)t=n.control.children[s],n.activeItems.indexOf(t)===-1&&n.setActiveItemClass(t);ut(e)}else r==="click"&&We(Ci,e)||r==="keydown"&&We("shiftKey",e)?t.classList.contains("active")?n.removeActiveItem(t):n.setActiveItemClass(t):(n.clearActiveItems(),n.setActiveItemClass(t));n.inputState(),n.isFocused||n.focus()}}setActiveItemClass(t){const e=this,n=e.control.querySelector(".last-active");n&&Se(n,"last-active"),jt(t,"active last-active"),e.trigger("item_select",t),e.activeItems.indexOf(t)==-1&&e.activeItems.push(t)}removeActiveItem(t){var e=this.activeItems.indexOf(t);this.activeItems.splice(e,1),Se(t,"active")}clearActiveItems(){Se(this.activeItems,"active"),this.activeItems=[]}setActiveOption(t,e=!0){t!==this.activeOption&&(this.clearActiveOption(),t&&(this.activeOption=t,ot(this.focus_node,{"aria-activedescendant":t.getAttribute("id")}),ot(t,{"aria-selected":"true"}),jt(t,"active"),e&&this.scrollToOption(t)))}scrollToOption(t,e){if(!t)return;const n=this.dropdown_content,r=n.clientHeight,s=n.scrollTop||0,o=t.offsetHeight,a=t.getBoundingClientRect().top-n.getBoundingClientRect().top+s;a+o>r+s?this.scroll(a-r+o,e):a<s&&this.scroll(a,e)}scroll(t,e){const n=this.dropdown_content;e&&(n.style.scrollBehavior=e),n.scrollTop=t,n.style.scrollBehavior=""}clearActiveOption(){this.activeOption&&(Se(this.activeOption,"active"),ot(this.activeOption,{"aria-selected":null})),this.activeOption=null,ot(this.focus_node,{"aria-activedescendant":null})}selectAll(){const t=this;if(t.settings.mode==="single")return;const e=t.controlChildren();e.length&&(t.inputState(),t.close(),t.activeItems=e,bt(e,n=>{t.setActiveItemClass(n)}))}inputState(){var t=this;t.control.contains(t.control_input)&&(ot(t.control_input,{placeholder:t.settings.placeholder}),t.activeItems.length>0||!t.isFocused&&t.settings.hidePlaceholder&&t.items.length>0?(t.setTextboxValue(),t.isInputHidden=!0):(t.settings.hidePlaceholder&&t.items.length>0&&ot(t.control_input,{placeholder:""}),t.isInputHidden=!1),t.wrapper.classList.toggle("input-hidden",t.isInputHidden))}inputValue(){return this.control_input.value.trim()}focus(){var t=this;t.isDisabled||t.isReadOnly||(t.ignoreFocus=!0,t.control_input.offsetWidth?t.control_input.focus():t.focus_node.focus(),setTimeout(()=>{t.ignoreFocus=!1,t.onFocus()},0))}blur(){this.focus_node.blur(),this.onBlur()}getScoreFunction(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())}getSearchOptions(){var t=this.settings,e=t.sortField;return typeof t.sortField=="string"&&(e=[{field:t.sortField}]),{fields:t.searchField,conjunction:t.searchConjunction,sort:e,nesting:t.nesting}}search(t){var e,n,r=this,s=this.getSearchOptions();if(r.settings.score&&(n=r.settings.score.call(r,t),typeof n!="function"))throw new Error('Tom Select "score" setting must be a function that returns a function');return t!==r.lastQuery?(r.lastQuery=t,e=r.sifter.search(t,Object.assign(s,{score:n})),r.currentResults=e):e=Object.assign({},r.currentResults),r.settings.hideSelected&&(e.items=e.items.filter(o=>{let a=Xt(o.id);return!(a&&r.items.indexOf(a)!==-1)})),e}refreshOptions(t=!0){var e,n,r,s,o,a,l,c,h,p;const m={},k=[];var v=this,y=v.inputValue();const C=y===v.lastQuery||y==""&&v.lastQuery==null;var R=v.search(y),x=null,F=v.settings.shouldOpen||!1,B=v.dropdown_content;C&&(x=v.activeOption,x&&(h=x.closest("[data-group]"))),s=R.items.length,typeof v.settings.maxOptions=="number"&&(s=Math.min(s,v.settings.maxOptions)),s>0&&(F=!0);const N=(O,P)=>{let I=m[O];if(I!==void 0){let G=k[I];if(G!==void 0)return[I,G.fragment]}let st=document.createDocumentFragment();return I=k.length,k.push({fragment:st,order:P,optgroup:O}),[I,st]};for(e=0;e<s;e++){let O=R.items[e];if(!O)continue;let P=O.id,I=v.options[P];if(I===void 0)continue;let st=Ri(P),G=v.getOption(st,!0);for(v.settings.hideSelected||G.classList.toggle("selected",v.items.includes(st)),o=I[v.settings.optgroupField]||"",a=Array.isArray(o)?o:[o],n=0,r=a&&a.length;n<r;n++){o=a[n];let it=I.$order,wt=v.optgroups[o];wt===void 0?o="":it=wt.$order;const[Le,be]=N(o,it);n>0&&(G=G.cloneNode(!0),ot(G,{id:I.$id+"-clone-"+n,"aria-selected":null}),G.classList.add("ts-cloned"),Se(G,"active"),v.activeOption&&v.activeOption.dataset.value==P&&h&&h.dataset.group===o.toString()&&(x=G)),be.appendChild(G),o!=""&&(m[o]=Le)}}v.settings.lockOptgroupOrder&&k.sort((O,P)=>O.order-P.order),l=document.createDocumentFragment(),bt(k,O=>{let P=O.fragment,I=O.optgroup;if(!P||!P.children.length)return;let st=v.optgroups[I];if(st!==void 0){let G=document.createDocumentFragment(),it=v.render("optgroup_header",st);qe(G,it),qe(G,P);let wt=v.render("optgroup",{group:st,options:G});qe(l,wt)}else qe(l,P)}),B.innerHTML="",qe(B,l),v.settings.highlight&&(lf(B),R.query.length&&R.tokens.length&&bt(R.tokens,O=>{af(B,O.regex)}));var J=O=>{let P=v.render(O,{input:y});return P&&(F=!0,B.insertBefore(P,B.firstChild)),P};if(v.loading?J("loading"):v.settings.shouldLoad.call(v,y)?R.items.length===0&&J("no_results"):J("not_loading"),c=v.canCreate(y),c&&(p=J("option_create")),v.hasOptions=R.items.length>0||c,F){if(R.items.length>0){if(!x&&v.settings.mode==="single"&&v.items[0]!=null&&(x=v.getOption(v.items[0])),!B.contains(x)){let O=0;p&&!v.settings.addPrecedence&&(O=1),x=v.selectable()[O]}}else p&&(x=p);t&&!v.isOpen&&(v.open(),v.scrollToOption(x,"auto")),v.setActiveOption(x)}else v.clearActiveOption(),t&&v.isOpen&&v.close(!1)}selectable(){return this.dropdown_content.querySelectorAll("[data-selectable]")}addOption(t,e=!1){const n=this;if(Array.isArray(t))return n.addOptions(t,e),!1;const r=Xt(t[n.settings.valueField]);return r===null||n.options.hasOwnProperty(r)?!1:(t.$order=t.$order||++n.order,t.$id=n.inputId+"-opt-"+t.$order,n.options[r]=t,n.lastQuery=null,e&&(n.userOptions[r]=e,n.trigger("option_add",r,t)),r)}addOptions(t,e=!1){bt(t,n=>{this.addOption(n,e)})}registerOption(t){return this.addOption(t)}registerOptionGroup(t){var e=Xt(t[this.settings.optgroupValueField]);return e===null?!1:(t.$order=t.$order||++this.order,this.optgroups[e]=t,e)}addOptionGroup(t,e){var n;e[this.settings.optgroupValueField]=t,(n=this.registerOptionGroup(e))&&this.trigger("optgroup_add",n,e)}removeOptionGroup(t){this.optgroups.hasOwnProperty(t)&&(delete this.optgroups[t],this.clearCache(),this.trigger("optgroup_remove",t))}clearOptionGroups(){this.optgroups={},this.clearCache(),this.trigger("optgroup_clear")}updateOption(t,e){const n=this;var r,s;const o=Xt(t),a=Xt(e[n.settings.valueField]);if(o===null)return;const l=n.options[o];if(l==null)return;if(typeof a!="string")throw new Error("Value must be set in option data");const c=n.getOption(o),h=n.getItem(o);if(e.$order=e.$order||l.$order,delete n.options[o],n.uncacheValue(a),n.options[a]=e,c){if(n.dropdown_content.contains(c)){const p=n._render("option",e);Es(c,p),n.activeOption===c&&n.setActiveOption(p)}c.remove()}h&&(s=n.items.indexOf(o),s!==-1&&n.items.splice(s,1,a),r=n._render("item",e),h.classList.contains("active")&&jt(r,"active"),Es(h,r)),n.lastQuery=null}removeOption(t,e){const n=this;t=Ri(t),n.uncacheValue(t),delete n.userOptions[t],delete n.options[t],n.lastQuery=null,n.trigger("option_remove",t),n.removeItem(t,e)}clearOptions(t){const e=(t||this.clearFilter).bind(this);this.loadedSearches={},this.userOptions={},this.clearCache();const n={};bt(this.options,(r,s)=>{e(r,s)&&(n[s]=r)}),this.options=this.sifter.items=n,this.lastQuery=null,this.trigger("option_clear")}clearFilter(t,e){return this.items.indexOf(e)>=0}getOption(t,e=!1){const n=Xt(t);if(n===null)return null;const r=this.options[n];if(r!=null){if(r.$div)return r.$div;if(e)return this._render("option",r)}return null}getAdjacent(t,e,n="option"){var r=this,s;if(!t)return null;n=="item"?s=r.controlChildren():s=r.dropdown_content.querySelectorAll("[data-selectable]");for(let o=0;o<s.length;o++)if(s[o]==t)return e>0?s[o+1]:s[o-1];return null}getItem(t){if(typeof t=="object")return t;var e=Xt(t);return e!==null?this.control.querySelector(`[data-value="${Ko(e)}"]`):null}addItems(t,e){var n=this,r=Array.isArray(t)?t:[t];r=r.filter(o=>n.items.indexOf(o)===-1);const s=r[r.length-1];r.forEach(o=>{n.isPending=o!==s,n.addItem(o,e)})}addItem(t,e){var n=e?[]:["change","dropdown_close"];$o(this,n,()=>{var r,s;const o=this,a=o.settings.mode,l=Xt(t);if(!(l&&o.items.indexOf(l)!==-1&&(a==="single"&&o.close(),a==="single"||!o.settings.duplicates))&&!(l===null||!o.options.hasOwnProperty(l))&&(a==="single"&&o.clear(e),!(a==="multi"&&o.isFull()))){if(r=o._render("item",o.options[l]),o.control.contains(r)&&(r=r.cloneNode(!0)),s=o.isFull(),o.items.splice(o.caretPos,0,l),o.insertAtCaret(r),o.isSetup){if(!o.isPending&&o.settings.hideSelected){let c=o.getOption(l),h=o.getAdjacent(c,1);h&&o.setActiveOption(h)}!o.isPending&&!o.settings.closeAfterSelect&&o.refreshOptions(o.isFocused&&a!=="single"),o.settings.closeAfterSelect!=!1&&o.isFull()?o.close():o.isPending||o.positionDropdown(),o.trigger("item_add",l,r),o.isPending||o.updateOriginalInput({silent:e})}(!o.isPending||!s&&o.isFull())&&(o.inputState(),o.refreshState())}})}removeItem(t=null,e){const n=this;if(t=n.getItem(t),!t)return;var r,s;const o=t.dataset.value;r=Jo(t),t.remove(),t.classList.contains("active")&&(s=n.activeItems.indexOf(t),n.activeItems.splice(s,1),Se(t,"active")),n.items.splice(r,1),n.lastQuery=null,!n.settings.persist&&n.userOptions.hasOwnProperty(o)&&n.removeOption(o,e),r<n.caretPos&&n.setCaret(n.caretPos-1),n.updateOriginalInput({silent:e}),n.refreshState(),n.positionDropdown(),n.trigger("item_remove",o,t)}createItem(t=null,e=()=>{}){arguments.length===3&&(e=arguments[2]),typeof e!="function"&&(e=()=>{});var n=this,r=n.caretPos,s;if(t=t||n.inputValue(),!n.canCreate(t))return e(),!1;n.lock();var o=!1,a=l=>{if(n.unlock(),!l||typeof l!="object")return e();var c=Xt(l[n.settings.valueField]);if(typeof c!="string")return e();n.setTextboxValue(),n.addOption(l,!0),n.setCaret(r),n.addItem(c),e(l),o=!0};return typeof n.settings.create=="function"?s=n.settings.create.call(this,t,a):s={[n.settings.labelField]:t,[n.settings.valueField]:t},o||a(s),!0}refreshItems(){var t=this;t.lastQuery=null,t.isSetup&&t.addItems(t.items),t.updateOriginalInput(),t.refreshState()}refreshState(){const t=this;t.refreshValidityState();const e=t.isFull(),n=t.isLocked;t.wrapper.classList.toggle("rtl",t.rtl);const r=t.wrapper.classList;r.toggle("focus",t.isFocused),r.toggle("disabled",t.isDisabled),r.toggle("readonly",t.isReadOnly),r.toggle("required",t.isRequired),r.toggle("invalid",!t.isValid),r.toggle("locked",n),r.toggle("full",e),r.toggle("input-active",t.isFocused&&!t.isInputHidden),r.toggle("dropdown-active",t.isOpen),r.toggle("has-options",of(t.options)),r.toggle("has-items",t.items.length>0)}refreshValidityState(){var t=this;t.input.validity&&(t.isValid=t.input.validity.valid,t.isInvalid=!t.isValid)}isFull(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems}updateOriginalInput(t={}){const e=this;var n,r;const s=e.input.querySelector('option[value=""]');if(e.is_select_tag){let c=function(h,p,m){return h||(h=se('<option value="'+Qr(p)+'">'+Qr(m)+"</option>")),h!=s&&e.input.append(h),a.push(h),(h!=s||l>0)&&(h.selected=!0),h};var o=c;const a=[],l=e.input.querySelectorAll("option:checked").length;e.input.querySelectorAll("option:checked").forEach(h=>{h.selected=!1}),e.items.length==0&&e.settings.mode=="single"?c(s,"",""):e.items.forEach(h=>{if(n=e.options[h],r=n[e.settings.labelField]||"",a.includes(n.$option)){const p=e.input.querySelector(`option[value="${Ko(h)}"]:not(:checked)`);c(p,h,r)}else n.$option=c(n.$option,h,r)})}else e.input.value=e.getValue();e.isSetup&&(t.silent||e.trigger("change",e.getValue()))}open(){var t=this;t.isLocked||t.isOpen||t.settings.mode==="multi"&&t.isFull()||(t.isOpen=!0,ot(t.focus_node,{"aria-expanded":"true"}),t.refreshState(),yi(t.dropdown,{visibility:"hidden",display:"block"}),t.positionDropdown(),yi(t.dropdown,{visibility:"visible",display:"block"}),t.focus(),t.trigger("dropdown_open",t.dropdown))}close(t=!0){var e=this,n=e.isOpen;t&&(e.setTextboxValue(),e.settings.mode==="single"&&e.items.length&&e.inputState()),e.isOpen=!1,ot(e.focus_node,{"aria-expanded":"false"}),yi(e.dropdown,{display:"none"}),e.settings.hideSelected&&e.clearActiveOption(),e.refreshState(),n&&e.trigger("dropdown_close",e.dropdown)}positionDropdown(){if(this.settings.dropdownParent==="body"){var t=this.control,e=t.getBoundingClientRect(),n=t.offsetHeight+e.top+window.scrollY,r=e.left+window.scrollX;yi(this.dropdown,{width:e.width+"px",top:n+"px",left:r+"px"})}}clear(t){var e=this;if(e.items.length){var n=e.controlChildren();bt(n,r=>{e.removeItem(r,!0)}),e.inputState(),t||e.updateOriginalInput(),e.trigger("clear")}}insertAtCaret(t){const e=this,n=e.caretPos,r=e.control;r.insertBefore(t,r.children[n]||null),e.setCaret(n+1)}deleteSelection(t){var e,n,r,s,o=this;e=t&&t.keyCode===Go?-1:1,n=rf(o.control_input);const a=[];if(o.activeItems.length)s=Yo(o.activeItems,e),r=Jo(s),e>0&&r++,bt(o.activeItems,l=>a.push(l));else if((o.isFocused||o.settings.mode==="single")&&o.items.length){const l=o.controlChildren();let c;e<0&&n.start===0&&n.length===0?c=l[o.caretPos-1]:e>0&&n.start===o.inputValue().length&&(c=l[o.caretPos]),c!==void 0&&a.push(c)}if(!o.shouldDelete(a,t))return!1;for(ut(t,!0),typeof r<"u"&&o.setCaret(r);a.length;)o.removeItem(a.pop());return o.inputState(),o.positionDropdown(),o.refreshOptions(!1),!0}shouldDelete(t,e){const n=t.map(r=>r.dataset.value);return!(!n.length||typeof this.settings.onDelete=="function"&&this.settings.onDelete(n,e)===!1)}advanceSelection(t,e){var n,r,s=this;s.rtl&&(t*=-1),!s.inputValue().length&&(We(Ci,e)||We("shiftKey",e)?(n=s.getLastActive(t),n?n.classList.contains("active")?r=s.getAdjacent(n,t,"item"):r=n:t>0?r=s.control_input.nextElementSibling:r=s.control_input.previousElementSibling,r&&(r.classList.contains("active")&&s.removeActiveItem(n),s.setActiveItemClass(r))):s.moveCaret(t))}moveCaret(t){}getLastActive(t){let e=this.control.querySelector(".last-active");if(e)return e;var n=this.control.querySelectorAll(".active");if(n)return Yo(n,t)}setCaret(t){this.caretPos=this.items.length}controlChildren(){return Array.from(this.control.querySelectorAll("[data-ts-item]"))}lock(){this.setLocked(!0)}unlock(){this.setLocked(!1)}setLocked(t=this.isReadOnly||this.isDisabled){this.isLocked=t,this.refreshState()}disable(){this.setDisabled(!0),this.close()}enable(){this.setDisabled(!1)}setDisabled(t){this.focus_node.tabIndex=t?-1:this.tabIndex,this.isDisabled=t,this.input.disabled=t,this.control_input.disabled=t,this.setLocked()}setReadOnly(t){this.isReadOnly=t,this.input.readOnly=t,this.control_input.readOnly=t,this.setLocked()}destroy(){var t=this,e=t.revertSettings;t.trigger("destroy"),t.off(),t.wrapper.remove(),t.dropdown.remove(),t.input.innerHTML=e.innerHTML,t.input.tabIndex=e.tabIndex,Se(t.input,"tomselected","ts-hidden-accessible"),t._destroy(),delete t.input.tomselect}render(t,e){var n,r;const s=this;if(typeof this.settings.render[t]!="function"||(r=s.settings.render[t].call(this,e,Qr),!r))return null;if(r=se(r),t==="option"||t==="option_create"?e[s.settings.disabledField]?ot(r,{"aria-disabled":"true"}):ot(r,{"data-selectable":""}):t==="optgroup"&&(n=e.group[s.settings.optgroupValueField],ot(r,{"data-group":n}),e.group[s.settings.disabledField]&&ot(r,{"data-disabled":""})),t==="option"||t==="item"){const o=Ri(e[s.settings.valueField]);ot(r,{"data-value":o}),t==="item"?(jt(r,s.settings.itemClass),ot(r,{"data-ts-item":""})):(jt(r,s.settings.optionClass),ot(r,{role:"option",id:e.$id}),e.$div=r,s.options[o]=e)}return r}_render(t,e){const n=this.render(t,e);if(n==null)throw"HTMLElement expected";return n}clearCache(){bt(this.options,t=>{t.$div&&(t.$div.remove(),delete t.$div)})}uncacheValue(t){const e=this.getOption(t);e&&e.remove()}canCreate(t){return this.settings.create&&t.length>0&&this.settings.createFilter.call(this,t)}hook(t,e,n){var r=this,s=r[e];r[e]=function(){var o,a;return t==="after"&&(o=s.apply(r,arguments)),a=n.apply(r,arguments),t==="instead"?a:(t==="before"&&(o=s.apply(r,arguments)),o)}}}const bf=(i,t,e,n)=>{i.addEventListener(t,e,n)};function Af(){bf(this.input,"change",()=>{this.sync()})}const yf=i=>typeof i>"u"||i===null?null:Cf(i),Cf=i=>typeof i=="boolean"?i?"1":"0":i+"",ea=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},xf=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Ef(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Ef=i=>typeof i=="string"&&i.indexOf("<")>-1;function wf(i){var t=this,e=t.onOptionSelect;t.settings.hideSelected=!1;const n=Object.assign({className:"tomselect-checkbox",checkedClassNames:void 0,uncheckedClassNames:void 0},i);var r=function(a,l){l?(a.checked=!0,n.uncheckedClassNames&&a.classList.remove(...n.uncheckedClassNames),n.checkedClassNames&&a.classList.add(...n.checkedClassNames)):(a.checked=!1,n.checkedClassNames&&a.classList.remove(...n.checkedClassNames),n.uncheckedClassNames&&a.classList.add(...n.uncheckedClassNames))},s=function(a){setTimeout(()=>{var l=a.querySelector("input."+n.className);l instanceof HTMLInputElement&&r(l,a.classList.contains("selected"))},1)};t.hook("after","setupTemplates",()=>{var o=t.settings.render.option;t.settings.render.option=(a,l)=>{var c=xf(o.call(t,a,l)),h=document.createElement("input");n.className&&h.classList.add(n.className),h.addEventListener("click",function(m){ea(m)}),h.type="checkbox";const p=yf(a[t.settings.valueField]);return r(h,!!(p&&t.items.indexOf(p)>-1)),c.prepend(h),c}}),t.on("item_remove",o=>{var a=t.getOption(o);a&&(a.classList.remove("selected"),s(a))}),t.on("item_add",o=>{var a=t.getOption(o);a&&s(a)}),t.hook("instead","onOptionSelect",(o,a)=>{if(a.classList.contains("selected")){a.classList.remove("selected"),t.removeItem(a.dataset.value),t.refreshOptions(),ea(o,!0);return}e.call(t,o,a),s(a)})}const kf=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Sf(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Sf=i=>typeof i=="string"&&i.indexOf("<")>-1;function Df(i){const t=this,e=Object.assign({className:"clear-button",title:"Clear All",html:n=>`<div class="${n.className}" title="${n.title}">&#10799;</div>`},i);t.on("initialize",()=>{var n=kf(e.html(e));n.addEventListener("click",r=>{t.isLocked||(t.clear(),t.settings.mode==="single"&&t.settings.allowEmptyOption&&t.addItem(""),r.preventDefault(),r.stopPropagation())}),t.control.appendChild(n)})}const _f=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},fn=(i,t,e,n)=>{i.addEventListener(t,e,n)},Tf=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},Rf=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Of(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Of=i=>typeof i=="string"&&i.indexOf("<")>-1,Ff=(i,t)=>{Tf(t,(e,n)=>{e==null?i.removeAttribute(n):i.setAttribute(n,""+e)})},Lf=(i,t)=>{var e;(e=i.parentNode)==null||e.insertBefore(t,i.nextSibling)},Mf=(i,t)=>{var e;(e=i.parentNode)==null||e.insertBefore(t,i)},If=(i,t)=>{do{var e;if(t=(e=t)==null?void 0:e.previousElementSibling,i==t)return!0}while(t&&t.previousElementSibling);return!1};function Nf(){var i=this;if(i.settings.mode!=="multi")return;var t=i.lock,e=i.unlock;let n=!0,r;i.hook("after","setupTemplates",()=>{var s=i.settings.render.item;i.settings.render.item=(o,a)=>{const l=Rf(s.call(i,o,a));Ff(l,{draggable:"true"});const c=y=>{n||_f(y),y.stopPropagation()},h=y=>{r=l,setTimeout(()=>{l.classList.add("ts-dragging")},0)},p=y=>{y.preventDefault(),l.classList.add("ts-drag-over"),k(l,r)},m=()=>{l.classList.remove("ts-drag-over")},k=(y,C)=>{C!==void 0&&(If(C,l)?Lf(y,C):Mf(y,C))},v=()=>{var y;document.querySelectorAll(".ts-drag-over").forEach(R=>R.classList.remove("ts-drag-over")),(y=r)==null||y.classList.remove("ts-dragging"),r=void 0;var C=[];i.control.querySelectorAll("[data-value]").forEach(R=>{if(R.dataset.value){let x=R.dataset.value;x&&C.push(x)}}),i.setValue(C)};return fn(l,"mousedown",c),fn(l,"dragstart",h),fn(l,"dragenter",p),fn(l,"dragover",p),fn(l,"dragleave",m),fn(l,"dragend",v),l}}),i.hook("instead","lock",()=>(n=!1,t.call(i))),i.hook("instead","unlock",()=>(n=!0,e.call(i)))}const Bf=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},Pf=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Vf(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Vf=i=>typeof i=="string"&&i.indexOf("<")>-1;function jf(i){const t=this,e=Object.assign({title:"Untitled",headerClass:"dropdown-header",titleRowClass:"dropdown-header-title",labelClass:"dropdown-header-label",closeClass:"dropdown-header-close",html:n=>'<div class="'+n.headerClass+'"><div class="'+n.titleRowClass+'"><span class="'+n.labelClass+'">'+n.title+'</span><a class="'+n.closeClass+'">&times;</a></div></div>'},i);t.on("initialize",()=>{var n=Pf(e.html(e)),r=n.querySelector("."+e.closeClass);r&&r.addEventListener("click",s=>{Bf(s,!0),t.close()}),t.dropdown.insertBefore(n,t.dropdown.firstChild)})}const Hf=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},Uf=(i,...t)=>{var e=Wf(t);i=qf(i),i.map(n=>{e.map(r=>{n.classList.remove(r)})})},Wf=i=>{var t=[];return Hf(i,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},qf=i=>(Array.isArray(i)||(i=[i]),i),zf=(i,t)=>{if(!i)return-1;t=t||i.nodeName;for(var e=0;i=i.previousElementSibling;)i.matches(t)&&e++;return e};function $f(){var i=this;i.hook("instead","setCaret",t=>{i.settings.mode==="single"||!i.control.contains(i.control_input)?t=i.items.length:(t=Math.max(0,Math.min(i.items.length,t)),t!=i.caretPos&&!i.isPending&&i.controlChildren().forEach((e,n)=>{n<t?i.control_input.insertAdjacentElement("beforebegin",e):i.control.appendChild(e)})),i.caretPos=t}),i.hook("instead","moveCaret",t=>{if(!i.isFocused)return;const e=i.getLastActive(t);if(e){const n=zf(e);i.setCaret(t>0?n+1:n),i.setActiveItem(),Uf(e,"last-active")}else i.setCaret(i.caretPos+t)})}const Kf=27,Yf=9,Jf=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},Gf=(i,t,e,n)=>{i.addEventListener(t,e,n)},Xf=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},na=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(Qf(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},Qf=i=>typeof i=="string"&&i.indexOf("<")>-1,Zf=(i,...t)=>{var e=tp(t);i=ep(i),i.map(n=>{e.map(r=>{n.classList.add(r)})})},tp=i=>{var t=[];return Xf(i,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},ep=i=>(Array.isArray(i)||(i=[i]),i);function np(){const i=this;i.settings.shouldOpen=!0,i.hook("before","setup",()=>{i.focus_node=i.control,Zf(i.control_input,"dropdown-input");const t=na('<div class="dropdown-input-wrap">');t.append(i.control_input),i.dropdown.insertBefore(t,i.dropdown.firstChild);const e=na('<input class="items-placeholder" tabindex="-1" />');e.placeholder=i.settings.placeholder||"",i.control.append(e)}),i.on("initialize",()=>{i.control_input.addEventListener("keydown",e=>{switch(e.keyCode){case Kf:i.isOpen&&(Jf(e,!0),i.close()),i.clearActiveItems();return;case Yf:i.focus_node.tabIndex=-1;break}return i.onKeyDown.call(i,e)}),i.on("blur",()=>{i.focus_node.tabIndex=i.isDisabled?-1:i.tabIndex}),i.on("dropdown_open",()=>{i.control_input.focus()});const t=i.onBlur;i.hook("instead","onBlur",e=>{if(!(e&&e.relatedTarget==i.control_input))return t.call(i)}),Gf(i.control_input,"blur",()=>i.onBlur()),i.hook("before","close",()=>{i.isOpen&&i.focus_node.focus({preventScroll:!0})})})}const xi=(i,t,e,n)=>{i.addEventListener(t,e,n)};function ip(){var i=this;i.on("initialize",()=>{var t=document.createElement("span"),e=i.control_input;t.style.cssText="position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ",i.wrapper.appendChild(t);var n=["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"];for(const s of n)t.style[s]=e.style[s];var r=()=>{t.textContent=e.value,e.style.width=t.clientWidth+"px"};r(),i.on("update item_add item_remove",r),xi(e,"input",r),xi(e,"keyup",r),xi(e,"blur",r),xi(e,"update",r)})}function rp(){var i=this,t=i.deleteSelection;this.hook("instead","deleteSelection",e=>i.activeItems.length?t.call(i,e):!1)}function sp(){this.hook("instead","setActiveItem",()=>{}),this.hook("instead","selectAll",()=>{})}const ia=37,op=39,ap=(i,t,e)=>{for(;i&&i.matches;){if(i.matches(t))return i;i=i.parentNode}},lp=(i,t)=>{if(!i)return-1;t=t||i.nodeName;for(var e=0;i=i.previousElementSibling;)i.matches(t)&&e++;return e};function up(){var i=this,t=i.onKeyDown;i.hook("instead","onKeyDown",e=>{var n,r,s,o;if(!i.isOpen||!(e.keyCode===ia||e.keyCode===op))return t.call(i,e);i.ignoreHover=!0,o=ap(i.activeOption,"[data-group]"),n=lp(i.activeOption,"[data-selectable]"),o&&(e.keyCode===ia?o=o.previousSibling:o=o.nextSibling,o&&(s=o.querySelectorAll("[data-selectable]"),r=s[Math.min(s.length-1,n)],r&&i.setActiveOption(r)))})}const cp=i=>(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),ra=(i,t=!1)=>{i&&(i.preventDefault(),t&&i.stopPropagation())},sa=(i,t,e,n)=>{i.addEventListener(t,e,n)},oa=i=>{if(i.jquery)return i[0];if(i instanceof HTMLElement)return i;if(dp(i)){var t=document.createElement("template");return t.innerHTML=i.trim(),t.content.firstChild}return document.querySelector(i)},dp=i=>typeof i=="string"&&i.indexOf("<")>-1;function hp(i){const t=Object.assign({label:"&times;",title:"Remove",className:"remove",append:!0},i);var e=this;if(t.append){var n='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+cp(t.title)+'">'+t.label+"</a>";e.hook("after","setupTemplates",()=>{var r=e.settings.render.item;e.settings.render.item=(s,o)=>{var a=oa(r.call(e,s,o)),l=oa(n);return a.appendChild(l),sa(l,"mousedown",c=>{ra(c,!0)}),sa(l,"click",c=>{e.isLocked||(ra(c,!0),!e.isLocked&&e.shouldDelete([a],c)&&(e.removeItem(a),e.refreshOptions(!1),e.inputState()))}),a}})}}function fp(i){const t=this,e=Object.assign({text:n=>n[t.settings.labelField]},i);t.on("item_remove",function(n){if(t.isFocused&&t.control_input.value.trim()===""){var r=t.options[n];r&&t.setTextboxValue(e.text.call(t,r))}})}const pp=(i,t)=>{if(Array.isArray(i))i.forEach(t);else for(var e in i)i.hasOwnProperty(e)&&t(i[e],e)},gp=(i,...t)=>{var e=mp(t);i=vp(i),i.map(n=>{e.map(r=>{n.classList.add(r)})})},mp=i=>{var t=[];return pp(i,e=>{typeof e=="string"&&(e=e.trim().split(/[\t\n\f\r\s]/)),Array.isArray(e)&&(t=t.concat(e))}),t.filter(Boolean)},vp=i=>(Array.isArray(i)||(i=[i]),i);function bp(){const i=this,t=i.canLoad,e=i.clearActiveOption,n=i.loadCallback;var r={},s,o=!1,a,l=[];if(i.settings.shouldLoadMore||(i.settings.shouldLoadMore=()=>{if(s.clientHeight/(s.scrollHeight-s.scrollTop)>.9)return!0;if(i.activeOption){var m=i.selectable(),k=Array.from(m).indexOf(i.activeOption);if(k>=m.length-2)return!0}return!1}),!i.settings.firstUrl)throw"virtual_scroll plugin requires a firstUrl() method";i.settings.sortField=[{field:"$order"},{field:"$score"}];const c=p=>typeof i.settings.maxOptions=="number"&&s.children.length>=i.settings.maxOptions?!1:!!(p in r&&r[p]),h=(p,m)=>i.items.indexOf(m)>=0||l.indexOf(m)>=0;i.setNextUrl=(p,m)=>{r[p]=m},i.getUrl=p=>{if(p in r){const m=r[p];return r[p]=!1,m}return i.clearPagination(),i.settings.firstUrl.call(i,p)},i.clearPagination=()=>{r={}},i.hook("instead","clearActiveOption",()=>{if(!o)return e.call(i)}),i.hook("instead","canLoad",p=>p in r?c(p):t.call(i,p)),i.hook("instead","loadCallback",(p,m)=>{if(!o)i.clearOptions(h);else if(a){const k=p[0];k!==void 0&&(a.dataset.value=k[i.settings.valueField])}n.call(i,p,m),o=!1}),i.hook("after","refreshOptions",()=>{const p=i.lastValue;var m;c(p)?(m=i.render("loading_more",{query:p}),m&&(m.setAttribute("data-selectable",""),a=m)):p in r&&!s.querySelector(".no-results")&&(m=i.render("no_more_results",{query:p})),m&&(gp(m,i.settings.optionClass),s.append(m))}),i.on("initialize",()=>{l=Object.keys(i.options),s=i.dropdown_content,i.settings.render=Object.assign({},{loading_more:()=>'<div class="loading-more-results">Loading more results ... </div>',no_more_results:()=>'<div class="no-more-results">No more results</div>'},i.settings.render),s.addEventListener("scroll",()=>{i.settings.shouldLoadMore.call(i)&&c(i.lastValue)&&(o||(o=!0,i.load.call(i,i.lastValue)))})})}Mt.define("change_listener",Af);Mt.define("checkbox_options",wf);Mt.define("clear_button",Df);Mt.define("drag_drop",Nf);Mt.define("dropdown_header",jf);Mt.define("caret_position",$f);Mt.define("dropdown_input",np);Mt.define("input_autogrow",ip);Mt.define("no_backspace_delete",rp);Mt.define("no_active_items",sp);Mt.define("optgroup_columns",up);Mt.define("remove_button",hp);Mt.define("restore_on_backspace",fp);Mt.define("virtual_scroll",bp);window.flatpickr=gt;window.IMask=j;window.TomSelect=Mt;
